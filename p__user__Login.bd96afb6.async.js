(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{63434:function(A,D,e){"use strict";var Z=e(63185),b=e(9676),u=e(28991),l=e(81253),r=e(85893),I=e(22270),j=e(67294),S=e(64893),H=e(88927),X=["options","fieldProps","proFieldProps","valueEnum"],o=j.forwardRef(function(M,U){var T=M.options,R=M.fieldProps,$=M.proFieldProps,t=M.valueEnum,d=(0,l.Z)(M,X);return(0,r.jsx)(H.Z,(0,u.Z)({ref:U,valueType:"checkbox",valueEnum:(0,I.h)(t,void 0),fieldProps:(0,u.Z)({options:T},R),lightProps:(0,u.Z)({labelFormatter:function(){return(0,r.jsx)(H.Z,(0,u.Z)({ref:U,valueType:"checkbox",mode:"read",valueEnum:(0,I.h)(t,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,u.Z)({options:T},R),proFieldProps:$},d))}},d.lightProps),proFieldProps:$},d))}),y=j.forwardRef(function(M,U){var T=M.fieldProps,R=M.children;return(0,r.jsx)(b.Z,(0,u.Z)((0,u.Z)({ref:U},T),{},{children:R}))}),c=(0,S.G)(y,{valuePropName:"checked"}),Y=c;Y.Group=o,D.Z=Y},97544:function(A,D,e){"use strict";e.d(D,{Z:function(){return $}});var Z=e(28991),b=e(24793),u=e(97183),l=e(85893),r=e(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm5.6-532.7c53 0 89 33.8 93 83.4.3 4.2 3.8 7.4 8 7.4h56.7c2.6 0 4.7-2.1 4.7-4.7 0-86.7-68.4-147.4-162.7-147.4C407.4 290 344 364.2 344 486.8v52.3C344 660.8 407.4 734 517.3 734c94 0 162.7-58.8 162.7-141.4 0-2.6-2.1-4.7-4.7-4.7h-56.8c-4.2 0-7.6 3.2-8 7.3-4.2 46.1-40.1 77.8-93 77.8-65.3 0-102.1-47.9-102.1-133.6v-52.6c.1-87 37-135.5 102.2-135.5z"}}]},name:"copyright",theme:"outlined"},j=I,S=e(27029),H=function(d,W){return r.createElement(S.Z,(0,Z.Z)((0,Z.Z)({},d),{},{ref:W,icon:j}))};H.displayName="CopyrightOutlined";var X=r.forwardRef(H),o=e(84305),y=e(39559),c=e(94184),Y=e.n(c),M=e(80471),U=function(t){var d=t.className,W=t.prefixCls,m=t.links,L=t.copyright,w=t.style,V=(0,r.useContext)(y.ZP.ConfigContext),q=V.getPrefixCls(W||"pro-global-footer");if((m==null||m===!1||Array.isArray(m)&&m.length===0)&&(L==null||L===!1))return null;var ve=Y()(q,d);return(0,l.jsxs)("div",{className:ve,style:w,children:[m&&(0,l.jsx)("div",{className:"".concat(q,"-links"),children:m.map(function(z){return(0,l.jsx)("a",{title:z.key,target:z.blankTarget?"_blank":"_self",href:z.href,rel:"noreferrer",children:z.title},z.key)})}),L&&(0,l.jsx)("div",{className:"".concat(q,"-copyright"),children:L})]})},T=u.Z.Footer,R=function(d){var W=d.links,m=d.copyright,L=d.style,w=d.className,V=d.prefixCls;return(0,l.jsx)(T,{className:w,style:(0,Z.Z)({padding:0},L),children:(0,l.jsx)(U,{links:W,prefixCls:V,copyright:m===!1?null:(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(X,{})," ",m]})})})},$=R},34687:function(A){A.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO",wechat:"wechat___1o69H",qrcode_footer:"qrcode_footer___1qgTC",qrcode_icon:"qrcode_icon___1NiMp"}},32384:function(){},80471:function(){},12001:function(){},37855:function(A,D,e){"use strict";e.r(D),e.d(D,{default:function(){return Te}});var Z=e(18106),b=e(60561),u=e(34792),l=e(48086),r=e(39428),I=e(11849),j=e(3182),S=e(2824),H=e(17462),X=e(76772),o=e(25377),y=e(28991),c=e(67294),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"},M=Y,U=e(27029),T=function(F,h){return c.createElement(U.Z,(0,y.Z)((0,y.Z)({},F),{},{ref:h,icon:M}))};T.displayName="GithubOutlined";var R=c.forwardRef(T),$=e(97544),t=e(85893),d=function(){var F=(0,o.YB)(),h=F.formatMessage({id:"app.copyright.produced",defaultMessage:"\u8682\u8681\u96C6\u56E2\u4F53\u9A8C\u6280\u672F\u90E8\u51FA\u54C1"}),k=new Date().getFullYear();return(0,t.jsx)($.Z,{copyright:"".concat(k," ").concat(h),links:[{key:"Ant Design Pro",title:"Ant Design Pro",href:"https://pro.ant.design",blankTarget:!0},{key:"github",title:(0,t.jsx)(R,{}),href:"https://github.com/ant-design/ant-design-pro",blankTarget:!0},{key:"Ant Design",title:"Ant Design",href:"https://ant.design",blankTarget:!0}]})},W=d,m=e(14695),L=e(14294),w=e(89366),V=e(2603),q=e(29985),ve=e(84305),z=e(39559),ye=e(81253),Pe=e(31490),Ce=e(5894),We=e(32384),je=["logo","message","contentStyle","title","subTitle","actions","children"];function Me(P){var F,h=P.logo,k=P.message,oe=P.contentStyle,_=P.title,ee=P.subTitle,B=P.actions,K=P.children,C=(0,ye.Z)(P,je),ne=(0,Pe.YB)(),ie=C.submitter===!1?!1:(0,y.Z)((0,y.Z)({searchConfig:{submitText:ne.getMessage("loginForm.submitText","\u767B\u5F55")}},C.submitter),{},{submitButtonProps:(0,y.Z)({size:"large",style:{width:"100%"}},(F=C.submitter)===null||F===void 0?void 0:F.submitButtonProps),render:function(J,G){var ae,ge=G.pop();if(typeof(C==null||(ae=C.submitter)===null||ae===void 0?void 0:ae.render)=="function"){var Q,se;return C==null||(Q=C.submitter)===null||Q===void 0||(se=Q.render)===null||se===void 0?void 0:se.call(Q,J,G)}return ge}}),ue=(0,c.useContext)(z.ZP.ConfigContext),ce=ue.getPrefixCls("pro-form-login"),O=function(J){return"".concat(ce,"-").concat(J)},te=(0,c.useMemo)(function(){return h?typeof h=="string"?(0,t.jsx)("img",{src:h}):h:null},[h]);return(0,t.jsxs)("div",{className:O("container"),children:[(0,t.jsxs)("div",{className:O("top"),children:[_||te?(0,t.jsxs)("div",{className:O("header"),children:[te?(0,t.jsx)("span",{className:O("logo"),children:te}):null,_?(0,t.jsx)("span",{className:O("title"),children:_}):null]}):null,ee?(0,t.jsx)("div",{className:O("desc"),children:ee}):null]}),(0,t.jsxs)("div",{className:O("main"),style:(0,y.Z)({width:328},oe),children:[(0,t.jsxs)(Ce.A,(0,y.Z)((0,y.Z)({isKeyPressSubmit:!0},C),{},{submitter:ie,children:[k,K]})),B?(0,t.jsx)("div",{className:O("other"),children:B}):null]})]})}var le=e(5966),Ee=e(16434),Fe=e(63434),Oe=e(84059),De=e(5481),Se=e.n(De),Be=e(34687),E=e.n(Be),fe=function(F){var h=F.content;return(0,t.jsx)(X.Z,{style:{marginBottom:24},message:h,type:"error",showIcon:!0})},be=function(){var F=(0,c.useState)({}),h=(0,S.Z)(F,2),k=h[0],oe=h[1],_=(0,c.useState)("account"),ee=(0,S.Z)(_,2),B=ee[0],K=ee[1],C=(0,c.useState)(""),ne=(0,S.Z)(C,2),ie=ne[0],ue=ne[1],ce=(0,c.useState)(""),O=(0,S.Z)(ce,2),te=O[0],de=O[1],J=(0,o.tT)("@@initialState"),G=J.initialState,ae=J.setInitialState,ge=(0,c.useState)(600),Q=(0,S.Z)(ge,1),se=Q[0],re=(0,c.useRef)(),Le=(0,c.useState)(0),me=(0,S.Z)(Le,2),Ne=me[0],Ae=me[1],N=(0,o.YB)(),he=function(){var p=(0,j.Z)((0,r.Z)().mark(function i(){var a,s;return(0,r.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G==null||(a=G.fetchUserInfo)===null||a===void 0?void 0:a.call(G);case 2:if(s=n.sent,!s){n.next=6;break}return n.next=6,ae(function(x){return(0,I.Z)((0,I.Z)({},x),{},{currentUser:s})});case 6:case"end":return n.stop()}},i)}));return function(){return p.apply(this,arguments)}}(),Ie=function(){var p=(0,j.Z)((0,r.Z)().mark(function i(a){var s,g,n,x,v,Ze;return(0,r.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,(0,m.x4)((0,I.Z)({},a));case 3:if(s=f.sent,s.code!==200){f.next=16;break}return localStorage.setItem("Authorization",s.data.token),g=N.formatMessage({id:"pages.login.success",defaultMessage:s.message}),l.ZP.success(g),f.next=10,he();case 10:if(o.m8){f.next=12;break}return f.abrupt("return");case 12:return n=o.m8.location.query,x=n,v=x.redirect,o.m8.push(v||"/"),f.abrupt("return");case 16:console.log(s),oe({type:"account",status:"error"}),ue(s.message),f.next=25;break;case 21:f.prev=21,f.t0=f.catch(0),Ze=N.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u9646\u63A5\u53E3\u5F02\u5E38\uFF0C\u767B\u9646\u5931\u8D25\uFF01"}),l.ZP.error(Ze);case 25:case"end":return f.stop()}},i,null,[[0,21]])}));return function(a){return p.apply(this,arguments)}}(),Ue=function(){var p=(0,j.Z)((0,r.Z)().mark(function i(){var a,s,g,n;return(0,r.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,m.WC)();case 2:if(a=v.sent,a.code!=200){v.next=15;break}return clearInterval(re.current),localStorage.setItem("Authorization",a.data.token),l.ZP.success(a.message),v.next=9,he();case 9:if(o.m8){v.next=11;break}return v.abrupt("return");case 11:return s=o.m8.location.query,g=s,n=g.redirect,o.m8.push(n||"/"),v.abrupt("return");case 15:if(a.code==-1){v.next=20;break}return clearInterval(re.current),l.ZP.info(a.message,5),K("account"),v.abrupt("return");case 20:case"end":return v.stop()}},i)}));return function(){return p.apply(this,arguments)}}(),Re=function(){var p=(0,j.Z)((0,r.Z)().mark(function i(){var a,s,g;return(0,r.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,m.Uq)({scan_type:"login"});case 2:if(a=x.sent,a.code!=200){x.next=9;break}return de(a.data.authorize_url),s=0,g=setInterval(function(){if(s>a.data.expire){clearInterval(re.current),K("account"),l.ZP.info("\u4E8C\u7EF4\u7801\u5DF2\u8FC7\u671F!");return}Ae(a.data.expire-s),s++,Ue()},1e3),re.current=g,x.abrupt("return");case 9:l.ZP.info(a.message);case 10:case"end":return x.stop()}},i)}));return function(){return p.apply(this,arguments)}}();(0,c.useEffect)(function(){B=="wechat"&&Re(),clearInterval(re.current)},[B]);var pe=k.status,xe=k.type;return(0,t.jsxs)("div",{className:E().container,children:[(0,t.jsx)("div",{className:E().lang,"data-lang":!0,children:o.pD&&(0,t.jsx)(o.pD,{})}),(0,t.jsxs)("div",{className:E().content,children:[B!="wechat"&&(0,t.jsxs)(Me,{logo:(0,t.jsx)("img",{alt:"logo",src:Se()}),title:"Ant Design",subTitle:N.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,t.jsx)(o._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,t.jsx)(L.Z,{onClick:function(){return K("wechat")},className:E().icon},"WechatOutlined")],onFinish:function(){var p=(0,j.Z)((0,r.Z)().mark(function i(a){return(0,r.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Ie(a);case 2:case"end":return g.stop()}},i)}));return function(i){return p.apply(this,arguments)}}(),children:[(0,t.jsxs)(b.Z,{activeKey:B,onChange:K,children:[(0,t.jsx)(b.Z.TabPane,{tab:N.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,t.jsx)(b.Z.TabPane,{tab:N.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),pe==="error"&&xe==="account"&&(0,t.jsx)(fe,{content:ie}),B==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(le.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(w.Z,{className:E().prefixIcon})},placeholder:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"},{min:3,message:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!"},{max:15,message:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!"}]}),(0,t.jsx)(le.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(V.Z,{className:E().prefixIcon})},placeholder:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"},{min:6,message:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D"},{max:12,message:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D"}]})]}),pe==="error"&&xe==="mobile"&&(0,t.jsx)(fe,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),B==="mobile"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(le.Z,{fieldProps:{size:"large",prefix:(0,t.jsx)(q.Z,{className:E().prefixIcon})},name:"mobile",placeholder:N.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,t.jsx)(o._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,t.jsx)(o._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,t.jsx)(Ee.Z,{fieldProps:{size:"large",prefix:(0,t.jsx)(V.Z,{className:E().prefixIcon})},captchaProps:{size:"large"},placeholder:N.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(i,a){return i?"".concat(a," ").concat(N.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):N.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",phoneName:"mobile",countDown:se,rules:[{required:!0,message:(0,t.jsx)(o._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})},{len:6,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var p=(0,j.Z)((0,r.Z)().mark(function i(a){var s;return(0,r.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,m.an)({phone_number:a});case 2:if(s=n.sent,s.code===200){n.next=6;break}throw l.ZP.info(s.message),new Error(s.message);case 6:l.ZP.success(s.message);case 7:case"end":return n.stop()}},i)}));return function(i){return p.apply(this,arguments)}}()})]}),(0,t.jsxs)("div",{style:{marginBottom:24},children:[(0,t.jsx)(Fe.Z,{noStyle:!0,name:"autoLogin",children:(0,t.jsx)(o._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,t.jsx)("a",{style:{float:"right"},children:(0,t.jsx)(o._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]}),B=="wechat"&&(0,t.jsxs)("div",{className:E().wechat,children:[(0,t.jsx)(Oe.ZP,{size:200,level:"L",value:te}),(0,t.jsxs)("p",{className:E().qrcode_footer,children:[(0,t.jsx)(L.Z,{className:E().qrcode_icon}),"\u6253\u5F00\u5FAE\u4FE1\u626B\u4E00\u626B ",Ne," \u79D2"]}),(0,t.jsx)("a",{onClick:function(){return K("account")},children:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55\uFF1F"})]})]}),(0,t.jsx)(W,{})]})},Te=be},5481:function(A,D,e){A.exports=e.p+"static/logo.f0355d39.svg"},97183:function(A,D,e){"use strict";var Z=e(2897),b=e(14025),u=Z.ZP;u.Header=Z.h4,u.Footer=Z.$_,u.Content=Z.VY,u.Sider=b.Z,D.Z=u},24793:function(A,D,e){"use strict";var Z=e(38663),b=e.n(Z),u=e(12001),l=e.n(u)}}]);
