(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[185],{8668:function(u){u.exports={pre:"pre___3fTUI",mcon:"mcon___23itC",wechat:"wechat___39kGh",msglist:"msglist____KnIO",header:"header___ksqT9",context:"context___3EoO_",message:"message___2f_Cd",time:"time___11wj3"}},97543:function(u,x,e){"use strict";e.r(x),e.d(x,{default:function(){return G}});var Q=e(13062),g=e(71230),X=e(57663),T=e(71577),w=e(47673),U=e(4107),b=e(22385),E=e(45777),k=e(89032),i=e(15746),q=e(58024),c=e(91894),_=e(17462),A=e(76772),ss=e(34792),W=e(48086),es=e(9715),h=e(16579),D=e(2824),ts=e(94233),f=e(51890),j=e(28991),r=e(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},I=H,L=e(27029),y=function(o,a){return r.createElement(L.Z,(0,j.Z)((0,j.Z)({},o),{},{ref:a,icon:I}))};y.displayName="MessageOutlined";var B=r.forwardRef(y),Y=e(67265),P=e(30381),Z=e.n(P),M=e(25377),R=e(8668),n=e.n(R),s=e(85893),$=function(o){var a=o.username;return(0,s.jsxs)("div",{style:{marginBottom:8},children:[(0,s.jsx)(f.C,{size:"small",src:"https://joeschmoe.io/api/v1/random"}),a]})},p=function(){var o=(0,M.tT)("@@initialState"),a=o.initialState,C=a==null?void 0:a.currentUser,J=h.Z.useForm(),K=(0,D.Z)(J,1),N=K[0],v=(0,r.useRef)(null),d=(0,M.tT)("useWebsocketModel"),l=d.ws,O=d.connect_websocket,z=d.onlineUser,S=d.messageList;(0,r.useEffect)(function(){if(!!C)return O(),function(){l==null||l.close()}},[C,O,l]),(0,r.useEffect)(function(){var t=v.current;t.scrollTop=t.scrollHeight},[S,v]);var V=function(m){if(m.message){l==null||l.send(JSON.stringify({action:"push_msg",user:1,data:m.message})),N.resetFields();return}W.ZP.info("\u53D1\u9001\u4FE1\u606F\u4E0D\u80FD\u4E3A\u7A7A\u{1F62B}")};return(0,s.jsx)(Y.ZP,{children:(0,s.jsx)(c.Z,{children:(0,s.jsxs)(g.Z,{gutter:10,children:[(0,s.jsx)(i.Z,{xxl:4,xl:4,children:(0,s.jsx)(c.Z,{bodyStyle:{height:600},size:"small",title:(0,s.jsx)(A.Z,{message:"\u5F53\u524D\u5728\u7EBF\u4EBA\u6570 ".concat(z.length),type:"success",showIcon:!0,banner:!0,style:{margin:0,padding:0}}),children:z.map(function(t){return(0,s.jsx)($,{username:t.username,id:t.id},t.id)})})}),(0,s.jsx)(i.Z,{xxl:20,xl:20,children:(0,s.jsxs)(c.Z,{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B,{}),(0,s.jsx)(s.Fragment,{children:" \u5373\u65F6\u6D88\u606F"})]}),bodyStyle:{padding:20,height:600,overflow:"hidden"},size:"small",children:[(0,s.jsx)("div",{className:n().mcon,children:(0,s.jsx)("div",{className:n().wechat,ref:v,children:S.map(function(t,m){return(0,s.jsxs)("div",{className:n().msglist,children:[(0,s.jsxs)("div",{className:n().header,children:[(0,s.jsx)("div",{children:(0,s.jsx)(f.C,{src:"https://joeschmoe.io/api/v1/random",alt:"Han Solo"})}),(0,s.jsxs)("span",{children:["User ",t.id]})]}),(0,s.jsxs)("div",{className:n().context,children:[(0,s.jsx)("div",{className:n().message,children:t.message}),(0,s.jsx)("div",{className:n().time,children:(0,s.jsx)(E.Z,{title:Z()().format("YYYY-MM-DD HH:mm:ss"),children:(0,s.jsx)("span",{children:Z()().fromNow()})})})]})]},m.toString())})})}),(0,s.jsx)(h.Z,{onFinish:V,form:N,children:(0,s.jsxs)(g.Z,{gutter:10,children:[(0,s.jsx)(i.Z,{xxl:20,xl:20,children:(0,s.jsx)(h.Z.Item,{name:"message",children:(0,s.jsx)(U.Z.TextArea,{placeholder:"hello",rows:3})})}),(0,s.jsx)(i.Z,{xxl:4,xl:4,children:(0,s.jsx)(T.Z,{style:{height:75},htmlType:"submit",size:"large",type:"primary",block:!0,children:"\u53D1\u9001"})})]})})]})})]})})})},G=p}}]);
