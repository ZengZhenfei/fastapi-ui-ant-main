(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[167],{63434:function(z,V,r){"use strict";var d=r(63185),F=r(9676),c=r(28991),G=r(81253),v=r(85893),_=r(22270),I=r(67294),u=r(64893),$=r(88927),f=["options","fieldProps","proFieldProps","valueEnum"],Z=I.forwardRef(function(p,g){var w=p.options,t=p.fieldProps,s=p.proFieldProps,y=p.valueEnum,e=(0,G.Z)(p,f);return(0,v.jsx)($.Z,(0,c.Z)({ref:g,valueType:"checkbox",valueEnum:(0,_.h)(y,void 0),fieldProps:(0,c.Z)({options:w},t),lightProps:(0,c.Z)({labelFormatter:function(){return(0,v.jsx)($.Z,(0,c.Z)({ref:g,valueType:"checkbox",mode:"read",valueEnum:(0,_.h)(y,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:w},t),proFieldProps:s},e))}},e.lightProps),proFieldProps:s},e))}),A=I.forwardRef(function(p,g){var w=p.fieldProps,t=p.children;return(0,v.jsx)(F.Z,(0,c.Z)((0,c.Z)({ref:g},w),{},{children:t}))}),l=(0,u.G)(A,{valuePropName:"checked"}),k=l;k.Group=Z,V.Z=k},97867:function(z,V,r){"use strict";r.r(V),r.d(V,{default:function(){return se}});var d=r(11849),F=r(62350),c=r(24565),G=r(57663),v=r(71577),_=r(94233),I=r(51890),u=r(39428),$=r(34792),f=r(48086),Z=r(3182),A=r(2824),l=r(67294),k=r(67265),p=r(11170),g=r(14695),w=r(49101),t=r(30381),s=r.n(t),y=r(37476),e=r(5966),Y=r(52688),Q=r(90672),a=r(85893),X=(0,l.memo)(function(i){var x=i.actionRef,B=i.visible,D=i.setvisible,O=function(){var W=(0,Z.Z)((0,u.Z)().mark(function M(T){var b;return(0,u.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return T.user_phone==""&&(T.user_phone=null),o.next=3,(0,g.RF)(T);case 3:b=o.sent,b.code===200?(D(!1),x==null||x.reload(),f.ZP.success(b.message)):f.ZP.info(b.message);case 5:case"end":return o.stop()}},M)}));return function(T){return W.apply(this,arguments)}}();return(0,a.jsxs)(y.Y,{title:"\u6DFB\u52A0\u7528\u6237",visible:B,width:500,submitter:{searchConfig:{submitText:"\u521B\u5EFA"}},onFinish:O,modalProps:{destroyOnClose:!0,mask:!0,onCancel:function(){return D(!1)}},children:[(0,a.jsx)(e.Z,{name:"username",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"},{min:3,message:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!"},{max:15,message:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!"}]}),(0,a.jsx)(e.Z.Password,{name:"password",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"},{min:6,message:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D"},{max:12,message:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D"}]}),(0,a.jsx)(e.Z,{name:"user_phone",placeholder:"\u624B\u673A\u53F7",label:"\u624B\u673A\u53F7",rules:[{pattern:/^1[3456789][0-9]{9}$/,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]}),(0,a.jsx)(Y.Z,{label:"\u7528\u6237\u72B6\u6001",tooltip:"\u9ED8\u8BA4\u7981\u7528",name:"user_status",initialValue:!1}),(0,a.jsx)(Q.Z,{label:"\u5907\u6CE8",name:"remarks",fieldProps:{maxLength:30,showCount:!0},rules:[{max:30,message:"\u5907\u6CE8\u957F\u5EA6\u8F93\u516530\u4E2A\u5B57\u7B26\u4EE5\u5185"}]})]})}),H=r(71975),J=(0,l.memo)(function(i){var x=i.actionRef,B=i.visible,D=i.setvisible,O=i.UserData,W=(0,l.useRef)(),M=function(){var T=(0,Z.Z)((0,u.Z)().mark(function b(P){var o;return(0,u.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!O){m.next=9;break}return console.log(P),P.user_phone==""&&(P.user_phone=null),P.password==""&&(P.password=null),P.id=O.id,m.next=7,(0,g.pf)(P);case 7:o=m.sent,o.code===200?(x==null||x.reload(),D(!1),f.ZP.success(o.message)):f.ZP.info(o.message);case 9:case"end":return m.stop()}},b)}));return function(P){return T.apply(this,arguments)}}();return(0,a.jsxs)(H.a,{title:"\u7F16\u8F91\u7528\u6237",visible:B,formRef:W,width:500,submitter:{searchConfig:{submitText:"\u4FDD\u5B58"}},initialValues:O,onFinish:M,drawerProps:{destroyOnClose:!0,mask:!0,onClose:function(){return D(!1)}},children:[(0,a.jsx)(e.Z,{label:"\u7528\u6237\u540D",name:"username",placeholder:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"},{min:3,message:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!"},{max:15,message:"\u7528\u6237\u540D3-10\u4E2A\u5B57\u7B26!"}]}),(0,a.jsx)(e.Z.Password,{label:"\u5BC6\u7801",name:"password",placeholder:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D",rules:[{min:6,message:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D"},{max:12,message:"\u5BC6\u7801\u957F\u5EA66-12\u4F4D"}]}),(0,a.jsx)(e.Z,{name:"user_phone",placeholder:"\u624B\u673A\u53F7",label:"\u624B\u673A\u53F7",rules:[{pattern:/^1[3456789][0-9]{9}$/,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]}),(0,a.jsx)(Y.Z,{label:"\u7528\u6237\u72B6\u6001",tooltip:"\u9ED8\u8BA4\u7981\u7528",name:"user_status"}),(0,a.jsx)(Q.Z,{name:"remarks",label:"\u5907\u6CE8",fieldProps:{maxLength:30,showCount:!0},rules:[{max:30,message:"\u5907\u6CE8\u957F\u5EA6\u8F93\u516530\u4E2A\u5B57\u7B26\u4EE5\u5185"}]})]})}),q=r(63434),ee=r(82537),re=(0,l.memo)(function(i){var x=i.visible,B=i.setvisible,D=i.UserData,O=(0,l.useRef)(),W=(0,l.useState)(!0),M=(0,A.Z)(W,2),T=M[0],b=M[1],P=function(){var o=(0,Z.Z)((0,u.Z)().mark(function U(m){var K;return(0,u.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return m.user_id=D.id,S.next=3,(0,g.QX)(m);case 3:K=S.sent,K.code==200?(f.ZP.success(K.message),B(!1)):f.ZP.info(K.message);case 5:case"end":return S.stop()}},U)}));return function(m){return o.apply(this,arguments)}}();return(0,a.jsx)(a.Fragment,{children:D&&(0,a.jsx)(y.Y,{title:"\u89D2\u8272\u5206\u914D",visible:x,formRef:O,width:400,submitter:{searchConfig:{submitText:"\u8BBE\u7F6E"},submitButtonProps:{disabled:T}},onFinish:P,modalProps:{destroyOnClose:!0,mask:!0,onCancel:function(){return B(!1)}},children:(0,a.jsx)(q.Z.Group,{name:"roles",layout:"vertical",request:(0,Z.Z)((0,u.Z)().mark(function o(){var U,m;return(0,u.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,ee.yp)({user_id:D.id});case 2:if(U=E.sent,U.code!=200){E.next=7;break}return(m=O.current)===null||m===void 0||m.setFieldsValue({roles:U.data.user_roles}),U.data.all_role.length&&b(!1),E.abrupt("return",U.data.all_role);case 7:return E.abrupt("return",[]);case 8:case"end":return E.stop()}},o)}))})})})}),se=(0,l.memo)(function(){var i=(0,l.useRef)(),x=(0,l.useState)(!1),B=(0,A.Z)(x,2),D=B[0],O=B[1],W=(0,l.useState)(!1),M=(0,A.Z)(W,2),T=M[0],b=M[1],P=(0,l.useState)(!1),o=(0,A.Z)(P,2),U=o[0],m=o[1],K=(0,l.useState)(),E=(0,A.Z)(K,2),S=E[0],N=E[1],ae=function(){var L=(0,Z.Z)((0,u.Z)().mark(function R(n){var h,C;return(0,u.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,g.DZ)({user_id:n.id});case 2:h=j.sent,h.code===200?((C=i.current)===null||C===void 0||C.reload(),f.ZP.success(h.message)):f.ZP.info(h.message);case 4:case"end":return j.stop()}},R)}));return function(n){return L.apply(this,arguments)}}(),te=function(){var L=(0,Z.Z)((0,u.Z)().mark(function R(n){var h,C;return(0,u.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return n.user_status=!n.user_status,j.next=3,(0,g.pf)(n);case 3:h=j.sent,h.code===200?((C=i.current)===null||C===void 0||C.reload(),f.ZP.success(h.message)):f.ZP.info(h.message);case 5:case"end":return j.stop()}},R)}));return function(n){return L.apply(this,arguments)}}(),ne=[{title:"\u5934\u50CF",dataIndex:"header_img",search:!1,width:60,render:function(R,n){return(0,a.jsx)(I.C,{src:n.header_img})}},{title:"\u7528\u6237\u540D",dataIndex:"username",valueType:"text"},{title:"\u624B\u673A\u53F7",dataIndex:"user_phone",valueType:"text",copyable:!0},{title:"\u90AE\u7BB1",dataIndex:"user_email",valueType:"text",search:!1},{title:"\u5907\u6CE8",dataIndex:"remarks",valueType:"text",search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time",valueType:"dateTime",width:150,search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time",valueType:"dateTimeRange",fieldProps:{ranges:{\u4ECA\u5929:[s()().startOf("day"),s()().endOf("day")],\u6628\u5929:[s()().subtract(1,"days").startOf("day"),s()().subtract(1,"days").endOf("day")],"3\u5929\u5185":[s()().subtract(2,"days").startOf("day"),s()().endOf("day")],"7\u5929\u5185":[s()().subtract(6,"days").startOf("day"),s()().endOf("day")],\u672C\u5468:[s()().subtract("weeks").startOf("week"),s()().endOf("week")],\u672C\u6708:[s()().subtract("months").startOf("month"),s()().endOf("month")],\u4E0A\u6708:[s()().subtract(1,"months").startOf("month"),s()().subtract(1,"months").endOf("month")]},showTime:{defaultValue:[s()("00:00:00","hh:mm:ss"),s()("23:59:59","hh:mm:ss")]}},hideInTable:!0},{title:"\u72B6\u6001",dataIndex:"user_status",width:100,valueEnum:{false:{text:"\u5DF2\u7981\u7528",status:"Error"},true:{text:"\u5DF2\u542F\u7528",status:"Success"}}},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(R,n){return[(0,a.jsx)(v.Z,{type:n.user_status?"dashed":"primary",danger:n.user_status,onClick:function(){return te(n)},children:n.user_status?"\u7981\u7528":"\u542F\u7528"},"disable"),(0,a.jsx)(v.Z,{type:"dashed",onClick:function(){N(n),m(!0)},children:"\u89D2\u8272"},"setrole"),(0,a.jsx)(v.Z,{ghost:!0,type:"primary",onClick:function(){N(n),b(!0)},children:"\u7F16\u8F91"},"edit"),(0,a.jsx)(c.Z,{title:"\u{1F62B}\u5220\u9664\u4E0D\u53EF\u9006\uFF0C\u8C28\u614E\u64CD\u4F5C\uFF01",onConfirm:function(){return ae(n)},placement:"leftTop",children:(0,a.jsx)(v.Z,{danger:!0,children:"\u5220\u9664"})},"delete")]}}];return(0,a.jsxs)(k.ZP,{children:[(0,a.jsx)(p.ZP,{headerTitle:"\u6240\u6709\u7528\u6237",rowKey:"key",actionRef:i,columns:ne,size:"small",cardProps:{bodyStyle:{paddingBottom:0,paddingTop:0}},pagination:{pageSize:10},locale:{emptyText:"\u672A\u521B\u5EFA\u7528\u6237"},request:function(){var L=(0,Z.Z)((0,u.Z)().mark(function R(n){return(0,u.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,g.Lh)((0,d.Z)({},n)));case 1:case"end":return C.stop()}},R)}));return function(R){return L.apply(this,arguments)}}(),toolBarRender:function(){return[(0,a.jsxs)(v.Z,{type:"primary",onClick:function(){return O(!0)},children:[(0,a.jsx)(w.Z,{}),"\u521B\u5EFA\u7528\u6237"]},"add_user")]}}),(0,a.jsx)(X,{visible:D,setvisible:O,actionRef:i.current}),S&&(0,a.jsx)(J,{visible:T,setvisible:b,actionRef:i.current,UserData:S}),S&&(0,a.jsx)(re,{visible:U,setvisible:m,UserData:S})]})})},82537:function(z,V,r){"use strict";r.d(V,{yp:function(){return G},Uy:function(){return _},cs:function(){return u},vh:function(){return f},Fe:function(){return A},O:function(){return k},MQ:function(){return g}});var d=r(39428),F=r(3182),c=r(25377);function G(t){return v.apply(this,arguments)}function v(){return v=(0,F.Z)((0,d.Z)().mark(function t(s){return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.WY)("/api/v1/admin/role/all",{method:"GET",params:s}));case 1:case"end":return e.stop()}},t)})),v.apply(this,arguments)}function _(t){return I.apply(this,arguments)}function I(){return I=(0,F.Z)((0,d.Z)().mark(function t(s){return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.WY)("/api/v1/admin/role",{method:"GET",params:s}));case 1:case"end":return e.stop()}},t)})),I.apply(this,arguments)}function u(t){return $.apply(this,arguments)}function $(){return $=(0,F.Z)((0,d.Z)().mark(function t(s){return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.WY)("/api/v1/admin/role",{method:"POST",data:s}));case 1:case"end":return e.stop()}},t)})),$.apply(this,arguments)}function f(t){return Z.apply(this,arguments)}function Z(){return Z=(0,F.Z)((0,d.Z)().mark(function t(s){return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.WY)("/api/v1/admin/role",{method:"PUT",data:s}));case 1:case"end":return e.stop()}},t)})),Z.apply(this,arguments)}function A(t){return l.apply(this,arguments)}function l(){return l=(0,F.Z)((0,d.Z)().mark(function t(s){return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.WY)("/api/v1/admin/role",{method:"DELETE",params:s}));case 1:case"end":return e.stop()}},t)})),l.apply(this,arguments)}function k(t){return p.apply(this,arguments)}function p(){return p=(0,F.Z)((0,d.Z)().mark(function t(s){return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.WY)("/api/v1/admin/access",{method:"GET",params:s}));case 1:case"end":return e.stop()}},t)})),p.apply(this,arguments)}function g(t){return w.apply(this,arguments)}function w(){return w=(0,F.Z)((0,d.Z)().mark(function t(s){return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.WY)("/api/v1/admin/access",{method:"PUT",data:s}));case 1:case"end":return e.stop()}},t)})),w.apply(this,arguments)}}}]);
