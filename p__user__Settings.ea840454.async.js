(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[77],{53613:function(D){D.exports={baseView:"baseView___1GZs-",left:"left___39xqT",right:"right___dtqIH",avatar_title:"avatar_title___3rLvD",avatar:"avatar___3jLq7",button_view:"button_view___1q4SD",area_code:"area_code___3VRto",phone_number:"phone_number___1nmJv"}},52203:function(D){D.exports={bind_modal:"bind_modal___2SB4a",qrcode:"qrcode___2yvka",bind_info:"bind_info___2T2QG"}},97239:function(D){D.exports={container:"container___DVTqq"}},36042:function(D){D.exports={main:"main___w8UEq",leftMenu:"leftMenu___2uWV6",right:"right___1tiwY",title:"title___2KV_p"}},66845:function(D,Q,t){"use strict";t.r(Q),t.d(Q,{default:function(){return Ee}});var be=t(30887),Y=t(28682),$=t(2824),Ne=t(43185),X=t(94412),Ue=t(57663),q=t(71577),De=t(94233),_=t(51890),o=t(39428),x=t(11849),Me=t(34792),c=t(48086),I=t(3182),Te=t(34669),K=t(54458),ze=t(74379),W=t(38648),O=t(14695),ee=t(54941),te=t(69610),ne=t(65754),ae=t.n(ne),re=(0,ee.Z)(function C(m,p,l){var n=this;(0,te.Z)(this,C),this.file=void 0,this.FederationConfig=void 0,this.client=void 0,this.success=void 0,this.progress=void 0,this.file_path="",this.getFederationTokenData=(0,I.Z)((0,o.Z)().mark(function u(){var s;return(0,o.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,O.Vq)({file_type:n.file.name.split(".")[1]});case 2:if(s=d.sent,s.code!=200){d.next=6;break}return n.FederationConfig=s.data,d.abrupt("return",n.cos_client());case 6:c.ZP.error(s.message);case 7:case"end":return d.stop()}},u)})),this.cos_client=function(){if(n.FederationConfig)return n.client=new(ae())({getAuthorization:function(s,A){A(n.FederationConfig)}}),n.cosPutObject();c.ZP.error("\u914D\u7F6E\u53C2\u6570\u65E0\u6548")},this.cosPutObject=function(){n.FederationConfig&&n.client&&n.file&&n.client.putObject((0,x.Z)((0,x.Z)({},n.FederationConfig),{},{Body:n.file,onProgress:function(s){n.progress(s.percent),console.log(JSON.stringify(s))}}),function(u,s){if(u){c.ZP.error(u.message);return}return n.file_path="http://"+s.Location,n.cosRecognition()})},this.cosRecognition=function(){n.FederationConfig&&n.client&&n.client.request((0,x.Z)((0,x.Z)({},n.FederationConfig),{},{Method:"GET",Query:{"ci-process":"sensitive-content-recognition"}}),function(u,s){if(s){if(s.RecognitionResult.Label!=="Normal")return n.cosDeleteObject();n.success(n.file_path)}})},this.cosDeleteObject=function(){c.ZP.error("\u8BF7\u52FF\u4E0A\u4F20\u654F\u611F\u56FE\u7247\uFF01"),n.client&&n.FederationConfig&&n.client.deleteObject((0,x.Z)({},n.FederationConfig),function(u,s){console.log(u||s),s&&c.ZP.info("\u6587\u4EF6\u5DF2\u88AB\u5220\u9664!")})},this.file=m,this.success=p,this.progress=l}),se=re,ie=t(18613),le=t(15873),ue=t(84391),oe=t(952),L=t(5966),ce=t(90672),y=t(67294),w=t(25377),de=t(53613),k=t.n(de),e=t(85893),fe=(0,y.memo)(function(){var C=(0,w.tT)("@@initialState"),m=C.initialState,p=C.setInitialState,l=m,n=l.currentUser,u=function(g){W.Z.open({message:"\u5934\u50CF\u4E0A\u4F20",description:(0,e.jsx)(K.Z,{size:"small",percent:~~(g*100)}),icon:(0,e.jsx)(ie.Z,{style:{color:"#108ee9"}}),duration:0,key:"upload_headimg"})},s={action:"/api/v1/admin/user/avatar/upload",name:"avatar",method:"PUT",maxCount:1,accept:"image/png, image/jpeg",headers:{Authorization:"Bearer ".concat(localStorage.getItem("Authorization")||"")},beforeUpload:function(){var E=(0,I.Z)((0,o.Z)().mark(function F(B){var M,h;return(0,o.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(M="'image/png', 'image/jpeg'",M.indexOf(B.type)){f.next=4;break}return c.ZP.info("\u652F\u6301\u6587\u4EF6\u7C7B\u578Bpng\u3001jpg"),f.abrupt("return",!1);case 4:if(!(B.size>1*1048576)){f.next=7;break}return c.ZP.info("\u6587\u4EF6\u5927\u5C0F1MB\u4EE5\u5185!"),f.abrupt("return",!1);case 7:return h=new se(B,function(){var r=(0,I.Z)((0,o.Z)().mark(function Z(v){var T,a;return(0,o.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("url",v),T=n,T.header_img=v,i.next=5,(0,O.SQ)({header_img:v});case 5:if(a=i.sent,a.code!=200){i.next=10;break}return p((0,x.Z)((0,x.Z)({},m),{},{currentUser:T})),c.ZP.success(a.message),i.abrupt("return");case 10:c.ZP.info(a.message);case 11:case"end":return i.stop()}},Z)}));return function(Z){return r.apply(this,arguments)}}(),function(r){u(r),r==1&&W.Z.open({key:"upload_headimg",message:"\u5934\u50CF\u4E0A\u4F20",description:(0,e.jsx)(K.Z,{size:"small",percent:100,status:"success"}),icon:(0,e.jsx)(le.Z,{style:{color:"#52c14A"}}),duration:3}),console.log("percent",r)}),h.getFederationTokenData(),f.abrupt("return",!1);case 10:case"end":return f.stop()}},F)}));function g(F){return E.apply(this,arguments)}return g}(),onChange:function(g){if(g.file.status=="done"){var F=n;F.header_img=g.file.response.data.url,p((0,x.Z)((0,x.Z)({},m),{},{currentUser:F})),c.ZP.success(g.file.response.message)}}},A=function(g){var F=g.avatar;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:k().avatar_title,children:"\u5934\u50CF"}),(0,e.jsx)(_.C,{className:k().avatar,src:F}),(0,e.jsx)(X.Z,(0,x.Z)((0,x.Z)({showUploadList:!1},s),{},{children:(0,e.jsx)("div",{className:k().button_view,children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(ue.Z,{}),"\u66F4\u6362\u5934\u50CF"]})})})),(0,e.jsx)("span",{children:"\u63A8\u8350\u5C3A\u5BF8120pxX120px 1MB < \u6587\u4EF6\u5927\u5C0F \u652F\u6301jpeg/png/jpg"})]})},d=function(){var E=(0,I.Z)((0,o.Z)().mark(function g(F){var B;return(0,o.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,O.SQ)(F);case 2:if(B=h.sent,B.code!=200){h.next=6;break}return c.ZP.success(B.message),h.abrupt("return");case 6:c.ZP.info(B.message);case 7:case"end":return h.stop()}},g)}));return function(F){return E.apply(this,arguments)}}();return(0,e.jsx)("div",{className:k().baseView,children:n?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:k().left,children:(0,e.jsxs)(oe.ZP,{layout:"vertical",onFinish:d,submitter:{resetButtonProps:{style:{display:"none"}},submitButtonProps:{children:"\u66F4\u65B0\u57FA\u672C\u4FE1\u606F"}},initialValues:{user_email:n.user_email,nickname:n.nickname},hideRequiredMark:!0,children:[(0,e.jsx)(L.Z,{width:"md",name:"user_email",label:"\u90AE\u7BB1"}),(0,e.jsx)(L.Z,{width:"md",name:"nickname",label:"\u6635\u79F0"}),(0,e.jsx)(ce.Z,{label:"\u4E2A\u4EBA\u7B80\u4ECB",placeholder:"\u4E2A\u4EBA\u7B80\u4ECB"})]})}),(0,e.jsx)("div",{className:k().right,children:(0,e.jsx)(A,{avatar:n.header_img})})]}):null})}),Oe=t(71194),ve=t(50146),$e=t(54421),b=t(38272),H=t(14294),me=t(94506),he=t(73566),pe=t(84059),ge=t(52203),G=t.n(ge),Ze=(0,y.memo)(function(){var C=(0,y.useState)(!1),m=(0,$.Z)(C,2),p=m[0],l=m[1],n=(0,y.useState)(""),u=(0,$.Z)(n,2),s=u[0],A=u[1],d=(0,y.useRef)(),E=(0,y.useState)(0),g=(0,$.Z)(E,2),F=g[0],B=g[1],M=(0,w.tT)("@@initialState"),h=M.initialState,V=M.setInitialState,f=h,r=f.currentUser,Z=function(){var P=(0,I.Z)((0,o.Z)().mark(function i(){var j,N;return(0,o.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,h==null||(j=h.fetchUserInfo)===null||j===void 0?void 0:j.call(h);case 2:if(N=z.sent,!N){z.next=6;break}return z.next=6,V(function(U){return(0,x.Z)((0,x.Z)({},U),{},{currentUser:N})});case 6:case"end":return z.stop()}},i)}));return function(){return P.apply(this,arguments)}}(),v=function(){var P=(0,I.Z)((0,o.Z)().mark(function i(){var j;return(0,o.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,O.WC)();case 2:if(j=S.sent,j.code!=200){S.next=10;break}return S.next=6,Z();case 6:return clearInterval(d.current),c.ZP.success(j.message),l(!1),S.abrupt("return");case 10:if(j.code==-1){S.next=15;break}return clearInterval(d.current),c.ZP.info(j.message,5),l(!1),S.abrupt("return");case 15:case"end":return S.stop()}},i)}));return function(){return P.apply(this,arguments)}}(),T=function(){var P=(0,I.Z)((0,o.Z)().mark(function i(){var j,N,S;return(0,o.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,O.Ty)();case 2:if(j=U.sent,j.code!=200){U.next=10;break}return l(!0),A(j.data.authorize_url),N=0,S=setInterval(function(){if(N>j.data.expire){clearInterval(d.current),l(!1),c.ZP.info("\u4E8C\u7EF4\u7801\u5DF2\u8FC7\u671F!");return}B(j.data.expire-N),N++,v()},1e3),d.current=S,U.abrupt("return");case 10:c.ZP.info(j.message);case 11:case"end":return U.stop()}},i)}));return function(){return P.apply(this,arguments)}}();(0,y.useEffect)(function(){return function(){clearInterval(d.current)}},[]);var a=function(){return[{title:"\u7ED1\u5B9A\u5FAE\u4FE1",description:r!=null&&r.nickname?r.nickname:"\u5F53\u524D\u672A\u7ED1\u5FAE\u4FE1\u8D26\u53F7",actions:[(0,e.jsx)("a",{onClick:function(){return T()},children:(r==null?void 0:r.nickname)=="binkuolo"?"\u7ED1\u5B9A":"\u6362\u7ED1"},"Bind")],avatar:(0,e.jsx)(H.Z,{style:{fontSize:48,color:"#07c160"},className:"wechat"})},{title:"\u7ED1\u5B9A\u652F\u4ED8\u5B9D",description:"\u5F53\u524D\u672A\u7ED1\u5B9A\u652F\u4ED8\u5B9D\u8D26\u53F7",actions:[(0,e.jsx)("a",{children:"\u7ED1\u5B9A"},"Bind")],avatar:(0,e.jsx)(me.Z,{className:"alipay"})},{title:"\u7ED1\u5B9A\u9489\u9489",description:"\u5F53\u524D\u672A\u7ED1\u5B9A\u9489\u9489\u8D26\u53F7",actions:[(0,e.jsx)("a",{children:"\u7ED1\u5B9A"},"Bind")],avatar:(0,e.jsx)(he.Z,{className:"dingding"})}]};return(0,e.jsxs)(y.Fragment,{children:[(0,e.jsx)(b.ZP,{itemLayout:"horizontal",dataSource:a(),renderItem:function(i){return(0,e.jsx)(b.ZP.Item,{actions:i.actions,children:(0,e.jsx)(b.ZP.Item.Meta,{avatar:i.avatar,title:i.title,description:i.description})})}}),(0,e.jsx)(ve.Z,{title:"\u5FAE\u4FE1\u7ED1\u5B9A",visible:p,onCancel:function(){l(!1),clearInterval(d.current)},maskClosable:!1,footer:!1,width:300,destroyOnClose:!0,children:(0,e.jsxs)("div",{className:G().bind_modal,children:[(0,e.jsx)("div",{className:G().qrcode,children:s&&(0,e.jsx)(pe.ZP,{value:s,size:200,level:"L"})},"qrcode"),(0,e.jsxs)("div",{className:G().bind_info,children:[" ",(0,e.jsx)(H.Z,{style:{fontSize:18,color:"#07c160",marginRight:10}})," ","\u6253\u5F00\u5FAE\u4FE1\u626B\u4E00\u626B ",F," \u79D2"]},"info")]})})]})}),ke=t(77576),je=t(12028),xe=(0,y.memo)(function(){var C=function(){var l=(0,e.jsx)(je.Z,{checkedChildren:"\u5F00",unCheckedChildren:"\u5173",defaultChecked:!0});return[{title:"\u8D26\u6237\u5BC6\u7801",description:"\u5176\u4ED6\u7528\u6237\u7684\u6D88\u606F\u5C06\u4EE5\u7AD9\u5185\u4FE1\u7684\u5F62\u5F0F\u901A\u77E5",actions:[l]},{title:"\u7CFB\u7EDF\u6D88\u606F",description:"\u7CFB\u7EDF\u6D88\u606F\u5C06\u4EE5\u7AD9\u5185\u4FE1\u7684\u5F62\u5F0F\u901A\u77E5",actions:[l]},{title:"\u5F85\u529E\u4EFB\u52A1",description:"\u5F85\u529E\u4EFB\u52A1\u5C06\u4EE5\u7AD9\u5185\u4FE1\u7684\u5F62\u5F0F\u901A\u77E5",actions:[l]}]},m=C();return(0,e.jsx)(y.Fragment,{children:(0,e.jsx)(b.ZP,{itemLayout:"horizontal",dataSource:m,renderItem:function(l){return(0,e.jsx)(b.ZP.Item,{actions:l.actions,children:(0,e.jsx)(b.ZP.Item.Meta,{title:l.title,description:l.description})})}})})}),ye=t(29985),Fe=t(2603),Se=t(37476),Ce=t(16434),Be=t(97239),J=t.n(Be),Pe={strong:(0,e.jsx)("span",{className:"strong",children:"\u5F3A"}),medium:(0,e.jsx)("span",{className:"medium",children:"\u4E2D"}),weak:(0,e.jsx)("span",{className:"weak",children:"\u5F31 Weak"})},Ie=(0,y.memo)(function(){var C=(0,w.tT)("@@initialState"),m=C.initialState,p=C.setInitialState,l=m,n=l.currentUser,u=(0,y.useState)(!1),s=(0,$.Z)(u,2),A=s[0],d=s[1],E=(0,y.useState)(600),g=(0,$.Z)(E,1),F=g[0],B=function(){var f=(0,I.Z)((0,o.Z)().mark(function r(){var Z,v;return(0,o.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m==null||(Z=m.fetchUserInfo)===null||Z===void 0?void 0:Z.call(m);case 2:if(v=a.sent,!v){a.next=6;break}return a.next=6,p(function(P){return(0,x.Z)((0,x.Z)({},P),{},{currentUser:v})});case 6:case"end":return a.stop()}},r)}));return function(){return f.apply(this,arguments)}}(),M=function(){var f=(0,I.Z)((0,o.Z)().mark(function r(Z){var v;return(0,o.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(Z),a.next=3,(0,O.pQ)(Z);case 3:if(v=a.sent,v.code!=200){a.next=10;break}return d(!1),a.next=8,B();case 8:return c.ZP.success(v.message),a.abrupt("return");case 10:c.ZP.info(v.message);case 11:case"end":return a.stop()}},r)}));return function(Z){return f.apply(this,arguments)}}(),h=function(){return[{title:"\u8D26\u6237\u5BC6\u7801",description:(0,e.jsxs)(e.Fragment,{children:["\u5F53\u524D\u5BC6\u7801\u5F3A\u5EA6\uFF1A",Pe.strong]}),actions:[(0,e.jsx)("a",{children:"\u4FEE\u6539"},"Modify")]},{title:"\u5B89\u5168\u624B\u673A",description:n!=null&&n.user_phone?"\u5DF2\u7ED1\u5B9A\u624B\u673A\uFF1A".concat(n.user_phone):"\u672A\u7ED1\u5B9A\u5B89\u5168\u624B\u673A",actions:[(0,e.jsx)("a",{onClick:function(){return d(!0)},children:n!=null&&n.user_phone?"\u4FEE\u6539":"\u7ED1\u5B9A"},"Modify")]},{title:"\u5BC6\u4FDD\u95EE\u9898",description:"\u672A\u8BBE\u7F6E\u5BC6\u4FDD\u95EE\u9898\uFF0C\u5BC6\u4FDD\u95EE\u9898\u53EF\u6709\u6548\u4FDD\u62A4\u8D26\u6237\u5B89\u5168",actions:[(0,e.jsx)("a",{children:"\u8BBE\u7F6E"},"Set")]},{title:"\u5907\u7528\u90AE\u7BB1",description:"\u5DF2\u7ED1\u5B9A\u90AE\u7BB1\uFF1Aant***sign.com",actions:[(0,e.jsx)("a",{children:"\u4FEE\u6539"},"Modify")]},{title:"MFA \u8BBE\u5907",description:"\u672A\u7ED1\u5B9A MFA \u8BBE\u5907\uFF0C\u7ED1\u5B9A\u540E\uFF0C\u53EF\u4EE5\u8FDB\u884C\u4E8C\u6B21\u786E\u8BA4",actions:[(0,e.jsx)("a",{children:"\u7ED1\u5B9A"},"bind")]}]},V=h();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b.ZP,{itemLayout:"horizontal",dataSource:V,renderItem:function(r){return(0,e.jsx)(b.ZP.Item,{actions:r.actions,children:(0,e.jsx)(b.ZP.Item.Meta,{title:r.title,description:r.description})})}}),(0,e.jsxs)(Se.Y,{title:"".concat(n!=null&&n.user_phone?"\u4FEE\u6539":"\u7ED1\u5B9A","\u624B\u673A\u53F7"),visible:A,size:"small",width:400,onFinish:M,modalProps:{okText:"\u63D0\u4EA4",onCancel:function(){return d(!1)}},children:[(0,e.jsx)(L.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(ye.Z,{className:J().prefixIcon})},name:"mobile",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(Ce.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Fe.Z,{className:J().prefixIcon})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(r,Z){return r?"".concat(Z," \u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",phoneName:"mobile",countDown:F,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"},{len:6,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var f=(0,I.Z)((0,o.Z)().mark(function r(Z){var v;return(0,o.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,O.ff)({phone_number:Z});case 2:if(v=a.sent,v.code===200){a.next=6;break}throw c.ZP.info(v.message),new Error(v.message);case 6:c.ZP.success(v.message);case 7:case"end":return a.stop()}},r)}));return function(r){return f.apply(this,arguments)}}()})]})]})}),Ae=t(36042),R=t.n(Ae),Ee=(0,y.memo)(function(){var C=(0,y.useState)("base"),m=(0,$.Z)(C,2),p=m[0],l=m[1],n=[{label:"\u57FA\u672C\u8BBE\u7F6E",key:"base"},{label:"\u5B89\u5168\u8BBE\u7F6E",key:"security"},{label:"\u8D26\u53F7\u7ED1\u5B9A",key:"binding"},{label:"\u65B0\u6D88\u606F\u901A\u77E5",key:"notification"}];return(0,e.jsxs)("div",{className:R().main,children:[(0,e.jsx)("div",{className:R().leftMenu,children:(0,e.jsx)(Y.Z,{mode:"inline",selectedKeys:[p],onClick:function(s){var A=s.key;l(A)},items:n})}),(0,e.jsxs)("div",{className:R().right,children:[(0,e.jsx)("div",{className:R().title,children:n.filter(function(u){return u.key==p}).map(function(u){return u.label})}),p=="base"&&(0,e.jsx)(fe,{}),p=="security"&&(0,e.jsx)(Ie,{}),p=="binding"&&(0,e.jsx)(Ze,{}),p=="notification"&&(0,e.jsx)(xe,{})]})]})})}}]);
