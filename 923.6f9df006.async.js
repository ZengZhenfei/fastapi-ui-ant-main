(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[923],{94506:function(g,S,r){"use strict";r.d(S,{Z:function(){return L}});var l=r(28991),t=r(67294),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M789 610.3c-38.7-12.9-90.7-32.7-148.5-53.6 34.8-60.3 62.5-129 80.7-203.6H530.5v-68.6h233.6v-38.3H530.5V132h-95.4c-16.7 0-16.7 16.5-16.7 16.5v97.8H182.2v38.3h236.3v68.6H223.4v38.3h378.4a667.18 667.18 0 01-54.5 132.9c-122.8-40.4-253.8-73.2-336.1-53-52.6 13-86.5 36.1-106.5 60.3-91.4 111-25.9 279.6 167.2 279.6C386 811.2 496 747.6 581.2 643 708.3 704 960 808.7 960 808.7V659.4s-31.6-2.5-171-49.1zM253.9 746.6c-150.5 0-195-118.3-120.6-183.1 24.8-21.9 70.2-32.6 94.4-35 89.4-8.8 172.2 25.2 269.9 72.8-68.8 89.5-156.3 145.3-243.7 145.3z"}}]},name:"alipay",theme:"outlined"},w=V,j=r(27029),ae=function(q,W){return t.createElement(j.Z,(0,l.Z)((0,l.Z)({},q),{},{ref:W,icon:w}))};ae.displayName="AlipayOutlined";var L=t.forwardRef(ae)},73566:function(g,S,r){"use strict";r.d(S,{Z:function(){return L}});var l=r(28991),t=r(67294),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M573.7 252.5C422.5 197.4 201.3 96.7 201.3 96.7c-15.7-4.1-17.9 11.1-17.9 11.1-5 61.1 33.6 160.5 53.6 182.8 19.9 22.3 319.1 113.7 319.1 113.7S326 357.9 270.5 341.9c-55.6-16-37.9 17.8-37.9 17.8 11.4 61.7 64.9 131.8 107.2 138.4 42.2 6.6 220.1 4 220.1 4s-35.5 4.1-93.2 11.9c-42.7 5.8-97 12.5-111.1 17.8-33.1 12.5 24 62.6 24 62.6 84.7 76.8 129.7 50.5 129.7 50.5 33.3-10.7 61.4-18.5 85.2-24.2L565 743.1h84.6L603 928l205.3-271.9H700.8l22.3-38.7c.3.5.4.8.4.8S799.8 496.1 829 433.8l.6-1h-.1c5-10.8 8.6-19.7 10-25.8 17-71.3-114.5-99.4-265.8-154.5z"}}]},name:"dingding",theme:"outlined"},w=V,j=r(27029),ae=function(q,W){return t.createElement(j.Z,(0,l.Z)((0,l.Z)({},q),{},{ref:W,icon:w}))};ae.displayName="DingdingOutlined";var L=t.forwardRef(ae)},84391:function(g,S,r){"use strict";r.d(S,{Z:function(){return L}});var l=r(28991),t=r(67294),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},w=V,j=r(27029),ae=function(q,W){return t.createElement(j.Z,(0,l.Z)((0,l.Z)({},q),{},{ref:W,icon:w}))};ae.displayName="UploadOutlined";var L=t.forwardRef(ae)},63252:function(){},94412:function(g,S,r){"use strict";r.d(S,{Z:function(){return T}});var l=r(22122),t=r(67294),V=r(96156),w=r(55507),j=r(90484),ae=r(85061),L=r(28481),I=r(94184),q=r.n(I),W=r(6610),te=r(5991),K=r(10379),$=r(44144),le=r(81253),X=r(92137),Ne=r(64217);function F(E,R){var O="cannot ".concat(E.method," ").concat(E.action," ").concat(R.status,"'"),A=new Error(O);return A.status=R.status,A.method=E.method,A.url=E.action,A}function b(E){var R=E.responseText||E.response;if(!R)return R;try{return JSON.parse(R)}catch(O){return R}}function m(E){var R=new XMLHttpRequest;E.onProgress&&R.upload&&(R.upload.onprogress=function(J){J.total>0&&(J.percent=J.loaded/J.total*100),E.onProgress(J)});var O=new FormData;E.data&&Object.keys(E.data).forEach(function(z){var J=E.data[z];if(Array.isArray(J)){J.forEach(function(Ie){O.append("".concat(z,"[]"),Ie)});return}O.append(z,J)}),E.file instanceof Blob?O.append(E.filename,E.file,E.file.name):O.append(E.filename,E.file),R.onerror=function(J){E.onError(J)},R.onload=function(){return R.status<200||R.status>=300?E.onError(F(E,R),b(R)):E.onSuccess(b(R),R)},R.open(E.method,E.action,!0),E.withCredentials&&"withCredentials"in R&&(R.withCredentials=!0);var A=E.headers||{};return A["X-Requested-With"]!==null&&R.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(A).forEach(function(z){A[z]!==null&&R.setRequestHeader(z,A[z])}),R.send(O),{abort:function(){R.abort()}}}var D=+new Date,f=0;function G(){return"rc-upload-".concat(D,"-").concat(++f)}var _=r(80334),Z=function(E,R){if(E&&R){var O=Array.isArray(R)?R:R.split(","),A=E.name||"",z=E.type||"",J=z.replace(/\/.*$/,"");return O.some(function(Ie){var ke=Ie.trim();if(/^\*(\/\*)?$/.test(Ie))return!0;if(ke.charAt(0)==="."){var ce=A.toLowerCase(),_e=ke.toLowerCase(),Ee=[_e];return(_e===".jpg"||_e===".jpeg")&&(Ee=[".jpg",".jpeg"]),Ee.some(function(Pe){return ce.endsWith(Pe)})}return/\/\*$/.test(ke)?J===ke.replace(/\/.*$/,""):z===ke?!0:/^\w+$/.test(ke)?((0,_.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(ke,"'.Skip for check.")),!0):!1})}return!0};function De(E,R){var O=E.createReader(),A=[];function z(){O.readEntries(function(J){var Ie=Array.prototype.slice.apply(J);A=A.concat(Ie);var ke=!Ie.length;ke?R(A):z()})}z()}var B=function(R,O,A){var z=function J(Ie,ke){Ie.path=ke||"",Ie.isFile?Ie.file(function(ce){A(ce)&&(Ie.fullPath&&!ce.webkitRelativePath&&(Object.defineProperties(ce,{webkitRelativePath:{writable:!0}}),ce.webkitRelativePath=Ie.fullPath.replace(/^\//,""),Object.defineProperties(ce,{webkitRelativePath:{writable:!1}})),O([ce]))}):Ie.isDirectory&&De(Ie,function(ce){ce.forEach(function(_e){J(_e,"".concat(ke).concat(Ie.name,"/"))})})};R.forEach(function(J){z(J.webkitGetAsEntry())})},Q=B,Y=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],ue=function(E){(0,K.Z)(O,E);var R=(0,$.Z)(O);function O(){var A;(0,W.Z)(this,O);for(var z=arguments.length,J=new Array(z),Ie=0;Ie<z;Ie++)J[Ie]=arguments[Ie];return A=R.call.apply(R,[this].concat(J)),A.state={uid:G()},A.reqs={},A.fileInput=void 0,A._isMounted=void 0,A.onChange=function(ke){var ce=A.props,_e=ce.accept,Ee=ce.directory,Pe=ke.target.files,Oe=(0,ae.Z)(Pe).filter(function(Ze){return!Ee||Z(Ze,_e)});A.uploadFiles(Oe),A.reset()},A.onClick=function(ke){var ce=A.fileInput;if(!!ce){var _e=A.props,Ee=_e.children,Pe=_e.onClick;if(Ee&&Ee.type==="button"){var Oe=ce.parentNode;Oe.focus(),Oe.querySelector("button").blur()}ce.click(),Pe&&Pe(ke)}},A.onKeyDown=function(ke){ke.key==="Enter"&&A.onClick(ke)},A.onFileDrop=function(ke){var ce=A.props.multiple;if(ke.preventDefault(),ke.type!=="dragover")if(A.props.directory)Q(Array.prototype.slice.call(ke.dataTransfer.items),A.uploadFiles,function(Ee){return Z(Ee,A.props.accept)});else{var _e=(0,ae.Z)(ke.dataTransfer.files).filter(function(Ee){return Z(Ee,A.props.accept)});ce===!1&&(_e=_e.slice(0,1)),A.uploadFiles(_e)}},A.uploadFiles=function(ke){var ce=(0,ae.Z)(ke),_e=ce.map(function(Ee){return Ee.uid=G(),A.processFile(Ee,ce)});Promise.all(_e).then(function(Ee){var Pe=A.props.onBatchStart;Pe==null||Pe(Ee.map(function(Oe){var Ze=Oe.origin,Qe=Oe.parsedFile;return{file:Ze,parsedFile:Qe}})),Ee.filter(function(Oe){return Oe.parsedFile!==null}).forEach(function(Oe){A.post(Oe)})})},A.processFile=function(){var ke=(0,X.Z)((0,w.Z)().mark(function ce(_e,Ee){var Pe,Oe,Ze,Qe,dt,Ct,at,pt,St;return(0,w.Z)().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(Pe=A.props.beforeUpload,Oe=_e,!Pe){Je.next=14;break}return Je.prev=3,Je.next=6,Pe(_e,Ee);case 6:Oe=Je.sent,Je.next=12;break;case 9:Je.prev=9,Je.t0=Je.catch(3),Oe=!1;case 12:if(Oe!==!1){Je.next=14;break}return Je.abrupt("return",{origin:_e,parsedFile:null,action:null,data:null});case 14:if(Ze=A.props.action,typeof Ze!="function"){Je.next=21;break}return Je.next=18,Ze(_e);case 18:Qe=Je.sent,Je.next=22;break;case 21:Qe=Ze;case 22:if(dt=A.props.data,typeof dt!="function"){Je.next=29;break}return Je.next=26,dt(_e);case 26:Ct=Je.sent,Je.next=30;break;case 29:Ct=dt;case 30:return at=((0,j.Z)(Oe)==="object"||typeof Oe=="string")&&Oe?Oe:_e,at instanceof File?pt=at:pt=new File([at],_e.name,{type:_e.type}),St=pt,St.uid=_e.uid,Je.abrupt("return",{origin:_e,data:Ct,parsedFile:St,action:Qe});case 35:case"end":return Je.stop()}},ce,null,[[3,9]])}));return function(ce,_e){return ke.apply(this,arguments)}}(),A.saveFileInput=function(ke){A.fileInput=ke},A}return(0,te.Z)(O,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(z){var J=this,Ie=z.data,ke=z.origin,ce=z.action,_e=z.parsedFile;if(!!this._isMounted){var Ee=this.props,Pe=Ee.onStart,Oe=Ee.customRequest,Ze=Ee.name,Qe=Ee.headers,dt=Ee.withCredentials,Ct=Ee.method,at=ke.uid,pt=Oe||m,St={action:ce,filename:Ze,data:Ie,file:_e,headers:Qe,withCredentials:dt,method:Ct||"post",onProgress:function(Je){var mt=J.props.onProgress;mt==null||mt(Je,_e)},onSuccess:function(Je,mt){var ft=J.props.onSuccess;ft==null||ft(Je,_e,mt),delete J.reqs[at]},onError:function(Je,mt){var ft=J.props.onError;ft==null||ft(Je,mt,_e),delete J.reqs[at]}};Pe(ke),this.reqs[at]=pt(St)}}},{key:"reset",value:function(){this.setState({uid:G()})}},{key:"abort",value:function(z){var J=this.reqs;if(z){var Ie=z.uid?z.uid:z;J[Ie]&&J[Ie].abort&&J[Ie].abort(),delete J[Ie]}else Object.keys(J).forEach(function(ke){J[ke]&&J[ke].abort&&J[ke].abort(),delete J[ke]})}},{key:"render",value:function(){var z,J=this.props,Ie=J.component,ke=J.prefixCls,ce=J.className,_e=J.disabled,Ee=J.id,Pe=J.style,Oe=J.multiple,Ze=J.accept,Qe=J.capture,dt=J.children,Ct=J.directory,at=J.openFileDialogOnClick,pt=J.onMouseEnter,St=J.onMouseLeave,yt=(0,le.Z)(J,Y),Je=q()((z={},(0,V.Z)(z,ke,!0),(0,V.Z)(z,"".concat(ke,"-disabled"),_e),(0,V.Z)(z,ce,ce),z)),mt=Ct?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},ft=_e?{}:{onClick:at?this.onClick:function(){},onKeyDown:at?this.onKeyDown:function(){},onMouseEnter:pt,onMouseLeave:St,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return t.createElement(Ie,(0,l.Z)({},ft,{className:Je,role:"button",style:Pe}),t.createElement("input",(0,l.Z)({},(0,Ne.Z)(yt,{aria:!0,data:!0}),{id:Ee,type:"file",ref:this.saveFileInput,onClick:function(wt){return wt.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:Ze},mt,{multiple:Oe,onChange:this.onChange},Qe!=null?{capture:Qe}:{})),dt)}}]),O}(t.Component),de=ue;function me(){}var ge=function(E){(0,K.Z)(O,E);var R=(0,$.Z)(O);function O(){var A;(0,W.Z)(this,O);for(var z=arguments.length,J=new Array(z),Ie=0;Ie<z;Ie++)J[Ie]=arguments[Ie];return A=R.call.apply(R,[this].concat(J)),A.uploader=void 0,A.saveUploader=function(ke){A.uploader=ke},A}return(0,te.Z)(O,[{key:"abort",value:function(z){this.uploader.abort(z)}},{key:"render",value:function(){return t.createElement(de,(0,l.Z)({},this.props,{ref:this.saveUploader}))}}]),O}(t.Component);ge.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:me,onError:me,onSuccess:me,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var Re=ge,he=Re,ye=r(21770),Ce=r(73935),Ge=r(53124),Ae=r(98866),pe=r(42051),Te=r(85636),we=r(28991),Ue={icon:function(R,O){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:O}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:R}}]}},name:"file",theme:"twotone"},Ke=Ue,xe=r(27029),Le=function(R,O){return t.createElement(xe.Z,(0,we.Z)((0,we.Z)({},R),{},{ref:O,icon:Ke}))};Le.displayName="FileTwoTone";var Ve=t.forwardRef(Le),Me=r(7085),ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},x=ne,H=function(R,O){return t.createElement(xe.Z,(0,we.Z)((0,we.Z)({},R),{},{ref:O,icon:x}))};H.displayName="PaperClipOutlined";var N=t.forwardRef(H),oe={icon:function(R,O){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:R}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:O}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:O}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:O}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:R}}]}},name:"picture",theme:"twotone"},Se=oe,je=function(R,O){return t.createElement(xe.Z,(0,we.Z)((0,we.Z)({},R),{},{ref:O,icon:Se}))};je.displayName="PictureTwoTone";var k=t.forwardRef(je),u=r(63441),h=r(71577),a=r(57838),p=r(33603),P=r(96159);function U(E){return(0,l.Z)((0,l.Z)({},E),{lastModified:E.lastModified,lastModifiedDate:E.lastModifiedDate,name:E.name,size:E.size,type:E.type,uid:E.uid,percent:0,originFileObj:E})}function re(E,R){var O=(0,ae.Z)(R),A=O.findIndex(function(z){var J=z.uid;return J===E.uid});return A===-1?O.push(E):O[A]=E,O}function se(E,R){var O=E.uid!==void 0?"uid":"name";return R.filter(function(A){return A[O]===E[O]})[0]}function be(E,R){var O=E.uid!==void 0?"uid":"name",A=R.filter(function(z){return z[O]!==E[O]});return A.length===R.length?null:A}var ee=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",O=R.split("/"),A=O[O.length-1],z=A.split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(z)||[""])[0]},He=function(R){return R.indexOf("image/")===0},ie=function(R){if(R.type&&!R.thumbUrl)return He(R.type);var O=R.thumbUrl||R.url||"",A=ee(O);return/^data:image\//.test(O)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(A)?!0:!(/^data:/.test(O)||A)},ze=200;function Be(E){return new Promise(function(R){if(!E.type||!He(E.type)){R("");return}var O=document.createElement("canvas");O.width=ze,O.height=ze,O.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(ze,"px; height: ").concat(ze,"px; z-index: 9999; display: none;"),document.body.appendChild(O);var A=O.getContext("2d"),z=new Image;if(z.onload=function(){var Ie=z.width,ke=z.height,ce=ze,_e=ze,Ee=0,Pe=0;Ie>ke?(_e=ke*(ze/Ie),Pe=-(_e-ce)/2):(ce=Ie*(ze/ke),Ee=-(ce-_e)/2),A.drawImage(z,Ee,Pe,ce,_e);var Oe=O.toDataURL();document.body.removeChild(O),R(Oe)},z.crossOrigin="anonymous",E.type.startsWith("image/svg+xml")){var J=new FileReader;J.addEventListener("load",function(){J.result&&(z.src=J.result)}),J.readAsDataURL(E)}else z.src=window.URL.createObjectURL(E)})}var Fe=r(73171),Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},qe=Xe,We=function(R,O){return t.createElement(xe.Z,(0,we.Z)((0,we.Z)({},R),{},{ref:O,icon:qe}))};We.displayName="DownloadOutlined";var $e=t.forwardRef(We),ot=r(95357),vt=r(54458),Ye=r(45777),nt=t.forwardRef(function(E,R){var O,A=E.prefixCls,z=E.className,J=E.style,Ie=E.locale,ke=E.listType,ce=E.file,_e=E.items,Ee=E.progress,Pe=E.iconRender,Oe=E.actionIconRender,Ze=E.itemRender,Qe=E.isImgUrl,dt=E.showPreviewIcon,Ct=E.showRemoveIcon,at=E.showDownloadIcon,pt=E.previewIcon,St=E.removeIcon,yt=E.downloadIcon,Je=E.onPreview,mt=E.onDownload,ft=E.onClose,Ot,wt,Dt=ce.status,Xt=t.useState(Dt),$t=(0,L.Z)(Xt,2),kt=$t[0],Ft=$t[1];t.useEffect(function(){Dt!=="removed"&&Ft(Dt)},[Dt]);var tn=t.useState(!1),jt=(0,L.Z)(tn,2),nn=jt[0],Qt=jt[1],Ht=t.useRef();t.useEffect(function(){return Ht.current=setTimeout(function(){Qt(!0)},300),function(){window.clearTimeout(Ht.current)}},[]);var Jt="".concat(A,"-span"),Kt=Pe(ce),Nt=t.createElement("div",{className:"".concat(A,"-text-icon")},Kt);if(ke==="picture"||ke==="picture-card")if(kt==="uploading"||!ce.thumbUrl&&!ce.url){var _t,rn=q()((_t={},(0,V.Z)(_t,"".concat(A,"-list-item-thumbnail"),!0),(0,V.Z)(_t,"".concat(A,"-list-item-file"),kt!=="uploading"),_t));Nt=t.createElement("div",{className:rn},Kt)}else{var Bt,on=(Qe==null?void 0:Qe(ce))?t.createElement("img",{src:ce.thumbUrl||ce.url,alt:ce.name,className:"".concat(A,"-list-item-image"),crossOrigin:ce.crossOrigin}):Kt,zt=q()((Bt={},(0,V.Z)(Bt,"".concat(A,"-list-item-thumbnail"),!0),(0,V.Z)(Bt,"".concat(A,"-list-item-file"),Qe&&!Qe(ce)),Bt));Nt=t.createElement("a",{className:zt,onClick:function(Tt){return Je(ce,Tt)},href:ce.url||ce.thumbUrl,target:"_blank",rel:"noopener noreferrer"},on)}var Et=q()((O={},(0,V.Z)(O,"".concat(A,"-list-item"),!0),(0,V.Z)(O,"".concat(A,"-list-item-").concat(kt),!0),(0,V.Z)(O,"".concat(A,"-list-item-list-type-").concat(ke),!0),O)),sn=typeof ce.linkProps=="string"?JSON.parse(ce.linkProps):ce.linkProps,Mt=Ct?Oe((typeof St=="function"?St(ce):St)||t.createElement(Fe.Z,null),function(){return ft(ce)},A,Ie.removeFile):null,qt=at&&kt==="done"?Oe((typeof yt=="function"?yt(ce):yt)||t.createElement($e,null),function(){return mt(ce)},A,Ie.downloadFile):null,Yt=ke!=="picture-card"&&t.createElement("span",{key:"download-delete",className:q()("".concat(A,"-list-item-card-actions"),{picture:ke==="picture"})},qt,Mt),en=q()("".concat(A,"-list-item-name")),Ut=ce.url?[t.createElement("a",(0,l.Z)({key:"view",target:"_blank",rel:"noopener noreferrer",className:en,title:ce.name},sn,{href:ce.url,onClick:function(Tt){return Je(ce,Tt)}}),ce.name),Yt]:[t.createElement("span",{key:"view",className:en,onClick:function(Tt){return Je(ce,Tt)},title:ce.name},ce.name),Yt],it={pointerEvents:"none",opacity:.5},st=dt?t.createElement("a",{href:ce.url||ce.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:ce.url||ce.thumbUrl?void 0:it,onClick:function(Tt){return Je(ce,Tt)},title:Ie.previewFile},typeof pt=="function"?pt(ce):pt||t.createElement(ot.Z,null)):null,Rt=ke==="picture-card"&&kt!=="uploading"&&t.createElement("span",{className:"".concat(A,"-list-item-actions")},st,kt==="done"&&qt,Mt),xt;ce.response&&typeof ce.response=="string"?xt=ce.response:xt=((Ot=ce.error)===null||Ot===void 0?void 0:Ot.statusText)||((wt=ce.error)===null||wt===void 0?void 0:wt.message)||Ie.uploadError;var Pt=t.createElement("span",{className:Jt},Nt,Ut),Vt=t.useContext(Ge.E_),an=Vt.getPrefixCls,Zt=an(),Gt=t.createElement("div",{className:Et},t.createElement("div",{className:"".concat(A,"-list-item-info")},Pt),Rt,nn&&t.createElement(u.Z,{motionName:"".concat(Zt,"-fade"),visible:kt==="uploading",motionDeadline:2e3},function(ht){var Tt=ht.className,cn="percent"in ce?t.createElement(vt.Z,(0,l.Z)({},Ee,{type:"line",percent:ce.percent})):null;return t.createElement("div",{className:q()("".concat(A,"-list-item-progress"),Tt)},cn)})),ln=q()("".concat(A,"-list-").concat(ke,"-container"),z),un=kt==="error"?t.createElement(Ye.Z,{title:xt,getPopupContainer:function(Tt){return Tt.parentNode}},Gt):Gt;return t.createElement("div",{className:ln,style:J,ref:R},Ze?Ze(un,ce,_e,{download:mt.bind(null,ce),preview:Je.bind(null,ce),remove:ft.bind(null,ce)}):un)}),et=nt,i=(0,l.Z)({},p.ZP);delete i.onAppearEnd,delete i.onEnterEnd,delete i.onLeaveEnd;var v=function(R,O){var A,z=R.listType,J=z===void 0?"text":z,Ie=R.previewFile,ke=Ie===void 0?Be:Ie,ce=R.onPreview,_e=R.onDownload,Ee=R.onRemove,Pe=R.locale,Oe=R.iconRender,Ze=R.isImageUrl,Qe=Ze===void 0?ie:Ze,dt=R.prefixCls,Ct=R.items,at=Ct===void 0?[]:Ct,pt=R.showPreviewIcon,St=pt===void 0?!0:pt,yt=R.showRemoveIcon,Je=yt===void 0?!0:yt,mt=R.showDownloadIcon,ft=mt===void 0?!1:mt,Ot=R.removeIcon,wt=R.previewIcon,Dt=R.downloadIcon,Xt=R.progress,$t=Xt===void 0?{strokeWidth:2,showInfo:!1}:Xt,kt=R.appendAction,Ft=R.appendActionVisible,tn=Ft===void 0?!0:Ft,jt=R.itemRender,nn=(0,a.Z)(),Qt=t.useState(!1),Ht=(0,L.Z)(Qt,2),Jt=Ht[0],Kt=Ht[1];t.useEffect(function(){J!=="picture"&&J!=="picture-card"||(at||[]).forEach(function(it){typeof document=="undefined"||typeof window=="undefined"||!window.FileReader||!window.File||!(it.originFileObj instanceof File||it.originFileObj instanceof Blob)||it.thumbUrl!==void 0||(it.thumbUrl="",ke&&ke(it.originFileObj).then(function(st){it.thumbUrl=st||"",nn()}))})},[J,at,ke]),t.useEffect(function(){Kt(!0)},[]);var Nt=function(st,Rt){if(!!ce)return Rt==null||Rt.preventDefault(),ce(st)},_t=function(st){typeof _e=="function"?_e(st):st.url&&window.open(st.url)},rn=function(st){Ee==null||Ee(st)},Bt=function(st){if(Oe)return Oe(st,J);var Rt=st.status==="uploading",xt=Qe&&Qe(st)?t.createElement(k,null):t.createElement(Ve,null),Pt=Rt?t.createElement(Me.Z,null):t.createElement(N,null);return J==="picture"?Pt=Rt?t.createElement(Me.Z,null):xt:J==="picture-card"&&(Pt=Rt?Pe.uploading:xt),Pt},on=function(st,Rt,xt,Pt){var Vt={type:"text",size:"small",title:Pt,onClick:function(Gt){Rt(),(0,P.l$)(st)&&st.props.onClick&&st.props.onClick(Gt)},className:"".concat(xt,"-list-item-card-actions-btn")};if((0,P.l$)(st)){var an=(0,P.Tm)(st,(0,l.Z)((0,l.Z)({},st.props),{onClick:function(){}}));return t.createElement(h.Z,(0,l.Z)({},Vt,{icon:an}))}return t.createElement(h.Z,(0,l.Z)({},Vt),t.createElement("span",null,st))};t.useImperativeHandle(O,function(){return{handlePreview:Nt,handleDownload:_t}});var zt=t.useContext(Ge.E_),Et=zt.getPrefixCls,sn=zt.direction,Mt=Et("upload",dt),qt=q()((A={},(0,V.Z)(A,"".concat(Mt,"-list"),!0),(0,V.Z)(A,"".concat(Mt,"-list-").concat(J),!0),(0,V.Z)(A,"".concat(Mt,"-list-rtl"),sn==="rtl"),A)),Yt=(0,ae.Z)(at.map(function(it){return{key:it.uid,file:it}})),en=J==="picture-card"?"animate-inline":"animate",Ut={motionDeadline:2e3,motionName:"".concat(Mt,"-").concat(en),keys:Yt,motionAppear:Jt};return J!=="picture-card"&&(Ut=(0,l.Z)((0,l.Z)({},i),Ut)),t.createElement("div",{className:qt},t.createElement(u.V,(0,l.Z)({},Ut,{component:!1}),function(it){var st=it.key,Rt=it.file,xt=it.className,Pt=it.style;return t.createElement(et,{key:st,locale:Pe,prefixCls:Mt,className:xt,style:Pt,file:Rt,items:at,progress:$t,listType:J,isImgUrl:Qe,showPreviewIcon:St,showRemoveIcon:Je,showDownloadIcon:ft,removeIcon:Ot,previewIcon:wt,downloadIcon:Dt,iconRender:Bt,actionIconRender:on,itemRender:jt,onPreview:Nt,onDownload:_t,onClose:rn})}),kt&&t.createElement(u.Z,(0,l.Z)({},Ut,{visible:tn,forceRender:!0}),function(it){var st=it.className,Rt=it.style;return(0,P.Tm)(kt,function(xt){return{className:q()(xt.className,st),style:(0,l.Z)((0,l.Z)((0,l.Z)({},Rt),{pointerEvents:st?"none":void 0}),xt.style)}})}))},C=t.forwardRef(v),M=C,ve=function(E,R,O,A){function z(J){return J instanceof O?J:new O(function(Ie){Ie(J)})}return new(O||(O=Promise))(function(J,Ie){function ke(Ee){try{_e(A.next(Ee))}catch(Pe){Ie(Pe)}}function ce(Ee){try{_e(A.throw(Ee))}catch(Pe){Ie(Pe)}}function _e(Ee){Ee.done?J(Ee.value):z(Ee.value).then(ke,ce)}_e((A=A.apply(E,R||[])).next())})},fe="__LIST_IGNORE_".concat(Date.now(),"__"),e=function(R,O){var A,z=R.fileList,J=R.defaultFileList,Ie=R.onRemove,ke=R.showUploadList,ce=ke===void 0?!0:ke,_e=R.listType,Ee=_e===void 0?"text":_e,Pe=R.onPreview,Oe=R.onDownload,Ze=R.onChange,Qe=R.onDrop,dt=R.previewFile,Ct=R.disabled,at=Ct===void 0?!1:Ct,pt=R.locale,St=R.iconRender,yt=R.isImageUrl,Je=R.progress,mt=R.prefixCls,ft=R.className,Ot=R.type,wt=Ot===void 0?"select":Ot,Dt=R.children,Xt=R.style,$t=R.itemRender,kt=R.maxCount,Ft=R.data,tn=Ft===void 0?{}:Ft,jt=R.multiple,nn=jt===void 0?!1:jt,Qt=R.action,Ht=Qt===void 0?"":Qt,Jt=R.accept,Kt=Jt===void 0?"":Jt,Nt=R.supportServerRender,_t=Nt===void 0?!0:Nt,rn=t.useContext(Ae.Z),Bt=at||rn,on=(0,ye.Z)(J||[],{value:z,postState:function(rt){return rt!=null?rt:[]}}),zt=(0,L.Z)(on,2),Et=zt[0],sn=zt[1],Mt=t.useState("drop"),qt=(0,L.Z)(Mt,2),Yt=qt[0],en=qt[1],Ut=t.useRef();t.useMemo(function(){var bt=Date.now();(z||[]).forEach(function(rt,ct){!rt.uid&&!Object.isFrozen(rt)&&(rt.uid="__AUTO__".concat(bt,"_").concat(ct,"__"))})},[z]);var it=function(rt,ct,gt){var tt=(0,ae.Z)(ct);kt===1?tt=tt.slice(-1):kt&&(tt=tt.slice(0,kt)),(0,Ce.flushSync)(function(){sn(tt)});var ut={file:rt,fileList:tt};gt&&(ut.event=gt),Ze==null||Ze(ut)},st=function(rt,ct){return ve(void 0,void 0,void 0,(0,w.Z)().mark(function gt(){var tt,ut,At,It;return(0,w.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(tt=R.beforeUpload,ut=R.transformFile,At=rt,!tt){lt.next=13;break}return lt.next=5,tt(rt,ct);case 5:if(It=lt.sent,It!==!1){lt.next=8;break}return lt.abrupt("return",!1);case 8:if(delete rt[fe],It!==fe){lt.next=12;break}return Object.defineProperty(rt,fe,{value:!0,configurable:!0}),lt.abrupt("return",!1);case 12:(0,j.Z)(It)==="object"&&It&&(At=It);case 13:if(!ut){lt.next=17;break}return lt.next=16,ut(At);case 16:At=lt.sent;case 17:return lt.abrupt("return",At);case 18:case"end":return lt.stop()}},gt)}))},Rt=function(rt){var ct=rt.filter(function(ut){return!ut.file[fe]});if(!!ct.length){var gt=ct.map(function(ut){return U(ut.file)}),tt=(0,ae.Z)(Et);gt.forEach(function(ut){tt=re(ut,tt)}),gt.forEach(function(ut,At){var It=ut;if(ct[At].parsedFile)ut.status="uploading";else{var Lt=ut.originFileObj,lt;try{lt=new File([Lt],Lt.name,{type:Lt.type})}catch(fn){lt=new Blob([Lt],{type:Lt.type}),lt.name=Lt.name,lt.lastModifiedDate=new Date,lt.lastModified=new Date().getTime()}lt.uid=ut.uid,It=lt}it(It,tt)})}},xt=function(rt,ct,gt){try{typeof rt=="string"&&(rt=JSON.parse(rt))}catch(At){}if(!!se(ct,Et)){var tt=U(ct);tt.status="done",tt.percent=100,tt.response=rt,tt.xhr=gt;var ut=re(tt,Et);it(tt,ut)}},Pt=function(rt,ct){if(!!se(ct,Et)){var gt=U(ct);gt.status="uploading",gt.percent=rt.percent;var tt=re(gt,Et);it(gt,tt,rt)}},Vt=function(rt,ct,gt){if(!!se(gt,Et)){var tt=U(gt);tt.error=rt,tt.response=ct,tt.status="error";var ut=re(tt,Et);it(tt,ut)}},an=function(rt){var ct;Promise.resolve(typeof Ie=="function"?Ie(rt):Ie).then(function(gt){var tt;if(gt!==!1){var ut=be(rt,Et);ut&&(ct=(0,l.Z)((0,l.Z)({},rt),{status:"removed"}),Et==null||Et.forEach(function(At){var It=ct.uid!==void 0?"uid":"name";At[It]===ct[It]&&!Object.isFrozen(At)&&(At.status="removed")}),(tt=Ut.current)===null||tt===void 0||tt.abort(ct),it(ct,ut))}})},Zt=function(rt){en(rt.type),rt.type==="drop"&&(Qe==null||Qe(rt))};t.useImperativeHandle(O,function(){return{onBatchStart:Rt,onSuccess:xt,onProgress:Pt,onError:Vt,fileList:Et,upload:Ut.current}});var Gt=t.useContext(Ge.E_),ln=Gt.getPrefixCls,un=Gt.direction,ht=ln("upload",mt),Tt=(0,l.Z)((0,l.Z)({onBatchStart:Rt,onError:Vt,onProgress:Pt,onSuccess:xt},R),{data:tn,multiple:nn,action:Ht,accept:Kt,supportServerRender:_t,prefixCls:ht,disabled:Bt,beforeUpload:st,onChange:void 0});delete Tt.className,delete Tt.style,(!Dt||Bt)&&delete Tt.id;var cn=function(rt,ct){return ce?t.createElement(pe.Z,{componentName:"Upload",defaultLocale:Te.Z.Upload},function(gt){var tt=typeof ce=="boolean"?{}:ce,ut=tt.showRemoveIcon,At=tt.showPreviewIcon,It=tt.showDownloadIcon,Lt=tt.removeIcon,lt=tt.previewIcon,fn=tt.downloadIcon;return t.createElement(M,{prefixCls:ht,listType:Ee,items:Et,previewFile:dt,onPreview:Pe,onDownload:Oe,onRemove:an,showRemoveIcon:!Bt&&ut,showPreviewIcon:At,showDownloadIcon:It,removeIcon:Lt,previewIcon:lt,downloadIcon:fn,iconRender:St,locale:(0,l.Z)((0,l.Z)({},gt),pt),isImageUrl:yt,progress:Je,appendAction:rt,appendActionVisible:ct,itemRender:$t})}):rt};if(wt==="drag"){var Wt,hn=q()(ht,(Wt={},(0,V.Z)(Wt,"".concat(ht,"-drag"),!0),(0,V.Z)(Wt,"".concat(ht,"-drag-uploading"),Et.some(function(bt){return bt.status==="uploading"})),(0,V.Z)(Wt,"".concat(ht,"-drag-hover"),Yt==="dragover"),(0,V.Z)(Wt,"".concat(ht,"-disabled"),Bt),(0,V.Z)(Wt,"".concat(ht,"-rtl"),un==="rtl"),Wt),ft);return t.createElement("span",null,t.createElement("div",{className:hn,onDrop:Zt,onDragOver:Zt,onDragLeave:Zt,style:Xt},t.createElement(he,(0,l.Z)({},Tt,{ref:Ut,className:"".concat(ht,"-btn")}),t.createElement("div",{className:"".concat(ht,"-drag-container")},Dt))),cn())}var vn=q()(ht,(A={},(0,V.Z)(A,"".concat(ht,"-select"),!0),(0,V.Z)(A,"".concat(ht,"-select-").concat(Ee),!0),(0,V.Z)(A,"".concat(ht,"-disabled"),Bt),(0,V.Z)(A,"".concat(ht,"-rtl"),un==="rtl"),A)),pn=function(rt){return t.createElement("div",{className:vn,style:rt},t.createElement(he,(0,l.Z)({},Tt,{ref:Ut})))},dn=pn(Dt?void 0:{display:"none"});return Ee==="picture-card"?t.createElement("span",{className:q()("".concat(ht,"-picture-card-wrapper"),ft)},cn(dn,!!Dt)):t.createElement("span",{className:ft},dn,cn())},o=t.forwardRef(e),n=o,s=function(E,R){var O={};for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&R.indexOf(A)<0&&(O[A]=E[A]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var z=0,A=Object.getOwnPropertySymbols(E);z<A.length;z++)R.indexOf(A[z])<0&&Object.prototype.propertyIsEnumerable.call(E,A[z])&&(O[A[z]]=E[A[z]]);return O},d=t.forwardRef(function(E,R){var O=E.style,A=E.height,z=s(E,["style","height"]);return t.createElement(n,(0,l.Z)({ref:R},z,{type:"drag",style:(0,l.Z)((0,l.Z)({},O),{height:A})}))}),c=d,y=n;y.Dragger=c,y.LIST_IGNORE=fe;var T=y},43185:function(g,S,r){"use strict";var l=r(38663),t=r.n(l),V=r(63252),w=r.n(V),j=r(57663),ae=r(34669),L=r(22385)},65754:function(module){(function(S,r){module.exports=r()})(window,function(){return function(g){var S={};function r(l){if(S[l])return S[l].exports;var t=S[l]={i:l,l:!1,exports:{}};return g[l].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=g,r.c=S,r.d=function(l,t,V){r.o(l,t)||Object.defineProperty(l,t,{enumerable:!0,get:V})},r.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},r.t=function(l,t){if(t&1&&(l=r(l)),t&8||t&4&&typeof l=="object"&&l&&l.__esModule)return l;var V=Object.create(null);if(r.r(V),Object.defineProperty(V,"default",{enumerable:!0,value:l}),t&2&&typeof l!="string")for(var w in l)r.d(V,w,function(j){return l[j]}.bind(null,w));return V},r.n=function(l){var t=l&&l.__esModule?function(){return l.default}:function(){return l};return r.d(t,"a",t),t},r.o=function(l,t){return Object.prototype.hasOwnProperty.call(l,t)},r.p="/dist/",r(r.s="./index.js")}({"./index.js":function(g,S,r){var l=r("./src/cos.js");g.exports=l},"./lib/beacon.min.js":function(g,S,r){(function(l){var t,V,w=r("./node_modules/@babel/runtime/helpers/typeof.js");(function(j,ae){w(S)=="object"&&typeof g!="undefined"?g.exports=ae():(t=ae,V=typeof t=="function"?t.call(S,r,S,g):t,V!==void 0&&(g.exports=V))})(this,function(){"use strict";var j=function(u,h){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,p){a.__proto__=p}||function(a,p){for(var P in p)Object.prototype.hasOwnProperty.call(p,P)&&(a[P]=p[P])})(u,h)},ae=function(){return(ae=Object.assign||function(u){for(var h,a=1,p=arguments.length;a<p;a++)for(var P in h=arguments[a])Object.prototype.hasOwnProperty.call(h,P)&&(u[P]=h[P]);return u}).apply(this,arguments)};function L(k,u,h,a){return new(h||(h=Promise))(function(p,P){function U(be){try{se(a.next(be))}catch(ee){P(ee)}}function re(be){try{se(a.throw(be))}catch(ee){P(ee)}}function se(be){var ee;be.done?p(be.value):(ee=be.value,ee instanceof h?ee:new h(function(He){He(ee)})).then(U,re)}se((a=a.apply(k,u||[])).next())})}function I(k,u){var h,a,p,P,U={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return P={next:re(0),throw:re(1),return:re(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function re(se){return function(be){return function(ee){if(h)throw new TypeError("Generator is already executing.");for(;U;)try{if(h=1,a&&(p=2&ee[0]?a.return:ee[0]?a.throw||((p=a.return)&&p.call(a),0):a.next)&&!(p=p.call(a,ee[1])).done)return p;switch(a=0,p&&(ee=[2&ee[0],p.value]),ee[0]){case 0:case 1:p=ee;break;case 4:return U.label++,{value:ee[1],done:!1};case 5:U.label++,a=ee[1],ee=[0];continue;case 7:ee=U.ops.pop(),U.trys.pop();continue;default:if(p=U.trys,!((p=p.length>0&&p[p.length-1])||ee[0]!==6&&ee[0]!==2)){U=0;continue}if(ee[0]===3&&(!p||ee[1]>p[0]&&ee[1]<p[3])){U.label=ee[1];break}if(ee[0]===6&&U.label<p[1]){U.label=p[1],p=ee;break}if(p&&U.label<p[2]){U.label=p[2],U.ops.push(ee);break}p[2]&&U.ops.pop(),U.trys.pop();continue}ee=u.call(k,U)}catch(He){ee=[6,He],a=0}finally{h=p=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([se,be])}}}var q="__BEACON_",W="__BEACON_deviceId",te="last_report_time",K="sending_event_ids",$="beacon_config",le="beacon_config_request_time",X=function(){function k(){var u=this;this.emit=function(h,a){if(u){var p,P=u.__EventsList[h];if(P==null?void 0:P.length){P=P.slice();for(var U=0;U<P.length;U++){p=P[U];try{var re=p.callback.apply(u,[a]);if(p.type===1&&u.remove(h,p.callback),re===!1)break}catch(se){throw se}}}return u}},this.__EventsList={}}return k.prototype.indexOf=function(u,h){for(var a=0;a<u.length;a++)if(u[a].callback===h)return a;return-1},k.prototype.on=function(u,h,a){if(a===void 0&&(a=0),this){var p=this.__EventsList[u];if(p||(p=this.__EventsList[u]=[]),this.indexOf(p,h)===-1){var P={name:u,type:a||0,callback:h};return p.push(P),this}return this}},k.prototype.one=function(u,h){this.on(u,h,1)},k.prototype.remove=function(u,h){if(this){var a=this.__EventsList[u];if(!a)return null;if(!h){try{delete this.__EventsList[u]}catch(P){}return null}if(a.length){var p=this.indexOf(a,h);a.splice(p,1)}return this}},k}();function Ne(k,u){for(var h={},a=0,p=Object.keys(k);a<p.length;a++){var P=p[a],U=k[P];if(typeof U=="string")h[F(P)]=F(U);else{if(u)throw new Error("value mast be string  !!!!");h[F(String(P))]=F(String(U))}}return h}function F(k){if(typeof k!="string")return k;try{return k.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch(u){return""}}function b(k){return String(k.A99)+String(k.A100)}var m=function(){},D=function(){function k(u){var h=this;this.lifeCycle=new X,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(a){if(!a||!a.reduce||!a.length)throw new TypeError("createPipeline \u65B9\u6CD5\u9700\u8981\u4F20\u5165\u81F3\u5C11\u6709\u4E00\u4E2A pipe \u7684\u6570\u7EC4");return a.length===1?function(p,P){a[0](p,P||m)}:a.reduce(function(p,P){return function(U,re){return re===void 0&&(re=m),p(U,function(se){return P==null?void 0:P(se,re)})}})}([function(a){h.send({url:h.strategy.getUploadUrl(),data:a,method:"post",contentType:"application/json;charset=UTF-8"},function(){var p=h.config.onReportSuccess;typeof p=="function"&&p(JSON.stringify(a.events))},function(){var p=h.config.onReportFail;typeof p=="function"&&p(JSON.stringify(a.events))})}]),function(a,p){if(!a)throw p instanceof Error?p:new Error(p)}(Boolean(u.appkey),"appkey must be initial"),this.config=ae({},u)}return k.prototype.onUserAction=function(u,h){this.preReport(u,h,!1)},k.prototype.onDirectUserAction=function(u,h){this.preReport(u,h,!0)},k.prototype.preReport=function(u,h,a){u?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(u)||this.strategy.isSampleEvent(u)||this.onReport(u,h,a)):this.errorReport.reportError("602"," no eventCode")},k.prototype.addAdditionalParams=function(u){for(var h=0,a=Object.keys(u);h<a.length;h++){var p=a[h];this.additionalParams[p]=u[p]}},k.prototype.setChannelId=function(u){this.commonInfo.channelID=String(u)},k.prototype.setOpenId=function(u){this.commonInfo.openid=String(u)},k.prototype.setUnionid=function(u){this.commonInfo.unid=String(u)},k.prototype.getDeviceId=function(){return this.commonInfo.deviceId},k.prototype.getCommonInfo=function(){return this.commonInfo},k.prototype.removeSendingId=function(u){try{var h=JSON.parse(this.storage.getItem(K)),a=h.indexOf(u);a!=-1&&(h.splice(a,1),this.storage.setItem(K,JSON.stringify(h)))}catch(p){}},k}(),f=function(){function k(u,h,a,p){this.requestParams={},this.network=p,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=u.appkey,this.requestParams.platform=a,this.requestParams.uin=h.deviceId,this.requestParams.model="",this.requestParams.os=a,this.requestParams.app_version=u.appVersion,this.requestParams.sdk_version=h.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=u.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return k.prototype.reportError=function(u,h){this.requestParams._dc=Math.random(),this.requestParams.error_msg=h,this.requestParams.error_code=u,this.network.get(this.uploadUrl,{params:this.requestParams}).catch(function(a){})},k}(),G=function(){function k(u,h,a,p){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.appkey=u.appkey,this.storage=a;try{var P=JSON.parse(this.storage.getItem($));P&&this.processData(P)}catch(U){}u.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!u.isOversea&&this.needRequestConfig()&&this.requestConfig(u.appVersion,h,p)}return k.prototype.requestConfig=function(u,h,a){var p=this;this.storage.setItem(le,Date.now().toString()),a.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:typeof wx=="undefined"?"3":"4",mainAppKey:this.appkey,appVersion:u,sdkVersion:h.sdkVersion,osVersion:h.userAgent,model:"",packageName:"",params:{A3:h.deviceId}}).then(function(P){if(P.data.ret==0)try{var U=JSON.parse(P.data.beaconConfig);U&&(p.processData(U),p.storage.setItem($,P.data.beaconConfig))}catch(re){}else p.processData(null),p.storage.setItem($,"")}).catch(function(P){})},k.prototype.processData=function(u){var h,a,p,P,U;this.strategy.isEventUpOnOff=(h=u==null?void 0:u.isEventUpOnOff)!==null&&h!==void 0?h:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=(a=u==null?void 0:u.httpsUploadUrl)!==null&&a!==void 0?a:this.strategy.httpsUploadUrl,this.strategy.requestInterval=(p=u==null?void 0:u.requestInterval)!==null&&p!==void 0?p:this.strategy.requestInterval,this.strategy.blacklist=(P=u==null?void 0:u.blacklist)!==null&&P!==void 0?P:this.strategy.blacklist,this.strategy.samplelist=(U=u==null?void 0:u.samplelist)!==null&&U!==void 0?U:this.strategy.samplelist;for(var re=0,se=this.strategy.samplelist;re<se.length;re++){var be=se[re].split(",");be.length==2&&(this.realSample[be[0]]=be[1])}},k.prototype.needRequestConfig=function(){var u=Number(this.storage.getItem(le));return Date.now()-u>60*this.strategy.requestInterval*1e3},k.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},k.prototype.isBlackEvent=function(u){return this.strategy.blacklist.indexOf(u)!=-1},k.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},k.prototype.isSampleEvent=function(u){return!!Object.prototype.hasOwnProperty.call(this.realSample,u)&&this.realSample[u]<Math.floor(Math.random()*Math.floor(1e4))},k}(),_="session_storage_key",Z=function(){function k(u,h,a){this.beacon=a,this.storage=u,this.duration=h,this.appkey=a.config.appkey}return k.prototype.getSession=function(){var u=this.storage.getItem(_);if(!u)return this.createSession();var h="",a=0;try{var p=JSON.parse(u)||{sessionId:void 0,sessionStart:void 0};if(!p.sessionId||!p.sessionStart)return this.createSession();var P=Number(this.storage.getItem(te));if(Date.now()-P>this.duration)return this.createSession();h=p.sessionId,a=p.sessionStart}catch(U){}return{sessionId:h,sessionStart:a}},k.prototype.createSession=function(){var u=Date.now(),h={sessionId:this.appkey+"_"+u.toString(),sessionStart:u};this.storage.setItem(_,JSON.stringify(h)),this.storage.setItem(te,u.toString());var a="is_new_user",p=this.storage.getItem(a);return this.beacon.onDirectUserAction("rqd_applaunched",{A21:p?"N":"Y"}),this.storage.setItem(a,JSON.stringify(!1)),h},k}();function De(){var k=navigator.userAgent,u=k.indexOf("compatible")>-1&&k.indexOf("MSIE")>-1,h=k.indexOf("Edge")>-1&&!u,a=k.indexOf("Trident")>-1&&k.indexOf("rv:11.0")>-1;if(u){new RegExp("MSIE (\\d+\\.\\d+);").test(k);var p=parseFloat(RegExp.$1);return p==7?7:p==8?8:p==9?9:p==10?10:6}return h?-2:a?11:-1}var B=function(){return(B=Object.assign||function(u){for(var h,a=1,p=arguments.length;a<p;a++)for(var P in h=arguments[a])Object.prototype.hasOwnProperty.call(h,P)&&(u[P]=h[P]);return u}).apply(this,arguments)},Q,Y=function(){function k(u,h){h===void 0&&(h={}),this.reportOptions={},this.config=u,this.reportOptions=h}return k.canUseDB=function(){return!!(window==null?void 0:window.indexedDB)},k.prototype.openDB=function(){var u=this;return new Promise(function(h,a){if(!k.canUseDB())return a({message:"\u5F53\u524D\u4E0D\u652F\u6301 indexeddb"});var p=u.config,P=p.name,U=p.version,re=p.stores,se=indexedDB.open(P,U);se.onsuccess=function(){u.db=se.result,h(),B({result:1,func:"open",params:JSON.stringify(u.config)},u.reportOptions)},se.onerror=function(be){var ee,He;a(be),B({result:0,func:"open",params:JSON.stringify(u.config),error_msg:(He=(ee=be.target)===null||ee===void 0?void 0:ee.error)===null||He===void 0?void 0:He.message},u.reportOptions)},se.onupgradeneeded=function(){u.db=se.result;try{re==null||re.forEach(function(be){u.createStore(be)})}catch(be){B({result:0,func:"open",params:JSON.stringify(u.config),error_msg:be.message},u.reportOptions),a(be)}}})},k.prototype.useStore=function(u){return this.storeName=u,this},k.prototype.deleteDB=function(){var u=this;return this.closeDB(),new Promise(function(h,a){var p=indexedDB.deleteDatabase(u.config.name);p.onsuccess=function(){return h()},p.onerror=a})},k.prototype.closeDB=function(){var u;(u=this.db)===null||u===void 0||u.close(),this.db=null},k.prototype.getStoreCount=function(){var u=this;return new Promise(function(h,a){var p=u.getStore("readonly").count();p.onsuccess=function(){return h(p.result)},p.onerror=a})},k.prototype.clearStore=function(){var u=this;return new Promise(function(h,a){var p=u.getStore("readwrite").clear();p.onsuccess=function(){return h()},p.onerror=a})},k.prototype.add=function(u,h){var a=this;return new Promise(function(p,P){var U=a.getStore("readwrite").add(u,h);U.onsuccess=function(){p(U.result)},U.onerror=P})},k.prototype.put=function(u,h){var a=this;return new Promise(function(p,P){var U=a.getStore("readwrite").put(u,h);U.onsuccess=function(){p(U.result)},U.onerror=P})},k.prototype.getStoreAllData=function(){var u=this;return new Promise(function(h,a){var p=u.getStore("readonly").openCursor(),P=[];p.onsuccess=function(){var U;if((U=p.result)===null||U===void 0?void 0:U.value){var re=p.result.value;P.push(re),p.result.continue()}else h(P)},p.onerror=a})},k.prototype.getDataRangeByIndex=function(u,h,a,p,P){var U=this;return new Promise(function(re,se){var be=U.getStore().index(u),ee=IDBKeyRange.bound(h,a,p,P),He=[],ie=be.openCursor(ee);ie.onsuccess=function(){var ze;((ze=ie==null?void 0:ie.result)===null||ze===void 0?void 0:ze.value)?(He.push(ie==null?void 0:ie.result.value),ie==null||ie.result.continue()):re(He)},ie.onerror=se})},k.prototype.removeDataByIndex=function(u,h,a,p,P){var U=this;return new Promise(function(re,se){var be=U.getStore("readwrite").index(u),ee=IDBKeyRange.bound(h,a,p,P),He=be.openCursor(ee),ie=0;He.onsuccess=function(ze){var Be=ze.target.result;Be?(ie+=1,Be.delete(),Be.continue()):re(ie)},He.onerror=se})},k.prototype.createStore=function(u){var h=u.name,a=u.indexes,p=a===void 0?[]:a,P=u.options;if(this.db){this.db.objectStoreNames.contains(h)&&this.db.deleteObjectStore(h);var U=this.db.createObjectStore(h,P);p.forEach(function(re){U.createIndex(re.indexName,re.keyPath,re.options)})}},k.prototype.getStore=function(u){var h;return u===void 0&&(u="readonly"),(h=this.db)===null||h===void 0?void 0:h.transaction(this.storeName,u).objectStore(this.storeName)},k}(),ue="event_table_v3",de="eventId",me=function(){function k(u){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new Y({name:"Beacon_"+u+"_V3",version:1,stores:[{name:ue,options:{keyPath:de},indexes:[{indexName:de,keyPath:de,options:{unique:!0}}]}]}),this.open()}return k.prototype.getCount=function(){var u=this;return this.readyExec(function(){return u.db.getStoreCount()})},k.prototype.setItem=function(u,h){var a=this;return this.readyExec(function(){return a.db.add({eventId:u,value:h})})},k.prototype.getItem=function(u){return L(this,void 0,void 0,function(){var h=this;return I(this,function(a){return[2,this.readyExec(function(){return h.db.getDataRangeByIndex(de,u,u)})]})})},k.prototype.removeItem=function(u){var h=this;return this.readyExec(function(){return h.db.removeDataByIndex(de,u,u)})},k.prototype.updateItem=function(u,h){var a=this;return this.readyExec(function(){return a.db.put({eventId:u,value:h})})},k.prototype.iterate=function(u){var h=this;return this.readyExec(function(){return h.db.getStoreAllData().then(function(a){a.forEach(function(p){u(p.value)})})})},k.prototype.open=function(){return L(this,void 0,void 0,function(){var u=this;return I(this,function(h){switch(h.label){case 0:return this.taskQueue=this.taskQueue.then(function(){return u.db.openDB()}),[4,this.taskQueue];case 1:return h.sent(),this.isReady=!0,this.db.useStore(ue),[2]}})})},k.prototype.readyExec=function(u){return this.isReady?u():(this.taskQueue=this.taskQueue.then(function(){return u()}),this.taskQueue)},k}(),ge=function(){function k(u){this.keyObject={},this.storage=u}return k.prototype.getCount=function(){return this.storage.getStoreCount()},k.prototype.removeItem=function(u){this.storage.removeItem(u),delete this.keyObject[u]},k.prototype.setItem=function(u,h){var a=JSON.stringify(h);this.storage.setItem(u,a),this.keyObject[u]=h},k.prototype.iterate=function(u){for(var h=Object.keys(this.keyObject),a=0;a<h.length;a++){var p=this.storage.getItem(h[a]);u(JSON.parse(p))}},k}(),Re=function(){function k(u,h){var a=this;this.dbEventCount=0,De()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new ge(h),this.dbEventCount=this.store.getCount()):(this.store=new me(u),this.getCount().then(function(p){a.dbEventCount=p}))}return k.prototype.getCount=function(){return L(this,void 0,void 0,function(){return I(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,u.sent()];case 2:return u.sent(),[2,Promise.reject()];case 3:return[2]}})})},k.prototype.insertEvent=function(u,h){return L(this,void 0,void 0,function(){var a,p;return I(this,function(P){switch(P.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];a=b(u.mapValue),P.label=1;case 1:return P.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(a,u)];case 2:return[2,P.sent()];case 3:return p=P.sent(),h&&h(p,u),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}})})},k.prototype.getEvents=function(){return L(this,void 0,void 0,function(){var u;return I(this,function(h){switch(h.label){case 0:u=[],h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.store.iterate(function(a){u.push(a)})];case 2:return h.sent(),[2,Promise.all(u)];case 3:return h.sent(),[2,Promise.all(u)];case 4:return[2]}})})},k.prototype.removeEvent=function(u){return L(this,void 0,void 0,function(){var h;return I(this,function(a){switch(a.label){case 0:h=b(u.mapValue),a.label=1;case 1:return a.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(h)];case 2:return[2,a.sent()];case 3:return a.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}})})},k}(),he=function(){return(he=Object.assign||function(u){for(var h,a=1,p=arguments.length;a<p;a++)for(var P in h=arguments[a])Object.prototype.hasOwnProperty.call(h,P)&&(u[P]=h[P]);return u}).apply(this,arguments)};function ye(k){try{return decodeURIComponent(k.replace(/\+/g," "))}catch(u){return null}}function Ce(k,u){var h=[null,void 0,"",NaN].includes(k);if(u.isSkipEmpty&&h)return null;var a=!u.isSkipEmpty&&h?"":k;try{return u.encode?encodeURIComponent(a):a}catch(p){return null}}function Ge(k){var u=k.split("#"),h=u[0],a=u[1],p=a===void 0?"":a,P=h.split("?"),U=P[0],re=P[1],se=re===void 0?"":re,be=ye(p),ee=Object.create(null);return se.split("&").forEach(function(He){var ie=He.split("="),ze=ie[0],Be=ie[1],Fe=Be===void 0?"":Be,Xe=ye(ze),qe=ye(Fe);Xe===null||qe===null||Xe===""&&qe===""||ee[Xe]||(ee[Xe]=qe)}),{url:U,query:ee,hash:be}}function Ae(k,u){u===void 0&&(u={encode:!0,isSkipEmpty:!1});var h=k.url,a=k.query,p=a===void 0?{}:a,P=k.hash,U=h.split("#"),re=U[0],se=U[1],be=se===void 0?"":se,ee=re.split("?")[0],He=[],ie=Ce(P||be,u),ze=he(he({},Ge(h).query),p);return Object.keys(ze).forEach(function(Be){var Fe=Ce(Be,u),Xe=Ce(ze[Be],u);Fe!==null&&Xe!==null&&He.push(Fe+"="+Xe)}),ee+(He.length?"?"+He.join("&"):"")+(ie?"#"+ie:"")}function pe(k,u){return new Promise(function(h,a){if(u&&document.querySelectorAll("script[data-tag="+u+"]").length)return h();var p=document.createElement("script"),P=he({type:"text/javascript",charset:"utf-8"},k);Object.keys(P).forEach(function(U){return function(re,se,be){if(re)return be===void 0?re.getAttribute(se):re.setAttribute(se,be)}(p,U,P[U])}),u&&(p.dataset.tag=u),p.onload=function(){return h()},p.onreadystatechange=function(){var U=p.readyState;["complete","loaded"].includes(U)&&(p.onreadystatechange=null,h())},p.onerror=a,document.body.appendChild(p)})}(function(k){k[k.equal=0]="equal",k[k.low=-1]="low",k[k.high=1]="high"})(Q||(Q={}));var Te=function(){return(Te=Object.assign||function(u){for(var h,a=1,p=arguments.length;a<p;a++)for(var P in h=arguments[a])Object.prototype.hasOwnProperty.call(h,P)&&(u[P]=h[P]);return u}).apply(this,arguments)};function we(k,u,h,a){return new(h||(h=Promise))(function(p,P){function U(be){try{se(a.next(be))}catch(ee){P(ee)}}function re(be){try{se(a.throw(be))}catch(ee){P(ee)}}function se(be){var ee;be.done?p(be.value):(ee=be.value,ee instanceof h?ee:new h(function(He){He(ee)})).then(U,re)}se((a=a.apply(k,u||[])).next())})}function Ue(k,u){var h,a,p,P,U={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return P={next:re(0),throw:re(1),return:re(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function re(se){return function(be){return function(ee){if(h)throw new TypeError("Generator is already executing.");for(;U;)try{if(h=1,a&&(p=2&ee[0]?a.return:ee[0]?a.throw||((p=a.return)&&p.call(a),0):a.next)&&!(p=p.call(a,ee[1])).done)return p;switch(a=0,p&&(ee=[2&ee[0],p.value]),ee[0]){case 0:case 1:p=ee;break;case 4:return U.label++,{value:ee[1],done:!1};case 5:U.label++,a=ee[1],ee=[0];continue;case 7:ee=U.ops.pop(),U.trys.pop();continue;default:if(!((p=(p=U.trys).length>0&&p[p.length-1])||ee[0]!==6&&ee[0]!==2)){U=0;continue}if(ee[0]===3&&(!p||ee[1]>p[0]&&ee[1]<p[3])){U.label=ee[1];break}if(ee[0]===6&&U.label<p[1]){U.label=p[1],p=ee;break}if(p&&U.label<p[2]){U.label=p[2],U.ops.push(ee);break}p[2]&&U.ops.pop(),U.trys.pop();continue}ee=u.call(k,U)}catch(He){ee=[6,He],a=0}finally{h=p=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([se,be])}}}var Ke=function(){function k(){this.interceptors=[]}return k.prototype.use=function(u,h){return this.interceptors.push({resolved:u,rejected:h}),this.interceptors.length-1},k.prototype.traverse=function(u,h){h===void 0&&(h=!1);var a=Promise.resolve(u);return(h?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(p,P){if(P){var U=P.resolved,re=P.rejected;a=a.then(U,re)}return p},""),a},k.prototype.eject=function(u){this.interceptors[u]&&(this.interceptors[u]=null)},k}(),xe={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new Ke,response:new Ke}},Le=/^([a-z][a-z\d+\-.]*:)?\/\//i,Ve=Object.prototype.toString;function Me(k){return we(this,void 0,void 0,function(){var u;return Ue(this,function(h){switch(h.label){case 0:if(window.fetch)return[2];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,pe({src:k})];case 2:return h.sent(),[3,4];case 3:throw u=h.sent(),function(a){if(typeof Image!="undefined"){var p=new Image(1,1),P=Te({attaid:"0f400053130",token:"6552374442",comps:"@tencent/ovb-request",version:"1.1.18",ua:navigator.userAgent,url:location.href,_dc:Math.random()},a),U=Object.keys(P).map(function(re){return re+"="+encodeURIComponent(P[re])}).join("&");p.src="https://h.trace.qq.com/kv?"+U}}({func:"loadPolyfill",result:0,params:k,error_msg:u.message}),new Error("\u52A0\u8F7D polyfill "+k+" \u5931\u8D25: "+u.message);case 4:return[2]}})})}function ne(k){return["Accept","Content-Type"].forEach(function(u){return h=u,void((a=k.headers)&&Object.keys(a).forEach(function(p){p!==h&&p.toUpperCase()===h.toUpperCase()&&(a[h]=a[p],delete a[p])}));var h,a}),function(u){if(Ve.call(u)!=="[object Object]")return!1;var h=Object.getPrototypeOf(u);return h===null||h===Object.prototype}(k.body)&&(k.body=JSON.stringify(k.body),k.headers&&(k.headers["Content-Type"]="application/json;charset=utf-8")),k}function x(k){return we(this,void 0,void 0,function(){var u,h,a,p,P,U,re,se,be,ee,He,ie,ze,Be,Fe,Xe,qe;return Ue(this,function(We){switch(We.label){case 0:return u=xe.baseURL,h=xe.defaults,a=xe.interceptors,[4,Me(xe.polyfillUrl)];case 1:return We.sent(),(p=Te(Te({},h),k)).headers||(p.headers=function($e){$e===void 0&&($e="GET");var ot=xe.headers[$e]||{};return Te(Te({},xe.headers.common),ot)}(p.method)),ne(p),[4,a.request.traverse(p,!0)];case 2:if((P=We.sent())instanceof Error)throw P;return P.url=function($e,ot){return!$e||Le.test(ot)?ot:$e.replace(/\/+$/,"")+"/"+ot.replace(/^\/+/,"")}(u,P.url),U=P.url,re=P.timeout,se=P.params,be=P.method,ee=["GET","DELETE","OPTIONS","HEAD"].includes(be===void 0?"GET":be)&&!!se,He=ee?Ae({url:U,query:se}):U,ie=[],re&&!P.signal&&(Fe=new Promise(function($e){ze=setTimeout(function(){$e(new Error("timeout"))},re)}),ie.push(Fe),Be=new AbortController,P.signal=Be.signal),ie.push(fetch(He,P).catch(function($e){return $e})),[4,Promise.race(ie)];case 3:return Xe=We.sent(),ze&&clearTimeout(ze),[4,a.response.traverse(Xe)];case 4:if((qe=We.sent())instanceof Error)throw Be==null||Be.abort(),qe;return[2,qe]}})})}var H=function(){function k(u){xe.interceptors.request.use(function(h){var a=h.url,p=h.method,P=h.body,U=P;if(u.onReportBeforeSend){var re=u.onReportBeforeSend({url:a,method:p,data:P?JSON.parse(P):null});U=(re==null?void 0:re.data)?JSON.stringify(re.data):null}if(p!=="GET"&&!U)throw new Error("No data for sdk, cancel.");return ae(ae({},h),{body:U})})}return k.prototype.get=function(u,h){return L(this,void 0,void 0,function(){var a,p;return I(this,function(P){switch(P.label){case 0:return[4,x(ae({url:u},h))];case 1:return[4,(a=P.sent()).json()];case 2:return p=P.sent(),[2,Promise.resolve({data:p,status:a.status,statusText:a.statusText,headers:a.headers})]}})})},k.prototype.post=function(u,h,a){return L(this,void 0,void 0,function(){var p,P;return I(this,function(U){switch(U.label){case 0:return[4,x(ae({url:u,body:h,method:"POST"},a))];case 1:return[4,(p=U.sent()).json()];case 2:return P=U.sent(),[2,Promise.resolve({data:P,status:p.status,statusText:p.statusText,headers:p.headers})]}})})},k}(),N=function(){function k(u){this.appkey=u}return k.prototype.getItem=function(u){try{return window.localStorage.getItem(this.getStoreKey(u))}catch(h){return""}},k.prototype.removeItem=function(u){try{window.localStorage.removeItem(this.getStoreKey(u))}catch(h){}},k.prototype.setItem=function(u,h){try{window.localStorage.setItem(this.getStoreKey(u),h)}catch(a){}},k.prototype.setSessionItem=function(u,h){try{window.sessionStorage.setItem(this.getStoreKey(u),h)}catch(a){}},k.prototype.getSessionItem=function(u){try{return window.sessionStorage.getItem(this.getStoreKey(u))}catch(h){return""}},k.prototype.getStoreKey=function(u){return q+this.appkey+"_"+u},k.prototype.createDeviceId=function(){try{var u=window.localStorage.getItem(W);return u||(u=function(h){for(var a="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",p="",P=0;P<h;P++)p+=a.charAt(Math.floor(Math.random()*a.length));return p}(32),window.localStorage.setItem(W,u)),u}catch(h){return""}},k.prototype.clear=function(){try{for(var u=window.localStorage.length,h=0;h<u;h++){var a=window.localStorage.key(h);(a==null?void 0:a.substr(0,9))==q&&window.localStorage.removeItem(a)}}catch(p){}},k.prototype.getStoreCount=function(){var u=0;try{u=window.localStorage.length}catch(h){}return u},k}(),oe=function(k){var u={exports:{}};return k(u,u.exports),u.exports}(function(k,u){k.exports=function(){function h(U,re,se,be,ee,He,ie){try{var ze=U[He](ie),Be=ze.value}catch(Fe){return void se(Fe)}ze.done?re(Be):Promise.resolve(Be).then(be,ee)}function a(U,re){for(var se=0;se<re.length;se++){var be=re[se];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(U,be.key,be)}}var p,P=(function(U){U=function(re){var se,be=Object.prototype,ee=be.hasOwnProperty,He=typeof Symbol=="function"?Symbol:{},ie=He.iterator||"@@iterator",ze=He.asyncIterator||"@@asyncIterator",Be=He.toStringTag||"@@toStringTag";function Fe(d,c,y){return Object.defineProperty(d,c,{value:y,enumerable:!0,configurable:!0,writable:!0}),d[c]}try{Fe({},"")}catch(d){Fe=function(y,T,E){return y[T]=E}}function Xe(d,c,y,T){var E,R,O,A;return c=c&&c.prototype instanceof nt?c:nt,c=Object.create(c.prototype),T=new o(T||[]),c._invoke=(E=d,R=y,O=T,A=We,function(z,J){if(A===ot)throw new Error("Generator is already running");if(A===vt){if(z==="throw")throw J;return s()}for(O.method=z,O.arg=J;;){var Ie=O.delegate;if(Ie){var ke=function ce(_e,Ee){var Pe;if((Pe=_e.iterator[Ee.method])===se){if(Ee.delegate=null,Ee.method==="throw"){if(_e.iterator.return&&(Ee.method="return",Ee.arg=se,ce(_e,Ee),Ee.method==="throw"))return Ye;Ee.method="throw",Ee.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ye}return(Pe=qe(Pe,_e.iterator,Ee.arg)).type==="throw"?(Ee.method="throw",Ee.arg=Pe.arg,Ee.delegate=null,Ye):(Pe=Pe.arg)?Pe.done?(Ee[_e.resultName]=Pe.value,Ee.next=_e.nextLoc,Ee.method!=="return"&&(Ee.method="next",Ee.arg=se),Ee.delegate=null,Ye):Pe:(Ee.method="throw",Ee.arg=new TypeError("iterator result is not an object"),Ee.delegate=null,Ye)}(Ie,O);if(ke){if(ke===Ye)continue;return ke}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(A===We)throw A=vt,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);if(A=ot,(ke=qe(E,R,O)).type==="normal"){if(A=O.done?vt:$e,ke.arg!==Ye)return{value:ke.arg,done:O.done}}else ke.type==="throw"&&(A=vt,O.method="throw",O.arg=ke.arg)}}),c}function qe(d,c,y){try{return{type:"normal",arg:d.call(c,y)}}catch(T){return{type:"throw",arg:T}}}re.wrap=Xe;var We="suspendedStart",$e="suspendedYield",ot="executing",vt="completed",Ye={};function nt(){}function et(){}function i(){}var v={};v[ie]=function(){return this},(He=(He=Object.getPrototypeOf)&&He(He(n([]))))&&He!==be&&ee.call(He,ie)&&(v=He);var C=i.prototype=nt.prototype=Object.create(v);function M(d){["next","throw","return"].forEach(function(c){Fe(d,c,function(y){return this._invoke(c,y)})})}function ve(d,c){var y;this._invoke=function(T,E){function R(){return new c(function(O,A){(function z(J,Ie,ke,ce){if((J=qe(d[J],d,Ie)).type!=="throw"){var _e=J.arg;return(Ie=_e.value)&&w(Ie)=="object"&&ee.call(Ie,"__await")?c.resolve(Ie.__await).then(function(Ee){z("next",Ee,ke,ce)},function(Ee){z("throw",Ee,ke,ce)}):c.resolve(Ie).then(function(Ee){_e.value=Ee,ke(_e)},function(Ee){return z("throw",Ee,ke,ce)})}ce(J.arg)})(T,E,O,A)})}return y=y?y.then(R,R):R()}}function fe(d){var c={tryLoc:d[0]};1 in d&&(c.catchLoc=d[1]),2 in d&&(c.finallyLoc=d[2],c.afterLoc=d[3]),this.tryEntries.push(c)}function e(d){var c=d.completion||{};c.type="normal",delete c.arg,d.completion=c}function o(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(fe,this),this.reset(!0)}function n(d){if(d){if(c=d[ie])return c.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var c,y=-1;return(c=function T(){for(;++y<d.length;)if(ee.call(d,y))return T.value=d[y],T.done=!1,T;return T.value=se,T.done=!0,T}).next=c}}return{next:s}}function s(){return{value:se,done:!0}}return((et.prototype=C.constructor=i).constructor=et).displayName=Fe(i,Be,"GeneratorFunction"),re.isGeneratorFunction=function(d){return!!(d=typeof d=="function"&&d.constructor)&&(d===et||(d.displayName||d.name)==="GeneratorFunction")},re.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,i):(d.__proto__=i,Fe(d,Be,"GeneratorFunction")),d.prototype=Object.create(C),d},re.awrap=function(d){return{__await:d}},M(ve.prototype),ve.prototype[ze]=function(){return this},re.AsyncIterator=ve,re.async=function(d,c,y,T,E){E===void 0&&(E=Promise);var R=new ve(Xe(d,c,y,T),E);return re.isGeneratorFunction(c)?R:R.next().then(function(O){return O.done?O.value:R.next()})},M(C),Fe(C,Be,"Generator"),C[ie]=function(){return this},C.toString=function(){return"[object Generator]"},re.keys=function(d){var c,y=[];for(c in d)y.push(c);return y.reverse(),function T(){for(;y.length;){var E=y.pop();if(E in d)return T.value=E,T.done=!1,T}return T.done=!0,T}},re.values=n,o.prototype={constructor:o,reset:function(c){if(this.prev=0,this.next=0,this.sent=this._sent=se,this.done=!1,this.delegate=null,this.method="next",this.arg=se,this.tryEntries.forEach(e),!c)for(var y in this)y.charAt(0)==="t"&&ee.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=se)},stop:function(){this.done=!0;var c=this.tryEntries[0].completion;if(c.type==="throw")throw c.arg;return this.rval},dispatchException:function(c){if(this.done)throw c;var y=this;function T(J,Ie){return O.type="throw",O.arg=c,y.next=J,Ie&&(y.method="next",y.arg=se),!!Ie}for(var E=this.tryEntries.length-1;0<=E;--E){var R=this.tryEntries[E],O=R.completion;if(R.tryLoc==="root")return T("end");if(R.tryLoc<=this.prev){var A=ee.call(R,"catchLoc"),z=ee.call(R,"finallyLoc");if(A&&z){if(this.prev<R.catchLoc)return T(R.catchLoc,!0);if(this.prev<R.finallyLoc)return T(R.finallyLoc)}else if(A){if(this.prev<R.catchLoc)return T(R.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return T(R.finallyLoc)}}}},abrupt:function(c,y){for(var T=this.tryEntries.length-1;0<=T;--T){var E=this.tryEntries[T];if(E.tryLoc<=this.prev&&ee.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var R=E;break}}var O=(R=R&&(c==="break"||c==="continue")&&R.tryLoc<=y&&y<=R.finallyLoc?null:R)?R.completion:{};return O.type=c,O.arg=y,R?(this.method="next",this.next=R.finallyLoc,Ye):this.complete(O)},complete:function(c,y){if(c.type==="throw")throw c.arg;return c.type==="break"||c.type==="continue"?this.next=c.arg:c.type==="return"?(this.rval=this.arg=c.arg,this.method="return",this.next="end"):c.type==="normal"&&y&&(this.next=y),Ye},finish:function(c){for(var y=this.tryEntries.length-1;0<=y;--y){var T=this.tryEntries[y];if(T.finallyLoc===c)return this.complete(T.completion,T.afterLoc),e(T),Ye}},catch:function(c){for(var y=this.tryEntries.length-1;0<=y;--y){var T=this.tryEntries[y];if(T.tryLoc===c){var E,R=T.completion;return R.type==="throw"&&(E=R.arg,e(T)),E}}throw new Error("illegal catch attempt")},delegateYield:function(c,y,T){return this.delegate={iterator:n(c),resultName:y,nextLoc:T},this.method==="next"&&(this.arg=se),Ye}},re}(U.exports);try{regeneratorRuntime=U}catch(re){Function("r","regeneratorRuntime = r")(U)}}(p={exports:{}}),p.exports);return function(){function U(He){(function(Be,Fe){if(!(Be instanceof Fe))throw new TypeError("Cannot call a class as a function")})(this,U),this.version="1.0.0";var ie=Array.prototype.map,ze=Array.prototype.forEach;He&&(this.hasher=He),this.each=function(Be,Fe,Xe){if(Be!=null){if(ze&&Be.forEach===ze)Be.forEach(Fe,Xe);else if(Be.length===+Be.length){for(var qe=0,We=Be.length;qe<We;qe++)if(Fe.call(Xe,Be[qe],qe,Be)==={})return}else for(var $e in Be)if(Be.hasOwnProperty($e)&&Fe.call(Xe,Be[$e],$e,Be)==={})return}},this.map=function(Be,Fe,Xe){var qe=[];return Be==null?qe:ie&&Be.map===ie?Be.map(Fe,Xe):(this.each(Be,function(We,$e,ot){qe[qe.length]=Fe.call(Xe,We,$e,ot)}),qe)}}var re,se,be,ee;return re=U,(se=[{key:"getQimei36",value:function(ie,ze){var Be=this;this.getHid().then(function(Fe){var Xe="3BJr"+ie.substring(0,2)+(Fe&&Fe.substring(3,7)),qe=new XMLHttpRequest;qe.open("POST","https://snowflake.qq.com/ola/h5",!0),qe.setRequestHeader("Content-Type","application/json"),qe.onreadystatechange=function(){if(qe.readyState==XMLHttpRequest.DONE&&qe.status==200)try{ze&&ze(JSON.parse(qe.responseText))}catch(We){ze(null)}},qe.send(JSON.stringify({appKey:ie,hid:Fe,sign:Xe,version:Be.version}))})}},{key:"getHid",value:(be=P.mark(function He(){var ie,ze;return P.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return(ie=[]).push((Fe=void 0,(Fe=[Math.floor(window.screen.width*window.devicePixelRatio),Math.floor(window.screen.height*window.devicePixelRatio)]).sort().reverse(),Fe.join("x"))),ie.push((Fe=void 0,(Fe=[Math.floor(window.screen.availWidth*window.devicePixelRatio),Math.floor(window.screen.availHeight*window.devicePixelRatio)]).sort().reverse(),Fe.join("x"))),ie.push(navigator.deviceMemory),ie.push(!!window.sessionStorage),ie.push(!!window.indexedDB),ie.push(navigator.productSub),ie.push(navigator.hardwareConcurrency),ie.push(this.getWebglVendorAndRenderer()),ie.push(new Date().getTimezoneOffset()),Be.next=12,this.getFactor();case 12:if(ze=Be.sent,ie.push(ze),this.hasher)return Be.abrupt("return",this.hasher(ie.join("###"),31));Be.next=18;break;case 18:return Be.abrupt("return",this.x64hash128(ie.join("###"),31));case 19:case"end":return Be.stop()}var Fe},He,this)}),ee=function(){var ie=this,ze=arguments;return new Promise(function(Be,Fe){var Xe=be.apply(ie,ze);function qe($e){h(Xe,Be,Fe,qe,We,"next",$e)}function We($e){h(Xe,Be,Fe,qe,We,"throw",$e)}qe(void 0)})},function(){return ee.apply(this,arguments)})},{key:"getUserAgent",value:function(){return navigator.userAgent}},{key:"getNative",value:function(){var ie=this;this.getHid().then(function(ze){JSInterface.callback(ie.version,ze,ie.getUserAgent())})}},{key:"getWebglVendorAndRenderer",value:function(){try{var ie=function(){var Xe=document.createElement("canvas"),qe=null;try{qe=Xe.getContext("webgl")||Xe.getContext("experimental-webgl")}catch(We){}return qe||null}(),ze=ie.getExtension("WEBGL_debug_renderer_info"),Be=[ie.getParameter(ze.UNMASKED_VENDOR_WEBGL),ie.getParameter(ze.UNMASKED_RENDERER_WEBGL)].join("~"),Fe=ie.getExtension("WEBGL_lose_context");return Fe!=null&&Fe.loseContext(),Be}catch(Xe){return null}}},{key:"getFactor",value:function(){return new Promise(function(ie,ze){var Be=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection;Be?function(){var Fe=new Be({iceServers:[]});Fe.createDataChannel("",{reliable:!1}),Fe.onicecandidate=function($e){$e.candidate&&We("a=".concat($e.candidate.candidate))},Fe.createOffer(function($e){We($e.sdp),Fe.setLocalDescription($e)},function($e){});var Xe=Object.create(null);function qe($e){if(!($e in Xe)){Xe[$e]=!0;for(var ot=Object.keys(Xe).filter(function(Ye){return Xe[Ye]}),vt=0;vt<ot.length;vt++)16<ot[vt].length&&(ot.splice(vt,1),vt--);ie(ot[0])}}function We($e){(0<arguments.length&&$e!==void 0?$e:"").split(`\r
`).forEach(function(ot,vt,Ye){var nt,et;~ot.indexOf("a=candidate")?(et=(nt=ot.split(" "))[4],nt[7]==="host"&&qe(et)):~ot.indexOf("c=")&&qe(ot.split(" ")[2])})}Xe["0.0.0.0"]=!1}():ie(null)})}},{key:"x64hash128",value:function(ie,ze){for(var Be=function(fe,e){fe=[fe[0]>>>16,65535&fe[0],fe[1]>>>16,65535&fe[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var o=[0,0,0,0];return o[3]+=fe[3]+e[3],o[2]+=o[3]>>>16,o[3]&=65535,o[2]+=fe[2]+e[2],o[1]+=o[2]>>>16,o[2]&=65535,o[1]+=fe[1]+e[1],o[0]+=o[1]>>>16,o[1]&=65535,o[0]+=fe[0]+e[0],o[0]&=65535,[o[0]<<16|o[1],o[2]<<16|o[3]]},Fe=function(fe,e){fe=[fe[0]>>>16,65535&fe[0],fe[1]>>>16,65535&fe[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var o=[0,0,0,0];return o[3]+=fe[3]*e[3],o[2]+=o[3]>>>16,o[3]&=65535,o[2]+=fe[2]*e[3],o[1]+=o[2]>>>16,o[2]&=65535,o[2]+=fe[3]*e[2],o[1]+=o[2]>>>16,o[2]&=65535,o[1]+=fe[1]*e[3],o[0]+=o[1]>>>16,o[1]&=65535,o[1]+=fe[2]*e[2],o[0]+=o[1]>>>16,o[1]&=65535,o[1]+=fe[3]*e[1],o[0]+=o[1]>>>16,o[1]&=65535,o[0]+=fe[0]*e[3]+fe[1]*e[2]+fe[2]*e[1]+fe[3]*e[0],o[0]&=65535,[o[0]<<16|o[1],o[2]<<16|o[3]]},Xe=function(fe,e){return(e%=64)==32?[fe[1],fe[0]]:e<32?[fe[0]<<e|fe[1]>>>32-e,fe[1]<<e|fe[0]>>>32-e]:[fe[1]<<(e-=32)|fe[0]>>>32-e,fe[0]<<e|fe[1]>>>32-e]},qe=function(fe,e){return(e%=64)==0?fe:e<32?[fe[0]<<e|fe[1]>>>32-e,fe[1]<<e]:[fe[1]<<e-32,0]},We=function(fe,e){return[fe[0]^e[0],fe[1]^e[1]]},$e=function(fe){return fe=We(fe,[0,fe[0]>>>1]),fe=Fe(fe,[4283543511,3981806797]),fe=We(fe,[0,fe[0]>>>1]),fe=Fe(fe,[3301882366,444984403]),We(fe,[0,fe[0]>>>1])},ot=(ie=ie||"").length%16,vt=ie.length-ot,Ye=[0,ze=ze||0],nt=[0,ze],et=[0,0],i=[0,0],v=[2277735313,289559509],C=[1291169091,658871167],M=0;M<vt;M+=16)et=[255&ie.charCodeAt(M+4)|(255&ie.charCodeAt(M+5))<<8|(255&ie.charCodeAt(M+6))<<16|(255&ie.charCodeAt(M+7))<<24,255&ie.charCodeAt(M)|(255&ie.charCodeAt(M+1))<<8|(255&ie.charCodeAt(M+2))<<16|(255&ie.charCodeAt(M+3))<<24],i=[255&ie.charCodeAt(M+12)|(255&ie.charCodeAt(M+13))<<8|(255&ie.charCodeAt(M+14))<<16|(255&ie.charCodeAt(M+15))<<24,255&ie.charCodeAt(M+8)|(255&ie.charCodeAt(M+9))<<8|(255&ie.charCodeAt(M+10))<<16|(255&ie.charCodeAt(M+11))<<24],et=Xe(et=Fe(et,v),31),et=Fe(et,C),Ye=Be(Ye=Xe(Ye=We(Ye,et),27),nt),Ye=Be(Fe(Ye,[0,5]),[0,1390208809]),i=Xe(i=Fe(i,C),33),i=Fe(i,v),nt=Be(nt=Xe(nt=We(nt,i),31),Ye),nt=Be(Fe(nt,[0,5]),[0,944331445]);switch(et=[0,0],i=[0,0],ot){case 15:i=We(i,qe([0,ie.charCodeAt(M+14)],48));case 14:i=We(i,qe([0,ie.charCodeAt(M+13)],40));case 13:i=We(i,qe([0,ie.charCodeAt(M+12)],32));case 12:i=We(i,qe([0,ie.charCodeAt(M+11)],24));case 11:i=We(i,qe([0,ie.charCodeAt(M+10)],16));case 10:i=We(i,qe([0,ie.charCodeAt(M+9)],8));case 9:i=We(i,[0,ie.charCodeAt(M+8)]),i=Xe(i=Fe(i,C),33),i=Fe(i,v),nt=We(nt,i);case 8:et=We(et,qe([0,ie.charCodeAt(M+7)],56));case 7:et=We(et,qe([0,ie.charCodeAt(M+6)],48));case 6:et=We(et,qe([0,ie.charCodeAt(M+5)],40));case 5:et=We(et,qe([0,ie.charCodeAt(M+4)],32));case 4:et=We(et,qe([0,ie.charCodeAt(M+3)],24));case 3:et=We(et,qe([0,ie.charCodeAt(M+2)],16));case 2:et=We(et,qe([0,ie.charCodeAt(M+1)],8));case 1:et=We(et,[ie.charCodeAt(M)]),et=Xe(et=Fe(et,v),31),et=Fe(et,C),Ye=We(Ye,et)}return Ye=We(Ye,[0,ie.length]),nt=Be(nt=We(nt,[0,ie.length]),Ye=Be(Ye,nt)),Ye=$e(Ye),nt=Be(nt=$e(nt),Ye=Be(Ye,nt)),("00000000"+(Ye[0]>>>0).toString(16)).slice(-8)+("00000000"+(Ye[1]>>>0).toString(16)).slice(-8)+("00000000"+(nt[0]>>>0).toString(16)).slice(-8)+("00000000"+(nt[1]>>>0).toString(16)).slice(-8)}}])&&a(re.prototype,se),U}()}()}),Se="logid_start",je="4.5.6-web";return function(k){function u(h){var a=k.call(this,h)||this;a.qimei36="",a.uselessCycleTaskNum=0,a.underWeakNet=!1,a.send=function(re,se,be){a.storage.setItem(te,Date.now().toString()),a.network.post(a.uploadUrl||a.strategy.getUploadUrl(),re.data).then(function(ee){var He;((He=ee==null?void 0:ee.data)===null||He===void 0?void 0:He.result)==100?a.delayTime=1e3*ee.data.delayTime:a.delayTime=0,se&&se(re.data),re.data.events.forEach(function(ie){a.store.removeEvent(ie).then(function(){a.removeSendingId(b(ie.mapValue))})}),a.doCustomCycleTask()}).catch(function(ee){var He=re.data.events;a.errorReport.reportError(ee.code?ee.code.toString():"600",ee.message),be&&be(re.data);var ie=JSON.parse(a.storage.getItem(K));He.forEach(function(ze){ie&&ie.indexOf(b(ze))!=-1&&a.store.insertEvent(ze,function(Be,Fe){Be&&a.errorReport.reportError("604","insertEvent fail!")}),a.removeSendingId(b(ze))}),a.monitorUploadFailed()})};var p,P,U=De();return a.isUnderIE8=U>0&&U<8,a.isUnderIE8||(a.isUnderIE=U>0,h.needInitQimei&&a.initQimei(h.appkey),a.network=new H(h),a.storage=new N(h.appkey),a.initCommonInfo(h),a.store=new Re(h.appkey,a.storage),a.errorReport=new f(a.config,a.commonInfo,"web",a.network),a.strategy=new G(a.config,a.commonInfo,a.storage,a.network),a.logidStartTime=a.storage.getItem(Se),a.logidStartTime||(a.logidStartTime=Date.now().toString(),a.storage.setItem(Se,a.logidStartTime)),p=a.logidStartTime,P=Date.now()-Number.parseFloat(p),Math.floor(P/864e5)>=365&&a.storage.clear(),a.initSession(h),a.onDirectUserAction("rqd_js_init",{}),setTimeout(function(){return a.lifeCycle.emit("init")},0),a.initDelayTime=h.delay?h.delay:1e3,a.cycleTask(a.initDelayTime)),a}return function(h,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function p(){this.constructor=h}j(h,a),h.prototype=a===null?Object.create(a):(p.prototype=a.prototype,new p)}(u,k),u.prototype.initQimei=function(h){var a=this;new oe().getQimei36(h,function(p){a.qimei36=p.q36})},u.prototype.initSession=function(h){var a=18e5;h.sessionDuration&&h.sessionDuration>3e4&&(a=h.sessionDuration),this.beaconSession=new Z(this.storage,a,this)},u.prototype.initCommonInfo=function(h){var a=Number(this.storage.getItem(te));try{var p=JSON.parse(this.storage.getItem(K));(Date.now()-a>3e4||!p)&&this.storage.setItem(K,JSON.stringify([]))}catch(U){}h.uploadUrl&&(this.uploadUrl=h.uploadUrl+"?appkey="+h.appkey);var P=[window.screen.width,window.screen.height];window.devicePixelRatio&&P.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:P.join("*"),channelID:h.channelID?String(h.channelID):"",openid:h.openid?String(h.openid):"",unid:h.unionid?String(h.unionid):"",sdkVersion:je},this.config.appVersion=h.versionCode?String(h.versionCode):"",this.config.strictMode=h.strictMode},u.prototype.cycleTask=function(h){var a=this;this.intervalID=window.setInterval(function(){a.store.getEvents().then(function(p){var P=[],U=JSON.parse(a.storage.getItem(K));U||(U=[]),p&&p.forEach(function(re){var se=b(re.mapValue);U.indexOf(se)==-1&&(P.push(re),U.push(se))}),P.length!=0&&(a.storage.setItem(K,JSON.stringify(U)),a._normalLogPipeline(a.assembleData(P)))}).catch(function(p){})},h)},u.prototype.onReport=function(h,a,p){var P=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{var U=this.generateData(h,a,p);if(p&&this.delayTime==0&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(U));else{var re=U.shift();re&&this.store.insertEvent(re,function(se){se&&P.errorReport.reportError("604","insertEvent fail!")}).catch(function(se){P._normalLogPipeline(P.assembleData(U))})}}},u.prototype.onSendBeacon=function(h,a){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{var p=this.assembleData(this.generateData(h,a,!0));typeof navigator.sendBeacon=="function"&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(p))}},u.prototype.generateData=function(h,a,p){var P=[],U="4.5.6-web_"+(p?"direct_log_id":"normal_log_id"),re=Number(this.storage.getItem(U));return re=re||1,a=ae(ae({},a),{A99:p?"Y":"N",A100:re.toString(),A72:je,A88:this.logidStartTime}),re++,this.storage.setItem(U,re.toString()),P.push({eventCode:h,eventTime:Date.now().toString(),mapValue:Ne(a,this.config.strictMode)}),P},u.prototype.assembleData=function(h){var a=this.beaconSession.getSession();return{appVersion:this.config.appVersion?F(this.config.appVersion):"",sdkId:"js",sdkVersion:je,mainAppKey:this.config.appkey,platformId:3,common:Ne(ae(ae({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:a.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:h}},u.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},u.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},u}(D)})}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./lib/crypto.js":function(g,S,r){(function(l){var t=r("./node_modules/@babel/runtime/helpers/typeof.js"),V=V||function(w,j){var ae={},L=ae.lib={},I=function(){},q=L.Base={extend:function(b){I.prototype=this;var m=new I;return b&&m.mixIn(b),m.hasOwnProperty("init")||(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var m in b)b.hasOwnProperty(m)&&(this[m]=b[m]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},W=L.WordArray=q.extend({init:function(b,m){b=this.words=b||[],this.sigBytes=m!=j?m:4*b.length},toString:function(b){return(b||K).stringify(this)},concat:function(b){var m=this.words,D=b.words,f=this.sigBytes;if(b=b.sigBytes,this.clamp(),f%4)for(var G=0;G<b;G++)m[f+G>>>2]|=(D[G>>>2]>>>24-8*(G%4)&255)<<24-8*((f+G)%4);else if(65535<D.length)for(G=0;G<b;G+=4)m[f+G>>>2]=D[G>>>2];else m.push.apply(m,D);return this.sigBytes+=b,this},clamp:function(){var b=this.words,m=this.sigBytes;b[m>>>2]&=4294967295<<32-8*(m%4),b.length=w.ceil(m/4)},clone:function(){var b=q.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var m=[],D=0;D<b;D+=4)m.push(4294967296*w.random()|0);return new W.init(m,b)}}),te=ae.enc={},K=te.Hex={stringify:function(b){var m=b.words;b=b.sigBytes;for(var D=[],f=0;f<b;f++){var G=m[f>>>2]>>>24-8*(f%4)&255;D.push((G>>>4).toString(16)),D.push((G&15).toString(16))}return D.join("")},parse:function(b){for(var m=b.length,D=[],f=0;f<m;f+=2)D[f>>>3]|=parseInt(b.substr(f,2),16)<<24-4*(f%8);return new W.init(D,m/2)}},$=te.Latin1={stringify:function(b){var m=b.words;b=b.sigBytes;for(var D=[],f=0;f<b;f++)D.push(String.fromCharCode(m[f>>>2]>>>24-8*(f%4)&255));return D.join("")},parse:function(b){for(var m=b.length,D=[],f=0;f<m;f++)D[f>>>2]|=(b.charCodeAt(f)&255)<<24-8*(f%4);return new W.init(D,m)}},le=te.Utf8={stringify:function(b){try{return decodeURIComponent(escape($.stringify(b)))}catch(m){throw Error("Malformed UTF-8 data")}},parse:function(b){return $.parse(unescape(encodeURIComponent(b)))}},X=L.BufferedBlockAlgorithm=q.extend({reset:function(){this._data=new W.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=le.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var m=this._data,D=m.words,f=m.sigBytes,G=this.blockSize,_=f/(4*G),_=b?w.ceil(_):w.max((_|0)-this._minBufferSize,0);if(b=_*G,f=w.min(4*b,f),b){for(var Z=0;Z<b;Z+=G)this._doProcessBlock(D,Z);Z=D.splice(0,b),m.sigBytes-=f}return new W.init(Z,f)},clone:function(){var b=q.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});L.Hasher=X.extend({cfg:q.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){X.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){return b&&this._append(b),this._doFinalize()},blockSize:16,_createHelper:function(b){return function(m,D){return new b.init(D).finalize(m)}},_createHmacHelper:function(b){return function(m,D){return new Ne.HMAC.init(b,D).finalize(m)}}});var Ne=ae.algo={};return ae}(Math);(function(){var w=V,j=w.lib,ae=j.WordArray,L=j.Hasher,I=[],j=w.algo.SHA1=L.extend({_doReset:function(){this._hash=new ae.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(W,te){for(var K=this._hash.words,$=K[0],le=K[1],X=K[2],Ne=K[3],F=K[4],b=0;80>b;b++){if(16>b)I[b]=W[te+b]|0;else{var m=I[b-3]^I[b-8]^I[b-14]^I[b-16];I[b]=m<<1|m>>>31}m=($<<5|$>>>27)+F+I[b],m=20>b?m+((le&X|~le&Ne)+1518500249):40>b?m+((le^X^Ne)+1859775393):60>b?m+((le&X|le&Ne|X&Ne)-1894007588):m+((le^X^Ne)-899497514),F=Ne,Ne=X,X=le<<30|le>>>2,le=$,$=m}K[0]=K[0]+$|0,K[1]=K[1]+le|0,K[2]=K[2]+X|0,K[3]=K[3]+Ne|0,K[4]=K[4]+F|0},_doFinalize:function(){var W=this._data,te=W.words,K=8*this._nDataBytes,$=8*W.sigBytes;return te[$>>>5]|=128<<24-$%32,te[($+64>>>9<<4)+14]=Math.floor(K/4294967296),te[($+64>>>9<<4)+15]=K,W.sigBytes=4*te.length,this._process(),this._hash},clone:function(){var W=L.clone.call(this);return W._hash=this._hash.clone(),W}});w.SHA1=L._createHelper(j),w.HmacSHA1=L._createHmacHelper(j)})(),function(){var w=V,j=w.enc.Utf8;w.algo.HMAC=w.lib.Base.extend({init:function(L,I){L=this._hasher=new L.init,typeof I=="string"&&(I=j.parse(I));var q=L.blockSize,W=4*q;I.sigBytes>W&&(I=L.finalize(I)),I.clamp();for(var te=this._oKey=I.clone(),K=this._iKey=I.clone(),$=te.words,le=K.words,X=0;X<q;X++)$[X]^=1549556828,le[X]^=909522486;te.sigBytes=K.sigBytes=W,this.reset()},reset:function(){var L=this._hasher;L.reset(),L.update(this._iKey)},update:function(L){return this._hasher.update(L),this},finalize:function(L){var I=this._hasher;return L=I.finalize(L),I.reset(),I.finalize(this._oKey.clone().concat(L))}})}(),function(){var w=V,j=w.lib,ae=j.WordArray,L=w.enc,I=L.Base64={stringify:function(W){var te=W.words,K=W.sigBytes,$=this._map;W.clamp();for(var le=[],X=0;X<K;X+=3)for(var Ne=te[X>>>2]>>>24-X%4*8&255,F=te[X+1>>>2]>>>24-(X+1)%4*8&255,b=te[X+2>>>2]>>>24-(X+2)%4*8&255,m=Ne<<16|F<<8|b,D=0;D<4&&X+D*.75<K;D++)le.push($.charAt(m>>>6*(3-D)&63));var f=$.charAt(64);if(f)for(;le.length%4;)le.push(f);return le.join("")},parse:function(W){var te=W.length,K=this._map,$=K.charAt(64);if($){var le=W.indexOf($);le!=-1&&(te=le)}for(var X=[],Ne=0,F=0;F<te;F++)if(F%4){var b=K.indexOf(W.charAt(F-1))<<F%4*2,m=K.indexOf(W.charAt(F))>>>6-F%4*2;X[Ne>>>2]|=(b|m)<<24-Ne%4*8,Ne++}return ae.create(X,Ne)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t(l)==="object"?l.exports=V:window.CryptoJS=V}).call(this,r("./node_modules/webpack/buildin/module.js")(g))},"./lib/json2xml.js":function(g,S,r){var l=r("./node_modules/@babel/runtime/helpers/typeof.js"),t="a-zA-Z_\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FFF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",V="-.0-9\xB7\u0300-\u036F\u203F\u2040",w=new RegExp("^([^"+t+"])|^((x|X)(m|M)(l|L))|([^"+t+V+"])","g"),j=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,ae=function(te){var K=[];if(te instanceof Object)for(var $ in te)te.hasOwnProperty($)&&K.push($);return K},L=function(te,K){var $=function(X,Ne,F,b,m){var D=K.indent!==void 0?K.indent:"	",f=K.prettyPrint?`
`+new Array(b).join(D):"";K.removeIllegalNameCharacters&&(X=X.replace(w,"_"));var G=[f,"<",X,F||""];return Ne&&Ne.length>0?(G.push(">"),G.push(Ne),m&&G.push(f),G.push("</"),G.push(X),G.push(">")):G.push("/>"),G.join("")};return function le(X,Ne,F){var b=l(X);switch((Array.isArray?Array.isArray(X):X instanceof Array)?b="array":X instanceof Date&&(b="date"),b){case"array":var m=[];return X.map(function(_){m.push(le(_,1,F+1))}),K.prettyPrint&&m.push(`
`),m.join("");break;case"date":return X.toJSON?X.toJSON():X+"";case"object":var D=[];for(var f in X)if(X.hasOwnProperty(f))if(X[f]instanceof Array)for(var G=0;G<X[f].length;G++)X[f].hasOwnProperty(G)&&D.push($(f,le(X[f][G],0,F+1),null,F+1,ae(X[f][G]).length));else D.push($(f,le(X[f],0,F+1),null,F+1));return K.prettyPrint&&D.length>0&&D.push(`
`),D.join("");break;case"function":return X();default:return K.escape?q(X):""+X}}(te,0,0)},I=function(te){var K=['<?xml version="1.0" encoding="UTF-8"'];return te&&K.push(' standalone="yes"'),K.push("?>"),K.join("")};function q(W){return(""+W).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(j,"")}g.exports=function(W,te){if(te||(te={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),typeof W=="string")try{W=JSON.parse(W.toString())}catch(X){return!1}var K="",$="";te&&(l(te)=="object"?(te.xmlHeader&&(K=I(!!te.xmlHeader.standalone)),typeof te.docType!="undefined"&&($="<!DOCTYPE "+te.docType+">")):K=I()),te=te||{};var le=[K,te.prettyPrint&&$?`
`:"",$,L(W,te)];return le.join("").replace(/\n{2,}/g,`
`).replace(/\s+$/g,"")}},"./lib/md5.js":function(module,exports,__nested_webpack_require_93647__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__nested_webpack_require_93647__("./node_modules/@babel/runtime/helpers/typeof.js");(function(){"use strict";var ERROR="input is invalid type",WINDOW=(typeof window=="undefined"?"undefined":_typeof(window))==="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&(typeof self=="undefined"?"undefined":_typeof(self))==="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process=="undefined"?"undefined":_typeof(process))==="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&_typeof(module)==="object"&&module.exports,AMD=__nested_webpack_require_93647__("./node_modules/webpack/buildin/amd-options.js"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(g){return _typeof(g)==="object"&&g.buffer&&g.buffer.constructor===ArrayBuffer});var createOutputMethod=function(S){return function(r,l){return new Md5(!0).update(r,l)[S]()}},createMethod=function(){var S=createOutputMethod("hex");NODE_JS&&(S=nodeWrap(S)),S.getCtx=S.create=function(){return new Md5},S.update=function(t){return S.create().update(t)};for(var r=0;r<OUTPUT_TYPES.length;++r){var l=OUTPUT_TYPES[r];S[l]=createOutputMethod(l)}return S},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(S){if(typeof S=="string")return crypto.createHash("md5").update(S,"utf8").digest("hex");if(S==null)throw ERROR;return S.constructor===ArrayBuffer&&(S=new Uint8Array(S)),Array.isArray(S)||ArrayBuffer.isView(S)||S.constructor===Buffer?crypto.createHash("md5").update(new Buffer(S)).digest("hex"):method(S)};return nodeMethod};function Md5(g){if(g)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var S=new ArrayBuffer(68);this.buffer8=new Uint8Array(S),this.blocks=new Uint32Array(S)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(g,S){if(!this.finalized){for(var r,l=0,t,V=g.length,w=this.blocks,j=this.buffer8;l<V;){if(this.hashed&&(this.hashed=!1,w[0]=w[16],w[16]=w[1]=w[2]=w[3]=w[4]=w[5]=w[6]=w[7]=w[8]=w[9]=w[10]=w[11]=w[12]=w[13]=w[14]=w[15]=0),ARRAY_BUFFER)for(t=this.start;l<V&&t<64;++l)r=g.charCodeAt(l),S||r<128?j[t++]=r:r<2048?(j[t++]=192|r>>6,j[t++]=128|r&63):r<55296||r>=57344?(j[t++]=224|r>>12,j[t++]=128|r>>6&63,j[t++]=128|r&63):(r=65536+((r&1023)<<10|g.charCodeAt(++l)&1023),j[t++]=240|r>>18,j[t++]=128|r>>12&63,j[t++]=128|r>>6&63,j[t++]=128|r&63);else for(t=this.start;l<V&&t<64;++l)r=g.charCodeAt(l),S||r<128?w[t>>2]|=r<<SHIFT[t++&3]:r<2048?(w[t>>2]|=(192|r>>6)<<SHIFT[t++&3],w[t>>2]|=(128|r&63)<<SHIFT[t++&3]):r<55296||r>=57344?(w[t>>2]|=(224|r>>12)<<SHIFT[t++&3],w[t>>2]|=(128|r>>6&63)<<SHIFT[t++&3],w[t>>2]|=(128|r&63)<<SHIFT[t++&3]):(r=65536+((r&1023)<<10|g.charCodeAt(++l)&1023),w[t>>2]|=(240|r>>18)<<SHIFT[t++&3],w[t>>2]|=(128|r>>12&63)<<SHIFT[t++&3],w[t>>2]|=(128|r>>6&63)<<SHIFT[t++&3],w[t>>2]|=(128|r&63)<<SHIFT[t++&3]);this.lastByteIndex=t,this.bytes+=t-this.start,t>=64?(this.start=t-64,this.hash(),this.hashed=!0):this.start=t}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var g=this.blocks,S=this.lastByteIndex;g[S>>2]|=EXTRA[S&3],S>=56&&(this.hashed||this.hash(),g[0]=g[16],g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0),g[14]=this.bytes<<3,g[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var g,S,r,l,t,V,w=this.blocks;this.first?(g=w[0]-680876937,g=(g<<7|g>>>25)-271733879<<0,l=(-1732584194^g&2004318071)+w[1]-117830708,l=(l<<12|l>>>20)+g<<0,r=(-271733879^l&(g^-271733879))+w[2]-1126478375,r=(r<<17|r>>>15)+l<<0,S=(g^r&(l^g))+w[3]-1316259209,S=(S<<22|S>>>10)+r<<0):(g=this.h0,S=this.h1,r=this.h2,l=this.h3,g+=(l^S&(r^l))+w[0]-680876936,g=(g<<7|g>>>25)+S<<0,l+=(r^g&(S^r))+w[1]-389564586,l=(l<<12|l>>>20)+g<<0,r+=(S^l&(g^S))+w[2]+606105819,r=(r<<17|r>>>15)+l<<0,S+=(g^r&(l^g))+w[3]-1044525330,S=(S<<22|S>>>10)+r<<0),g+=(l^S&(r^l))+w[4]-176418897,g=(g<<7|g>>>25)+S<<0,l+=(r^g&(S^r))+w[5]+1200080426,l=(l<<12|l>>>20)+g<<0,r+=(S^l&(g^S))+w[6]-1473231341,r=(r<<17|r>>>15)+l<<0,S+=(g^r&(l^g))+w[7]-45705983,S=(S<<22|S>>>10)+r<<0,g+=(l^S&(r^l))+w[8]+1770035416,g=(g<<7|g>>>25)+S<<0,l+=(r^g&(S^r))+w[9]-1958414417,l=(l<<12|l>>>20)+g<<0,r+=(S^l&(g^S))+w[10]-42063,r=(r<<17|r>>>15)+l<<0,S+=(g^r&(l^g))+w[11]-1990404162,S=(S<<22|S>>>10)+r<<0,g+=(l^S&(r^l))+w[12]+1804603682,g=(g<<7|g>>>25)+S<<0,l+=(r^g&(S^r))+w[13]-40341101,l=(l<<12|l>>>20)+g<<0,r+=(S^l&(g^S))+w[14]-1502002290,r=(r<<17|r>>>15)+l<<0,S+=(g^r&(l^g))+w[15]+1236535329,S=(S<<22|S>>>10)+r<<0,g+=(r^l&(S^r))+w[1]-165796510,g=(g<<5|g>>>27)+S<<0,l+=(S^r&(g^S))+w[6]-1069501632,l=(l<<9|l>>>23)+g<<0,r+=(g^S&(l^g))+w[11]+643717713,r=(r<<14|r>>>18)+l<<0,S+=(l^g&(r^l))+w[0]-373897302,S=(S<<20|S>>>12)+r<<0,g+=(r^l&(S^r))+w[5]-701558691,g=(g<<5|g>>>27)+S<<0,l+=(S^r&(g^S))+w[10]+38016083,l=(l<<9|l>>>23)+g<<0,r+=(g^S&(l^g))+w[15]-660478335,r=(r<<14|r>>>18)+l<<0,S+=(l^g&(r^l))+w[4]-405537848,S=(S<<20|S>>>12)+r<<0,g+=(r^l&(S^r))+w[9]+568446438,g=(g<<5|g>>>27)+S<<0,l+=(S^r&(g^S))+w[14]-1019803690,l=(l<<9|l>>>23)+g<<0,r+=(g^S&(l^g))+w[3]-187363961,r=(r<<14|r>>>18)+l<<0,S+=(l^g&(r^l))+w[8]+1163531501,S=(S<<20|S>>>12)+r<<0,g+=(r^l&(S^r))+w[13]-1444681467,g=(g<<5|g>>>27)+S<<0,l+=(S^r&(g^S))+w[2]-51403784,l=(l<<9|l>>>23)+g<<0,r+=(g^S&(l^g))+w[7]+1735328473,r=(r<<14|r>>>18)+l<<0,S+=(l^g&(r^l))+w[12]-1926607734,S=(S<<20|S>>>12)+r<<0,t=S^r,g+=(t^l)+w[5]-378558,g=(g<<4|g>>>28)+S<<0,l+=(t^g)+w[8]-2022574463,l=(l<<11|l>>>21)+g<<0,V=l^g,r+=(V^S)+w[11]+1839030562,r=(r<<16|r>>>16)+l<<0,S+=(V^r)+w[14]-35309556,S=(S<<23|S>>>9)+r<<0,t=S^r,g+=(t^l)+w[1]-1530992060,g=(g<<4|g>>>28)+S<<0,l+=(t^g)+w[4]+1272893353,l=(l<<11|l>>>21)+g<<0,V=l^g,r+=(V^S)+w[7]-155497632,r=(r<<16|r>>>16)+l<<0,S+=(V^r)+w[10]-1094730640,S=(S<<23|S>>>9)+r<<0,t=S^r,g+=(t^l)+w[13]+681279174,g=(g<<4|g>>>28)+S<<0,l+=(t^g)+w[0]-358537222,l=(l<<11|l>>>21)+g<<0,V=l^g,r+=(V^S)+w[3]-722521979,r=(r<<16|r>>>16)+l<<0,S+=(V^r)+w[6]+76029189,S=(S<<23|S>>>9)+r<<0,t=S^r,g+=(t^l)+w[9]-640364487,g=(g<<4|g>>>28)+S<<0,l+=(t^g)+w[12]-421815835,l=(l<<11|l>>>21)+g<<0,V=l^g,r+=(V^S)+w[15]+530742520,r=(r<<16|r>>>16)+l<<0,S+=(V^r)+w[2]-995338651,S=(S<<23|S>>>9)+r<<0,g+=(r^(S|~l))+w[0]-198630844,g=(g<<6|g>>>26)+S<<0,l+=(S^(g|~r))+w[7]+1126891415,l=(l<<10|l>>>22)+g<<0,r+=(g^(l|~S))+w[14]-1416354905,r=(r<<15|r>>>17)+l<<0,S+=(l^(r|~g))+w[5]-57434055,S=(S<<21|S>>>11)+r<<0,g+=(r^(S|~l))+w[12]+1700485571,g=(g<<6|g>>>26)+S<<0,l+=(S^(g|~r))+w[3]-1894986606,l=(l<<10|l>>>22)+g<<0,r+=(g^(l|~S))+w[10]-1051523,r=(r<<15|r>>>17)+l<<0,S+=(l^(r|~g))+w[1]-2054922799,S=(S<<21|S>>>11)+r<<0,g+=(r^(S|~l))+w[8]+1873313359,g=(g<<6|g>>>26)+S<<0,l+=(S^(g|~r))+w[15]-30611744,l=(l<<10|l>>>22)+g<<0,r+=(g^(l|~S))+w[6]-1560198380,r=(r<<15|r>>>17)+l<<0,S+=(l^(r|~g))+w[13]+1309151649,S=(S<<21|S>>>11)+r<<0,g+=(r^(S|~l))+w[4]-145523070,g=(g<<6|g>>>26)+S<<0,l+=(S^(g|~r))+w[11]-1120210379,l=(l<<10|l>>>22)+g<<0,r+=(g^(l|~S))+w[2]+718787259,r=(r<<15|r>>>17)+l<<0,S+=(l^(r|~g))+w[9]-343485551,S=(S<<21|S>>>11)+r<<0,this.first?(this.h0=g+1732584193<<0,this.h1=S-271733879<<0,this.h2=r-1732584194<<0,this.h3=l+271733878<<0,this.first=!1):(this.h0=this.h0+g<<0,this.h1=this.h1+S<<0,this.h2=this.h2+r<<0,this.h3=this.h3+l<<0)},Md5.prototype.hex=function(){this.finalize();var g=this.h0,S=this.h1,r=this.h2,l=this.h3;return HEX_CHARS[g>>4&15]+HEX_CHARS[g&15]+HEX_CHARS[g>>12&15]+HEX_CHARS[g>>8&15]+HEX_CHARS[g>>20&15]+HEX_CHARS[g>>16&15]+HEX_CHARS[g>>28&15]+HEX_CHARS[g>>24&15]+HEX_CHARS[S>>4&15]+HEX_CHARS[S&15]+HEX_CHARS[S>>12&15]+HEX_CHARS[S>>8&15]+HEX_CHARS[S>>20&15]+HEX_CHARS[S>>16&15]+HEX_CHARS[S>>28&15]+HEX_CHARS[S>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[l>>4&15]+HEX_CHARS[l&15]+HEX_CHARS[l>>12&15]+HEX_CHARS[l>>8&15]+HEX_CHARS[l>>20&15]+HEX_CHARS[l>>16&15]+HEX_CHARS[l>>28&15]+HEX_CHARS[l>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(g){if(g==="hex")return this.hex();this.finalize();var S=this.h0,r=this.h1,l=this.h2,t=this.h3,V=[S&255,S>>8&255,S>>16&255,S>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255,l&255,l>>8&255,l>>16&255,l>>24&255,t&255,t>>8&255,t>>16&255,t>>24&255];return V},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var g=new ArrayBuffer(16),S=new Uint32Array(g);return S[0]=this.h0,S[1]=this.h1,S[2]=this.h2,S[3]=this.h3,g},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var g,S,r,l="",t=this.array(),V=0;V<15;)g=t[V++],S=t[V++],r=t[V++],l+=BASE64_ENCODE_CHAR[g>>>2]+BASE64_ENCODE_CHAR[(g<<4|S>>>4)&63]+BASE64_ENCODE_CHAR[(S<<2|r>>>6)&63]+BASE64_ENCODE_CHAR[r&63];return g=t[V],l+=BASE64_ENCODE_CHAR[g>>>2]+BASE64_ENCODE_CHAR[g<<4&63]+"==",l};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__nested_webpack_require_93647__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__nested_webpack_require_93647__("./node_modules/process/browser.js"),__nested_webpack_require_93647__("./node_modules/webpack/buildin/global.js"),__nested_webpack_require_93647__("./node_modules/webpack/buildin/module.js")(module))},"./lib/request.js":function(g,S,r){var l=r("./node_modules/@babel/runtime/helpers/typeof.js"),t=function(I){switch(l(I)){case"string":return I;case"boolean":return I?"true":"false";case"number":return isFinite(I)?I:"";default:return""}},V=function(I,q,W,te){return q=q||"&",W=W||"=",I===null&&(I=void 0),l(I)==="object"?Object.keys(I).map(function(K){var $=encodeURIComponent(t(K))+W;return Array.isArray(I[K])?I[K].map(function(le){return $+encodeURIComponent(t(le))}).join(q):$+encodeURIComponent(t(I[K]))}).filter(Boolean).join(q):te?encodeURIComponent(t(te))+W+encodeURIComponent(t(I)):""},w=function(I,q,W){var te={};return q.getAllResponseHeaders().trim().split(`
`).forEach(function(K){if(K){var $=K.indexOf(":"),le=K.substr(0,$).trim().toLowerCase(),X=K.substr($+1).trim();te[le]=X}}),{error:I,statusCode:q.status,statusMessage:q.statusText,headers:te,body:W}},j=function(I,q){return!q&&q==="text"?I.responseText:I.response},ae=function(I,q){var W=(I.method||"GET").toUpperCase(),te=I.url;if(I.qs){var K=V(I.qs);K&&(te+=(te.indexOf("?")===-1?"?":"&")+K)}var $=new XMLHttpRequest;if($.open(W,te,!0),$.responseType=I.dataType||"text",I.xhrFields)for(var le in I.xhrFields)$[le]=I.xhrFields[le];var X=I.headers;if(X)for(var Ne in X)X.hasOwnProperty(Ne)&&Ne.toLowerCase()!=="content-length"&&Ne.toLowerCase()!=="user-agent"&&Ne.toLowerCase()!=="origin"&&Ne.toLowerCase()!=="host"&&$.setRequestHeader(Ne,X[Ne]);return I.onProgress&&$.upload&&($.upload.onprogress=I.onProgress),I.onDownloadProgress&&($.onprogress=I.onDownloadProgress),I.timeout&&($.timeout=I.timeout),$.ontimeout=function(F){var b=new Error("timeout");q(w(b,$))},$.onload=function(){q(w(null,$,j($,I.dataType)))},$.onerror=function(F){var b=j($,I.dataType);if(b)q(w(null,$,b));else{var m=$.statusText;!m&&$.status===0&&(m=new Error("CORS blocked or network error")),q(w(m,$,b))}},$.send(I.body||""),$};g.exports=ae},"./lib/xml2json.js":function(g,S,r){var l=r("./node_modules/@xmldom/xmldom/lib/index.js").DOMParser,t=function(){this.version="1.3.5";var w={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},j=new RegExp(/(?!xmlns)^.*:/),ae=new RegExp(/^\s+|\s+$/g);return this.grokType=function(L){return/^\s*$/.test(L)?null:/^(?:true|false)$/i.test(L)?L.toLowerCase()==="true":isFinite(L)?parseFloat(L):L},this.parseString=function(L,I){if(L){var q=this.stringToXML(L);return q.getElementsByTagName("parsererror").length?null:this.parseXML(q,I)}else return null},this.parseXML=function(L,I){for(var q in I)w[q]=I[q];var W={},te=0,K="",$=L.childNodes.length;if($)for(var le,X,Ne,F=0;F<L.childNodes.length;F++)le=L.childNodes.item(F),le.nodeType===4?w.mergeCDATA&&(K+=le.nodeValue):le.nodeType===3?K+=le.nodeValue:le.nodeType===1&&(te===0&&(W={}),w.stripElemPrefix?X=le.nodeName.replace(j,""):X=le.nodeName,Ne=t.parseXML(le),W.hasOwnProperty(X)?(W[X].constructor!==Array&&(W[X]=[W[X]]),W[X].push(Ne)):(W[X]=Ne,te++));return Object.keys(W).length||(W=K||""),W},this.xmlToString=function(L){try{var I=L.xml?L.xml:new XMLSerializer().serializeToString(L);return I}catch(q){return null}},this.stringToXML=function(L){try{var I=null;if(window.DOMParser){var q=new l;return I=q.parseFromString(L,"text/xml"),I}else return I=new ActiveXObject("Microsoft.XMLDOM"),I.async=!1,I.loadXML(L),I}catch(W){return null}},this}.call({}),V=function(j){return t.parseString(j)};g.exports=V},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(g,S){function r(l,t){if(!(l instanceof t))throw new TypeError("Cannot call a class as a function")}g.exports=r,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(g,S){function r(t,V){for(var w=0;w<V.length;w++){var j=V[w];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(t,j.key,j)}}function l(t,V,w){return V&&r(t.prototype,V),w&&r(t,w),Object.defineProperty(t,"prototype",{writable:!1}),t}g.exports=l,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(g,S){function r(l){return g.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g.exports.__esModule=!0,g.exports.default=g.exports,r(l)}g.exports=r,g.exports.__esModule=!0,g.exports.default=g.exports},"./node_modules/@xmldom/xmldom/lib/conventions.js":function(g,S,r){"use strict";function l(j,ae){return ae===void 0&&(ae=Object),ae&&typeof ae.freeze=="function"?ae.freeze(j):j}function t(j,ae){if(j===null||typeof j!="object")throw new TypeError("target is not an object");for(var L in ae)Object.prototype.hasOwnProperty.call(ae,L)&&(j[L]=ae[L]);return j}var V=l({HTML:"text/html",isHTML:function(j){return j===V.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),w=l({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(j){return j===w.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});S.assign=t,S.freeze=l,S.MIME_TYPE=V,S.NAMESPACE=w},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":function(g,S,r){var l=r("./node_modules/@xmldom/xmldom/lib/conventions.js"),t=r("./node_modules/@xmldom/xmldom/lib/dom.js"),V=r("./node_modules/@xmldom/xmldom/lib/entities.js"),w=r("./node_modules/@xmldom/xmldom/lib/sax.js"),j=t.DOMImplementation,ae=l.NAMESPACE,L=w.ParseError,I=w.XMLReader;function q(F){return F.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function W(F){this.options=F||{locator:{}}}W.prototype.parseFromString=function(F,b){var m=this.options,D=new I,f=m.domBuilder||new K,G=m.errorHandler,_=m.locator,Z=m.xmlns||{},De=/\/x?html?$/.test(b),B=De?V.HTML_ENTITIES:V.XML_ENTITIES;_&&f.setDocumentLocator(_),D.errorHandler=te(G,f,_),D.domBuilder=m.domBuilder||f,De&&(Z[""]=ae.HTML),Z.xml=Z.xml||ae.XML;var Q=m.normalizeLineEndings||q;return F&&typeof F=="string"?D.parse(Q(F),Z,B):D.errorHandler.error("invalid doc source"),f.doc};function te(F,b,m){if(!F){if(b instanceof K)return b;F=b}var D={},f=F instanceof Function;m=m||{};function G(_){var Z=F[_];!Z&&f&&(Z=F.length==2?function(De){F(_,De)}:F),D[_]=Z&&function(De){Z("[xmldom "+_+"]	"+De+le(m))}||function(){}}return G("warning"),G("error"),G("fatalError"),D}function K(){this.cdata=!1}function $(F,b){b.lineNumber=F.lineNumber,b.columnNumber=F.columnNumber}K.prototype={startDocument:function(){this.doc=new j().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(F,b,m,D){var f=this.doc,G=f.createElementNS(F,m||b),_=D.length;Ne(this,G),this.currentElement=G,this.locator&&$(this.locator,G);for(var Z=0;Z<_;Z++){var F=D.getURI(Z),De=D.getValue(Z),m=D.getQName(Z),B=f.createAttributeNS(F,m);this.locator&&$(D.getLocator(Z),B),B.value=B.nodeValue=De,G.setAttributeNode(B)}},endElement:function(F,b,m){var D=this.currentElement,f=D.tagName;this.currentElement=D.parentNode},startPrefixMapping:function(F,b){},endPrefixMapping:function(F){},processingInstruction:function(F,b){var m=this.doc.createProcessingInstruction(F,b);this.locator&&$(this.locator,m),Ne(this,m)},ignorableWhitespace:function(F,b,m){},characters:function(F,b,m){if(F=X.apply(this,arguments),F){if(this.cdata)var D=this.doc.createCDATASection(F);else var D=this.doc.createTextNode(F);this.currentElement?this.currentElement.appendChild(D):/^\s*$/.test(F)&&this.doc.appendChild(D),this.locator&&$(this.locator,D)}},skippedEntity:function(F){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(F){(this.locator=F)&&(F.lineNumber=0)},comment:function(F,b,m){F=X.apply(this,arguments);var D=this.doc.createComment(F);this.locator&&$(this.locator,D),Ne(this,D)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(F,b,m){var D=this.doc.implementation;if(D&&D.createDocumentType){var f=D.createDocumentType(F,b,m);this.locator&&$(this.locator,f),Ne(this,f),this.doc.doctype=f}},warning:function(F){console.warn("[xmldom warning]	"+F,le(this.locator))},error:function(F){console.error("[xmldom error]	"+F,le(this.locator))},fatalError:function(F){throw new L(F,this.locator)}};function le(F){if(F)return`
@`+(F.systemId||"")+"#[line:"+F.lineNumber+",col:"+F.columnNumber+"]"}function X(F,b,m){return typeof F=="string"?F.substr(b,m):F.length>=b+m||b?new java.lang.String(F,b,m)+"":F}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(F){K.prototype[F]=function(){return null}});function Ne(F,b){F.currentElement?F.currentElement.appendChild(b):F.doc.appendChild(b)}S.__DOMHandler=K,S.normalizeLineEndings=q,S.DOMParser=W},"./node_modules/@xmldom/xmldom/lib/dom.js":function(g,S,r){var l=r("./node_modules/@xmldom/xmldom/lib/conventions.js"),t=l.NAMESPACE;function V(i){return i!==""}function w(i){return i?i.split(/[\t\n\f\r ]+/).filter(V):[]}function j(i,v){return i.hasOwnProperty(v)||(i[v]=!0),i}function ae(i){if(!i)return[];var v=w(i);return Object.keys(v.reduce(j,{}))}function L(i){return function(v){return i&&i.indexOf(v)!==-1}}function I(i,v){for(var C in i)v[C]=i[C]}function q(i,v){var C=i.prototype;if(!(C instanceof v)){let ve=function(){};var M=ve;ve.prototype=v.prototype,ve=new ve,I(C,ve),i.prototype=C=ve}C.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),C.constructor=i)}var W={},te=W.ELEMENT_NODE=1,K=W.ATTRIBUTE_NODE=2,$=W.TEXT_NODE=3,le=W.CDATA_SECTION_NODE=4,X=W.ENTITY_REFERENCE_NODE=5,Ne=W.ENTITY_NODE=6,F=W.PROCESSING_INSTRUCTION_NODE=7,b=W.COMMENT_NODE=8,m=W.DOCUMENT_NODE=9,D=W.DOCUMENT_TYPE_NODE=10,f=W.DOCUMENT_FRAGMENT_NODE=11,G=W.NOTATION_NODE=12,_={},Z={},De=_.INDEX_SIZE_ERR=(Z[1]="Index size error",1),B=_.DOMSTRING_SIZE_ERR=(Z[2]="DOMString size error",2),Q=_.HIERARCHY_REQUEST_ERR=(Z[3]="Hierarchy request error",3),Y=_.WRONG_DOCUMENT_ERR=(Z[4]="Wrong document",4),ue=_.INVALID_CHARACTER_ERR=(Z[5]="Invalid character",5),de=_.NO_DATA_ALLOWED_ERR=(Z[6]="No data allowed",6),me=_.NO_MODIFICATION_ALLOWED_ERR=(Z[7]="No modification allowed",7),ge=_.NOT_FOUND_ERR=(Z[8]="Not found",8),Re=_.NOT_SUPPORTED_ERR=(Z[9]="Not supported",9),he=_.INUSE_ATTRIBUTE_ERR=(Z[10]="Attribute in use",10),ye=_.INVALID_STATE_ERR=(Z[11]="Invalid state",11),Ce=_.SYNTAX_ERR=(Z[12]="Syntax error",12),Ge=_.INVALID_MODIFICATION_ERR=(Z[13]="Invalid modification",13),Ae=_.NAMESPACE_ERR=(Z[14]="Invalid namespace",14),pe=_.INVALID_ACCESS_ERR=(Z[15]="Invalid access",15);function Te(i,v){if(v instanceof Error)var C=v;else C=this,Error.call(this,Z[i]),this.message=Z[i],Error.captureStackTrace&&Error.captureStackTrace(this,Te);return C.code=i,v&&(this.message=this.message+": "+v),C}Te.prototype=Error.prototype,I(_,Te);function we(){}we.prototype={length:0,item:function(i){return this[i]||null},toString:function(i,v){for(var C=[],M=0;M<this.length;M++)ot(this[M],C,i,v);return C.join("")}};function Ue(i,v){this._node=i,this._refresh=v,Ke(this)}function Ke(i){var v=i._node._inc||i._node.ownerDocument._inc;if(i._inc!=v){var C=i._refresh(i._node);nt(i,"length",C.length),I(C,i),i._inc=v}}Ue.prototype.item=function(i){return Ke(this),this[i]},q(Ue,we);function xe(){}function Le(i,v){for(var C=i.length;C--;)if(i[C]===v)return C}function Ve(i,v,C,M){if(M?v[Le(v,M)]=C:v[v.length++]=C,i){C.ownerElement=i;var ve=i.ownerDocument;ve&&(M&&je(ve,i,M),Se(ve,i,C))}}function Me(i,v,C){var M=Le(v,C);if(M>=0){for(var ve=v.length-1;M<ve;)v[M]=v[++M];if(v.length=ve,i){var fe=i.ownerDocument;fe&&(je(fe,i,C),C.ownerElement=null)}}else throw Te(ge,new Error(i.tagName+"@"+C))}xe.prototype={length:0,item:we.prototype.item,getNamedItem:function(i){for(var v=this.length;v--;){var C=this[v];if(C.nodeName==i)return C}},setNamedItem:function(i){var v=i.ownerElement;if(v&&v!=this._ownerElement)throw new Te(he);var C=this.getNamedItem(i.nodeName);return Ve(this._ownerElement,this,i,C),C},setNamedItemNS:function(i){var v=i.ownerElement,C;if(v&&v!=this._ownerElement)throw new Te(he);return C=this.getNamedItemNS(i.namespaceURI,i.localName),Ve(this._ownerElement,this,i,C),C},removeNamedItem:function(i){var v=this.getNamedItem(i);return Me(this._ownerElement,this,v),v},removeNamedItemNS:function(i,v){var C=this.getNamedItemNS(i,v);return Me(this._ownerElement,this,C),C},getNamedItemNS:function(i,v){for(var C=this.length;C--;){var M=this[C];if(M.localName==v&&M.namespaceURI==i)return M}return null}};function ne(){}ne.prototype={hasFeature:function(i,v){return!0},createDocument:function(i,v,C){var M=new oe;if(M.implementation=this,M.childNodes=new we,M.doctype=C||null,C&&M.appendChild(C),v){var ve=M.createElementNS(i,v);M.appendChild(ve)}return M},createDocumentType:function(i,v,C){var M=new ee;return M.name=i,M.nodeName=i,M.publicId=v||"",M.systemId=C||"",M}};function x(){}x.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,v){return h(this,i,v)},replaceChild:function(i,v){this.insertBefore(i,v),v&&this.removeChild(v)},removeChild:function(i){return u(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return Ye(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var v=i.nextSibling;v&&v.nodeType==$&&i.nodeType==$?(this.removeChild(v),i.appendData(v.data)):(i.normalize(),i=v)}},isSupported:function(i,v){return this.ownerDocument.implementation.hasFeature(i,v)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var v=this;v;){var C=v._nsMap;if(C){for(var M in C)if(C[M]==i)return M}v=v.nodeType==K?v.ownerDocument:v.parentNode}return null},lookupNamespaceURI:function(i){for(var v=this;v;){var C=v._nsMap;if(C&&i in C)return C[i];v=v.nodeType==K?v.ownerDocument:v.parentNode}return null},isDefaultNamespace:function(i){var v=this.lookupPrefix(i);return v==null}};function H(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}I(W,x),I(W,x.prototype);function N(i,v){if(v(i))return!0;if(i=i.firstChild)do if(N(i,v))return!0;while(i=i.nextSibling)}function oe(){}function Se(i,v,C){i&&i._inc++;var M=C.namespaceURI;M===t.XMLNS&&(v._nsMap[C.prefix?C.localName:""]=C.value)}function je(i,v,C,M){i&&i._inc++;var ve=C.namespaceURI;ve===t.XMLNS&&delete v._nsMap[C.prefix?C.localName:""]}function k(i,v,C){if(i&&i._inc){i._inc++;var M=v.childNodes;if(C)M[M.length++]=C;else{for(var ve=v.firstChild,fe=0;ve;)M[fe++]=ve,ve=ve.nextSibling;M.length=fe,delete M[M.length]}}}function u(i,v){var C=v.previousSibling,M=v.nextSibling;return C?C.nextSibling=M:i.firstChild=M,M?M.previousSibling=C:i.lastChild=C,v.parentNode=null,v.previousSibling=null,v.nextSibling=null,k(i.ownerDocument,i),v}function h(i,v,C){var M=v.parentNode;if(M&&M.removeChild(v),v.nodeType===f){var ve=v.firstChild;if(ve==null)return v;var fe=v.lastChild}else ve=fe=v;var e=C?C.previousSibling:i.lastChild;ve.previousSibling=e,fe.nextSibling=C,e?e.nextSibling=ve:i.firstChild=ve,C==null?i.lastChild=fe:C.previousSibling=fe;do ve.parentNode=i;while(ve!==fe&&(ve=ve.nextSibling));return k(i.ownerDocument||i,i),v.nodeType==f&&(v.firstChild=v.lastChild=null),v}function a(i,v){return v.parentNode&&v.parentNode.removeChild(v),v.parentNode=i,v.previousSibling=i.lastChild,v.nextSibling=null,v.previousSibling?v.previousSibling.nextSibling=v:i.firstChild=v,i.lastChild=v,k(i.ownerDocument,i,v),v}oe.prototype={nodeName:"#document",nodeType:m,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,v){if(i.nodeType==f){for(var C=i.firstChild;C;){var M=C.nextSibling;this.insertBefore(C,v),C=M}return i}return this.documentElement==null&&i.nodeType==te&&(this.documentElement=i),h(this,i,v),i.ownerDocument=this,i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),u(this,i)},importNode:function(i,v){return vt(this,i,v)},getElementById:function(i){var v=null;return N(this.documentElement,function(C){if(C.nodeType==te&&C.getAttribute("id")==i)return v=C,!0}),v},getElementsByClassName:function(i){var v=ae(i);return new Ue(this,function(C){var M=[];return v.length>0&&N(C.documentElement,function(ve){if(ve!==C&&ve.nodeType===te){var fe=ve.getAttribute("class");if(fe){var e=i===fe;if(!e){var o=ae(fe);e=v.every(L(o))}e&&M.push(ve)}}}),M})},createElement:function(i){var v=new p;v.ownerDocument=this,v.nodeName=i,v.tagName=i,v.localName=i,v.childNodes=new we;var C=v.attributes=new xe;return C._ownerElement=v,v},createDocumentFragment:function(){var i=new Be;return i.ownerDocument=this,i.childNodes=new we,i},createTextNode:function(i){var v=new re;return v.ownerDocument=this,v.appendData(i),v},createComment:function(i){var v=new se;return v.ownerDocument=this,v.appendData(i),v},createCDATASection:function(i){var v=new be;return v.ownerDocument=this,v.appendData(i),v},createProcessingInstruction:function(i,v){var C=new Fe;return C.ownerDocument=this,C.tagName=C.target=i,C.nodeValue=C.data=v,C},createAttribute:function(i){var v=new P;return v.ownerDocument=this,v.name=i,v.nodeName=i,v.localName=i,v.specified=!0,v},createEntityReference:function(i){var v=new ze;return v.ownerDocument=this,v.nodeName=i,v},createElementNS:function(i,v){var C=new p,M=v.split(":"),ve=C.attributes=new xe;return C.childNodes=new we,C.ownerDocument=this,C.nodeName=v,C.tagName=v,C.namespaceURI=i,M.length==2?(C.prefix=M[0],C.localName=M[1]):C.localName=v,ve._ownerElement=C,C},createAttributeNS:function(i,v){var C=new P,M=v.split(":");return C.ownerDocument=this,C.nodeName=v,C.name=v,C.namespaceURI=i,C.specified=!0,M.length==2?(C.prefix=M[0],C.localName=M[1]):C.localName=v,C}},q(oe,x);function p(){this._nsMap={}}p.prototype={nodeType:te,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var v=this.getAttributeNode(i);return v&&v.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,v){var C=this.ownerDocument.createAttribute(i);C.value=C.nodeValue=""+v,this.setAttributeNode(C)},removeAttribute:function(i){var v=this.getAttributeNode(i);v&&this.removeAttributeNode(v)},appendChild:function(i){return i.nodeType===f?this.insertBefore(i,null):a(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,v){var C=this.getAttributeNodeNS(i,v);C&&this.removeAttributeNode(C)},hasAttributeNS:function(i,v){return this.getAttributeNodeNS(i,v)!=null},getAttributeNS:function(i,v){var C=this.getAttributeNodeNS(i,v);return C&&C.value||""},setAttributeNS:function(i,v,C){var M=this.ownerDocument.createAttributeNS(i,v);M.value=M.nodeValue=""+C,this.setAttributeNode(M)},getAttributeNodeNS:function(i,v){return this.attributes.getNamedItemNS(i,v)},getElementsByTagName:function(i){return new Ue(this,function(v){var C=[];return N(v,function(M){M!==v&&M.nodeType==te&&(i==="*"||M.tagName==i)&&C.push(M)}),C})},getElementsByTagNameNS:function(i,v){return new Ue(this,function(C){var M=[];return N(C,function(ve){ve!==C&&ve.nodeType===te&&(i==="*"||ve.namespaceURI===i)&&(v==="*"||ve.localName==v)&&M.push(ve)}),M})}},oe.prototype.getElementsByTagName=p.prototype.getElementsByTagName,oe.prototype.getElementsByTagNameNS=p.prototype.getElementsByTagNameNS,q(p,x);function P(){}P.prototype.nodeType=K,q(P,x);function U(){}U.prototype={data:"",substringData:function(i,v){return this.data.substring(i,i+v)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,v){this.replaceData(i,0,v)},appendChild:function(i){throw new Error(Z[Q])},deleteData:function(i,v){this.replaceData(i,v,"")},replaceData:function(i,v,C){var M=this.data.substring(0,i),ve=this.data.substring(i+v);C=M+C+ve,this.nodeValue=this.data=C,this.length=C.length}},q(U,x);function re(){}re.prototype={nodeName:"#text",nodeType:$,splitText:function(i){var v=this.data,C=v.substring(i);v=v.substring(0,i),this.data=this.nodeValue=v,this.length=v.length;var M=this.ownerDocument.createTextNode(C);return this.parentNode&&this.parentNode.insertBefore(M,this.nextSibling),M}},q(re,U);function se(){}se.prototype={nodeName:"#comment",nodeType:b},q(se,U);function be(){}be.prototype={nodeName:"#cdata-section",nodeType:le},q(be,U);function ee(){}ee.prototype.nodeType=D,q(ee,x);function He(){}He.prototype.nodeType=G,q(He,x);function ie(){}ie.prototype.nodeType=Ne,q(ie,x);function ze(){}ze.prototype.nodeType=X,q(ze,x);function Be(){}Be.prototype.nodeName="#document-fragment",Be.prototype.nodeType=f,q(Be,x);function Fe(){}Fe.prototype.nodeType=F,q(Fe,x);function Xe(){}Xe.prototype.serializeToString=function(i,v,C){return qe.call(i,v,C)},x.prototype.toString=qe;function qe(i,v){var C=[],M=this.nodeType==9&&this.documentElement||this,ve=M.prefix,fe=M.namespaceURI;if(fe&&ve==null){var ve=M.lookupPrefix(fe);if(ve==null)var e=[{namespace:fe,prefix:null}]}return ot(this,C,i,v,e),C.join("")}function We(i,v,C){var M=i.prefix||"",ve=i.namespaceURI;if(!ve||M==="xml"&&ve===t.XML||ve===t.XMLNS)return!1;for(var fe=C.length;fe--;){var e=C[fe];if(e.prefix===M)return e.namespace!==ve}return!0}function $e(i,v,C){i.push(" ",v,'="',C.replace(/[<>&"\t\n\r]/g,H),'"')}function ot(i,v,C,M,ve){if(ve||(ve=[]),M)if(i=M(i),i){if(typeof i=="string"){v.push(i);return}}else return;switch(i.nodeType){case te:var fe=i.attributes,e=fe.length,o=i.firstChild,n=i.tagName;C=t.isHTML(i.namespaceURI)||C;var s=n;if(!C&&!i.prefix&&i.namespaceURI){for(var d,c=0;c<fe.length;c++)if(fe.item(c).name==="xmlns"){d=fe.item(c).value;break}if(!d)for(var y=ve.length-1;y>=0;y--){var T=ve[y];if(T.prefix===""&&T.namespace===i.namespaceURI){d=T.namespace;break}}if(d!==i.namespaceURI)for(var y=ve.length-1;y>=0;y--){var T=ve[y];if(T.namespace===i.namespaceURI){T.prefix&&(s=T.prefix+":"+n);break}}}v.push("<",s);for(var E=0;E<e;E++){var R=fe.item(E);R.prefix=="xmlns"?ve.push({prefix:R.localName,namespace:R.value}):R.nodeName=="xmlns"&&ve.push({prefix:"",namespace:R.value})}for(var E=0;E<e;E++){var R=fe.item(E);if(We(R,C,ve)){var O=R.prefix||"",A=R.namespaceURI;$e(v,O?"xmlns:"+O:"xmlns",A),ve.push({prefix:O,namespace:A})}ot(R,v,C,M,ve)}if(n===s&&We(i,C,ve)){var O=i.prefix||"",A=i.namespaceURI;$e(v,O?"xmlns:"+O:"xmlns",A),ve.push({prefix:O,namespace:A})}if(o||C&&!/^(?:meta|link|img|br|hr|input)$/i.test(n)){if(v.push(">"),C&&/^script$/i.test(n))for(;o;)o.data?v.push(o.data):ot(o,v,C,M,ve.slice()),o=o.nextSibling;else for(;o;)ot(o,v,C,M,ve.slice()),o=o.nextSibling;v.push("</",s,">")}else v.push("/>");return;case m:case f:for(var o=i.firstChild;o;)ot(o,v,C,M,ve.slice()),o=o.nextSibling;return;case K:return $e(v,i.name,i.value);case $:return v.push(i.data.replace(/[<&>]/g,H));case le:return v.push("<![CDATA[",i.data,"]]>");case b:return v.push("<!--",i.data,"-->");case D:var z=i.publicId,J=i.systemId;if(v.push("<!DOCTYPE ",i.name),z)v.push(" PUBLIC ",z),J&&J!="."&&v.push(" ",J),v.push(">");else if(J&&J!=".")v.push(" SYSTEM ",J,">");else{var Ie=i.internalSubset;Ie&&v.push(" [",Ie,"]"),v.push(">")}return;case F:return v.push("<?",i.target," ",i.data,"?>");case X:return v.push("&",i.nodeName,";");default:v.push("??",i.nodeName)}}function vt(i,v,C){var M;switch(v.nodeType){case te:M=v.cloneNode(!1),M.ownerDocument=i;case f:break;case K:C=!0;break}if(M||(M=v.cloneNode(!1)),M.ownerDocument=i,M.parentNode=null,C)for(var ve=v.firstChild;ve;)M.appendChild(vt(i,ve,C)),ve=ve.nextSibling;return M}function Ye(i,v,C){var M=new v.constructor;for(var ve in v){var fe=v[ve];typeof fe!="object"&&fe!=M[ve]&&(M[ve]=fe)}switch(v.childNodes&&(M.childNodes=new we),M.ownerDocument=i,M.nodeType){case te:var e=v.attributes,o=M.attributes=new xe,n=e.length;o._ownerElement=M;for(var s=0;s<n;s++)M.setAttributeNode(Ye(i,e.item(s),!0));break;case K:C=!0}if(C)for(var d=v.firstChild;d;)M.appendChild(Ye(i,d,C)),d=d.nextSibling;return M}function nt(i,v,C){i[v]=C}try{if(Object.defineProperty){let i=function(v){switch(v.nodeType){case te:case f:var C=[];for(v=v.firstChild;v;)v.nodeType!==7&&v.nodeType!==8&&C.push(i(v)),v=v.nextSibling;return C.join("");default:return v.nodeValue}};var et=i;Object.defineProperty(Ue.prototype,"length",{get:function(){return Ke(this),this.$$length}}),Object.defineProperty(x.prototype,"textContent",{get:function(){return i(this)},set:function(v){switch(this.nodeType){case te:case f:for(;this.firstChild;)this.removeChild(this.firstChild);(v||String(v))&&this.appendChild(this.ownerDocument.createTextNode(v));break;default:this.data=v,this.value=v,this.nodeValue=v}}}),nt=function(v,C,M){v["$$"+C]=M}}}catch(i){}S.DocumentType=ee,S.DOMException=Te,S.DOMImplementation=ne,S.Element=p,S.Node=x,S.NodeList=we,S.XMLSerializer=Xe},"./node_modules/@xmldom/xmldom/lib/entities.js":function(g,S,r){var l=r("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;S.XML_ENTITIES=l({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),S.HTML_ENTITIES=l({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),S.entityMap=S.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":function(g,S,r){var l=r("./node_modules/@xmldom/xmldom/lib/dom.js");S.DOMImplementation=l.DOMImplementation,S.XMLSerializer=l.XMLSerializer,S.DOMParser=r("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":function(g,S,r){var l=r("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE,t=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,V=new RegExp("[\\-\\.0-9"+t.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),w=new RegExp("^"+t.source+V.source+"*(?::"+t.source+V.source+"*)?$"),j=0,ae=1,L=2,I=3,q=4,W=5,te=6,K=7;function $(B,Q){this.message=B,this.locator=Q,Error.captureStackTrace&&Error.captureStackTrace(this,$)}$.prototype=new Error,$.prototype.name=$.name;function le(){}le.prototype={parse:function(B,Q,Y){var ue=this.domBuilder;ue.startDocument(),f(Q,Q={}),X(B,Q,Y,ue,this.errorHandler),ue.endDocument()}};function X(B,Q,Y,ue,de){function me(a){if(a>65535){a-=65536;var p=55296+(a>>10),P=56320+(a&1023);return String.fromCharCode(p,P)}else return String.fromCharCode(a)}function ge(a){var p=a.slice(1,-1);return Object.hasOwnProperty.call(Y,p)?Y[p]:p.charAt(0)==="#"?me(parseInt(p.substr(1).replace("x","0x"))):(de.error("entity not found:"+a),a)}function Re(a){if(a>we){var p=B.substring(we,a).replace(/&#?\w+;/g,ge);Ae&&he(we),ue.characters(p,0,a-we),we=a}}function he(a,p){for(;a>=Ce&&(p=Ge.exec(B));)ye=p.index,Ce=ye+p[0].length,Ae.lineNumber++;Ae.columnNumber=a-ye+1}for(var ye=0,Ce=0,Ge=/.*(?:\r\n?|\n)|.*$/g,Ae=ue.locator,pe=[{currentNSMap:Q}],Te={},we=0;;){try{var Ue=B.indexOf("<",we);if(Ue<0){if(!B.substr(we).match(/^\s*$/)){var Ke=ue.doc,xe=Ke.createTextNode(B.substr(we));Ke.appendChild(xe),ue.currentElement=xe}return}switch(Ue>we&&Re(Ue),B.charAt(Ue+1)){case"/":var Le=B.indexOf(">",Ue+3),Ve=B.substring(Ue+2,Le).replace(/[ \t\n\r]+$/g,""),Me=pe.pop();Le<0?(Ve=B.substring(Ue+2).replace(/[\s<].*/,""),de.error("end tag name: "+Ve+" is not complete:"+Me.tagName),Le=Ue+1+Ve.length):Ve.match(/\s</)&&(Ve=Ve.replace(/[\s<].*/,""),de.error("end tag name: "+Ve+" maybe not complete"),Le=Ue+1+Ve.length);var ne=Me.localNSMap,x=Me.tagName==Ve,H=x||Me.tagName&&Me.tagName.toLowerCase()==Ve.toLowerCase();if(H){if(ue.endElement(Me.uri,Me.localName,Ve),ne)for(var N in ne)ue.endPrefixMapping(N);x||de.fatalError("end tag name: "+Ve+" is not match the current start tagName:"+Me.tagName)}else pe.push(Me);Le++;break;case"?":Ae&&he(Ue),Le=_(B,Ue,ue);break;case"!":Ae&&he(Ue),Le=G(B,Ue,ue,de);break;default:Ae&&he(Ue);var oe=new Z,Se=pe[pe.length-1].currentNSMap,Le=F(B,Ue,oe,Se,ge,de),je=oe.length;if(!oe.closed&&D(B,Le,oe.tagName,Te)&&(oe.closed=!0,Y.nbsp||de.warning("unclosed xml attribute")),Ae&&je){for(var k=Ne(Ae,{}),u=0;u<je;u++){var h=oe[u];he(h.offset),h.locator=Ne(Ae,{})}ue.locator=k,b(oe,ue,Se)&&pe.push(oe),ue.locator=Ae}else b(oe,ue,Se)&&pe.push(oe);l.isHTML(oe.uri)&&!oe.closed?Le=m(B,Le,oe.tagName,ge,ue):Le++}}catch(a){if(a instanceof $)throw a;de.error("element parse error: "+a),Le=-1}Le>we?we=Le:Re(Math.max(Ue,we)+1)}}function Ne(B,Q){return Q.lineNumber=B.lineNumber,Q.columnNumber=B.columnNumber,Q}function F(B,Q,Y,ue,de,me){function ge(pe,Te,we){Y.attributeNames.hasOwnProperty(pe)&&me.fatalError("Attribute "+pe+" redefined"),Y.addValue(pe,Te.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,de),we)}for(var Re,he,ye=++Q,Ce=j;;){var Ge=B.charAt(ye);switch(Ge){case"=":if(Ce===ae)Re=B.slice(Q,ye),Ce=I;else if(Ce===L)Ce=I;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Ce===I||Ce===ae)if(Ce===ae&&(me.warning('attribute value must after "="'),Re=B.slice(Q,ye)),Q=ye+1,ye=B.indexOf(Ge,Q),ye>0)he=B.slice(Q,ye),ge(Re,he,Q-1),Ce=W;else throw new Error("attribute value no end '"+Ge+"' match");else if(Ce==q)he=B.slice(Q,ye),ge(Re,he,Q),me.warning('attribute "'+Re+'" missed start quot('+Ge+")!!"),Q=ye+1,Ce=W;else throw new Error('attribute value must after "="');break;case"/":switch(Ce){case j:Y.setTagName(B.slice(Q,ye));case W:case te:case K:Ce=K,Y.closed=!0;case q:case ae:case L:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return me.error("unexpected end of input"),Ce==j&&Y.setTagName(B.slice(Q,ye)),ye;case">":switch(Ce){case j:Y.setTagName(B.slice(Q,ye));case W:case te:case K:break;case q:case ae:he=B.slice(Q,ye),he.slice(-1)==="/"&&(Y.closed=!0,he=he.slice(0,-1));case L:Ce===L&&(he=Re),Ce==q?(me.warning('attribute "'+he+'" missed quot(")!'),ge(Re,he,Q)):((!l.isHTML(ue[""])||!he.match(/^(?:disabled|checked|selected)$/i))&&me.warning('attribute "'+he+'" missed value!! "'+he+'" instead!!'),ge(he,he,Q));break;case I:throw new Error("attribute value missed!!")}return ye;case"\x80":Ge=" ";default:if(Ge<=" ")switch(Ce){case j:Y.setTagName(B.slice(Q,ye)),Ce=te;break;case ae:Re=B.slice(Q,ye),Ce=L;break;case q:var he=B.slice(Q,ye);me.warning('attribute "'+he+'" missed quot(")!!'),ge(Re,he,Q);case W:Ce=te;break}else switch(Ce){case L:var Ae=Y.tagName;(!l.isHTML(ue[""])||!Re.match(/^(?:disabled|checked|selected)$/i))&&me.warning('attribute "'+Re+'" missed value!! "'+Re+'" instead2!!'),ge(Re,Re,Q),Q=ye,Ce=ae;break;case W:me.warning('attribute space is required"'+Re+'"!!');case te:Ce=ae,Q=ye;break;case I:Ce=q,Q=ye;break;case K:throw new Error("elements closed character '/' and '>' must be connected to")}}ye++}}function b(B,Q,Y){for(var ue=B.tagName,de=null,me=B.length;me--;){var ge=B[me],Re=ge.qName,he=ge.value,Ae=Re.indexOf(":");if(Ae>0)var ye=ge.prefix=Re.slice(0,Ae),Ce=Re.slice(Ae+1),Ge=ye==="xmlns"&&Ce;else Ce=Re,ye=null,Ge=Re==="xmlns"&&"";ge.localName=Ce,Ge!==!1&&(de==null&&(de={},f(Y,Y={})),Y[Ge]=de[Ge]=he,ge.uri=l.XMLNS,Q.startPrefixMapping(Ge,he))}for(var me=B.length;me--;){ge=B[me];var ye=ge.prefix;ye&&(ye==="xml"&&(ge.uri=l.XML),ye!=="xmlns"&&(ge.uri=Y[ye||""]))}var Ae=ue.indexOf(":");Ae>0?(ye=B.prefix=ue.slice(0,Ae),Ce=B.localName=ue.slice(Ae+1)):(ye=null,Ce=B.localName=ue);var pe=B.uri=Y[ye||""];if(Q.startElement(pe,Ce,ue,B),B.closed){if(Q.endElement(pe,Ce,ue),de)for(ye in de)Q.endPrefixMapping(ye)}else return B.currentNSMap=Y,B.localNSMap=de,!0}function m(B,Q,Y,ue,de){if(/^(?:script|textarea)$/i.test(Y)){var me=B.indexOf("</"+Y+">",Q),ge=B.substring(Q+1,me);if(/[&<]/.test(ge))return/^script$/i.test(Y)?(de.characters(ge,0,ge.length),me):(ge=ge.replace(/&#?\w+;/g,ue),de.characters(ge,0,ge.length),me)}return Q+1}function D(B,Q,Y,ue){var de=ue[Y];return de==null&&(de=B.lastIndexOf("</"+Y+">"),de<Q&&(de=B.lastIndexOf("</"+Y)),ue[Y]=de),de<Q}function f(B,Q){for(var Y in B)Q[Y]=B[Y]}function G(B,Q,Y,ue){var de=B.charAt(Q+2);switch(de){case"-":if(B.charAt(Q+3)==="-"){var me=B.indexOf("-->",Q+4);return me>Q?(Y.comment(B,Q+4,me-Q-4),me+3):(ue.error("Unclosed comment"),-1)}else return-1;default:if(B.substr(Q+3,6)=="CDATA["){var me=B.indexOf("]]>",Q+9);return Y.startCDATA(),Y.characters(B,Q+9,me-Q-9),Y.endCDATA(),me+3}var ge=De(B,Q),Re=ge.length;if(Re>1&&/!doctype/i.test(ge[0][0])){var he=ge[1][0],ye=!1,Ce=!1;Re>3&&(/^public$/i.test(ge[2][0])?(ye=ge[3][0],Ce=Re>4&&ge[4][0]):/^system$/i.test(ge[2][0])&&(Ce=ge[3][0]));var Ge=ge[Re-1];return Y.startDTD(he,ye,Ce),Y.endDTD(),Ge.index+Ge[0].length}}return-1}function _(B,Q,Y){var ue=B.indexOf("?>",Q);if(ue){var de=B.substring(Q,ue).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(de){var me=de[0].length;return Y.processingInstruction(de[1],de[2]),ue+2}else return-1}return-1}function Z(){this.attributeNames={}}Z.prototype={setTagName:function(B){if(!w.test(B))throw new Error("invalid tagName:"+B);this.tagName=B},addValue:function(B,Q,Y){if(!w.test(B))throw new Error("invalid attribute:"+B);this.attributeNames[B]=this.length,this[this.length++]={qName:B,value:Q,offset:Y}},length:0,getLocalName:function(B){return this[B].localName},getLocator:function(B){return this[B].locator},getQName:function(B){return this[B].qName},getURI:function(B){return this[B].uri},getValue:function(B){return this[B].value}};function De(B,Q){var Y,ue=[],de=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(de.lastIndex=Q,de.exec(B);Y=de.exec(B);)if(ue.push(Y),Y[1])return ue}S.XMLReader=le,S.ParseError=$},"./node_modules/process/browser.js":function(g,S){var r=g.exports={},l,t;function V(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=V}catch(X){l=V}try{typeof clearTimeout=="function"?t=clearTimeout:t=w}catch(X){t=w}})();function j(X){if(l===setTimeout)return setTimeout(X,0);if((l===V||!l)&&setTimeout)return l=setTimeout,setTimeout(X,0);try{return l(X,0)}catch(Ne){try{return l.call(null,X,0)}catch(F){return l.call(this,X,0)}}}function ae(X){if(t===clearTimeout)return clearTimeout(X);if((t===w||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(X);try{return t(X)}catch(Ne){try{return t.call(null,X)}catch(F){return t.call(this,X)}}}var L=[],I=!1,q,W=-1;function te(){!I||!q||(I=!1,q.length?L=q.concat(L):W=-1,L.length&&K())}function K(){if(!I){var X=j(te);I=!0;for(var Ne=L.length;Ne;){for(q=L,L=[];++W<Ne;)q&&q[W].run();W=-1,Ne=L.length}q=null,I=!1,ae(X)}}r.nextTick=function(X){var Ne=new Array(arguments.length-1);if(arguments.length>1)for(var F=1;F<arguments.length;F++)Ne[F-1]=arguments[F];L.push(new $(X,Ne)),L.length===1&&!I&&j(K)};function $(X,Ne){this.fun=X,this.array=Ne}$.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function le(){}r.on=le,r.addListener=le,r.once=le,r.off=le,r.removeListener=le,r.removeAllListeners=le,r.emit=le,r.prependListener=le,r.prependOnceListener=le,r.listeners=function(X){return[]},r.binding=function(X){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(X){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./node_modules/webpack/buildin/amd-options.js":function(g,S){(function(r){g.exports=r}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(g,S){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(l){typeof window=="object"&&(r=window)}g.exports=r},"./node_modules/webpack/buildin/module.js":function(g,S){g.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},"./package.json":function(g){g.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.6","description":"JavaScript SDK for [\u817E\u8BAF\u4E91\u5BF9\u8C61\u5B58\u50A8](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.2"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(g,S,r){var l=r("./node_modules/@babel/runtime/helpers/typeof.js"),t=r("./src/session.js"),V=r("./src/async.js"),w=r("./src/event.js").EventProxy,j=r("./src/util.js"),ae=r("./src/tracker.js");function L(f,G){var _=this,Z=new w,De=f.TaskId,B=f.Bucket,Q=f.Region,Y=f.Key,ue=f.Body,de=f.ChunkSize||f.SliceSize||_.options.ChunkSize,me=f.AsyncLimit,ge=f.StorageClass,Re=f.ServerSideEncryption,he,ye,Ce=f.onHashProgress,Ge=f.tracker;Ge&&Ge.setParams({chunkSize:de}),Z.on("error",function(Ae){if(!!_._isRunningTask(De))return Ae.UploadId=f.UploadData.UploadId||"",G(Ae)}),Z.on("upload_complete",function(Ae){var pe=j.extend({UploadId:f.UploadData.UploadId||""},Ae);G(null,pe)}),Z.on("upload_slice_complete",function(Ae){var pe={};j.each(f.Headers,function(Te,we){var Ue=we.toLowerCase();(Ue.indexOf("x-cos-meta-")===0||Ue==="pic-operations")&&(pe[we]=Te)}),$.call(_,{Bucket:B,Region:Q,Key:Y,UploadId:Ae.UploadId,SliceList:Ae.SliceList,Headers:pe,tracker:Ge},function(Te,we){if(!!_._isRunningTask(De)){if(t.removeUsing(Ae.UploadId),Te)return ye(null,!0),Z.emit("error",Te);t.removeUploadId.call(_,Ae.UploadId),ye({loaded:he,total:he},!0),Z.emit("upload_complete",we)}})}),Z.on("get_upload_data_finish",function(Ae){var pe=t.getFileId(ue,f.ChunkSize,B,Y);pe&&t.saveUploadId.call(_,pe,Ae.UploadId,_.options.UploadIdCacheLimit),t.setUsing(Ae.UploadId),ye(null,!0),te.call(_,{TaskId:De,Bucket:B,Region:Q,Key:Y,Body:ue,FileSize:he,SliceSize:de,AsyncLimit:me,ServerSideEncryption:Re,UploadData:Ae,Headers:f.Headers,onProgress:ye,tracker:Ge},function(Te,we){if(!!_._isRunningTask(De)){if(Te)return ye(null,!0),Z.emit("error",Te);Z.emit("upload_slice_complete",we)}})}),Z.on("get_file_size_finish",function(){if(ye=j.throttleOnProgress.call(_,he,f.onProgress),f.UploadData.UploadId)Z.emit("get_upload_data_finish",f.UploadData);else{var Ae=j.extend({TaskId:De,Bucket:B,Region:Q,Key:Y,Headers:f.Headers,StorageClass:ge,Body:ue,FileSize:he,SliceSize:de,onHashProgress:Ce,tracker:Ge},f);I.call(_,Ae,function(pe,Te){if(!!_._isRunningTask(De)){if(pe)return Z.emit("error",pe);f.UploadData.UploadId=Te.UploadId,f.UploadData.PartList=Te.PartList,Z.emit("get_upload_data_finish",f.UploadData)}})}}),he=f.ContentLength,delete f.ContentLength,!f.Headers&&(f.Headers={}),j.each(f.Headers,function(Ae,pe){pe.toLowerCase()==="content-length"&&delete f.Headers[pe]}),function(){for(var Ae=[1,2,4,8,16,32,64,128,256,512,1024,1024*2,1024*4,1024*5],pe=1024*1024,Te=0;Te<Ae.length&&(pe=Ae[Te]*1024*1024,!(he/pe<=_.options.MaxPartNumber));Te++);f.ChunkSize=f.SliceSize=de=Math.max(de,pe)}(),he===0?(f.Body="",f.ContentLength=0,f.SkipTask=!0,_.putObject(f,G)):Z.emit("get_file_size_finish")}function I(f,G){var _=f.TaskId,Z=f.Bucket,De=f.Region,B=f.Key,Q=f.StorageClass,Y=this,ue={},de=f.FileSize,me=f.SliceSize,ge=Math.ceil(de/me),Re=0,he=0,ye=j.throttleOnProgress.call(Y,de,f.onHashProgress),Ce=function(Te,we){var Ue=me*(Te-1),Ke=Math.min(Ue+me,de),xe=Ke-Ue;ue[Te]?we(null,{PartNumber:Te,ETag:ue[Te],Size:xe}):j.fileSlice(f.Body,Ue,Ke,!1,function(Le){j.getFileMd5(Le,function(Ve,Me){if(Ve)return we(j.error(Ve));var ne='"'+Me+'"';ue[Te]=ne,Re+=1,he+=xe,ye({loaded:he,total:de}),we(null,{PartNumber:Te,ETag:ne,Size:xe})})})},Ge=function(Te,we){var Ue=Te.length;if(Ue===0)return we(null,!0);if(Ue>ge)return we(null,!1);if(Ue>1){var Ke=Math.max(Te[0].Size,Te[1].Size);if(Ke!==me)return we(null,!1)}var xe=function Le(Ve){if(Ve<Ue){var Me=Te[Ve];Ce(Me.PartNumber,function(ne,x){x&&x.ETag===Me.ETag&&x.Size===Me.Size?Le(Ve+1):we(null,!1)})}else we(null,!0)};xe(0)},Ae=new w;Ae.on("error",function(pe){if(!!Y._isRunningTask(_))return G(pe)}),Ae.on("upload_id_available",function(pe){var Te={},we=[];j.each(pe.PartList,function(xe){Te[xe.PartNumber]=xe});for(var Ue=1;Ue<=ge;Ue++){var Ke=Te[Ue];Ke?(Ke.PartNumber=Ue,Ke.Uploaded=!0):Ke={PartNumber:Ue,ETag:null,Uploaded:!1},we.push(Ke)}pe.PartList=we,G(null,pe)}),Ae.on("no_available_upload_id",function(){if(!!Y._isRunningTask(_)){var pe=j.extend({Bucket:Z,Region:De,Key:B,Query:j.clone(f.Query),StorageClass:Q,Body:f.Body,calledBySdk:"sliceUploadFile",tracker:f.tracker},f),Te=j.clone(f.Headers);delete Te["x-cos-mime-limit"],pe.Headers=Te,Y.multipartInit(pe,function(we,Ue){if(!!Y._isRunningTask(_)){if(we)return Ae.emit("error",we);var Ke=Ue.UploadId;if(!Ke)return G(j.error(new Error("no such upload id")));Ae.emit("upload_id_available",{UploadId:Ke,PartList:[]})}})}}),Ae.on("has_and_check_upload_id",function(pe){pe=pe.reverse(),V.eachLimit(pe,1,function(Te,we){if(!!Y._isRunningTask(_)){if(t.using[Te]){we();return}W.call(Y,{Bucket:Z,Region:De,Key:B,UploadId:Te,tracker:f.tracker},function(Ue,Ke){if(!!Y._isRunningTask(_)){if(Ue)return t.removeUsing(Te),Ae.emit("error",Ue);var xe=Ke.PartList;xe.forEach(function(Le){Le.PartNumber*=1,Le.Size*=1,Le.ETag=Le.ETag||""}),Ge(xe,function(Le,Ve){if(!!Y._isRunningTask(_)){if(Le)return Ae.emit("error",Le);Ve?we({UploadId:Te,PartList:xe}):we()}})}})}},function(Te){!Y._isRunningTask(_)||(ye(null,!0),Te&&Te.UploadId?Ae.emit("upload_id_available",Te):Ae.emit("no_available_upload_id"))})}),Ae.on("seek_local_avail_upload_id",function(pe){var Te=t.getFileId(f.Body,f.ChunkSize,Z,B),we=t.getUploadIdList.call(Y,Te);if(!Te||!we){Ae.emit("has_and_check_upload_id",pe);return}var Ue=function Ke(xe){if(xe>=we.length){Ae.emit("has_and_check_upload_id",pe);return}var Le=we[xe];if(!j.isInArray(pe,Le)){t.removeUploadId.call(Y,Le),Ke(xe+1);return}if(t.using[Le]){Ke(xe+1);return}W.call(Y,{Bucket:Z,Region:De,Key:B,UploadId:Le,tracker:f.tracker},function(Ve,Me){!Y._isRunningTask(_)||(Ve?(t.removeUploadId.call(Y,Le),Ke(xe+1)):Ae.emit("upload_id_available",{UploadId:Le,PartList:Me.PartList}))})};Ue(0)}),Ae.on("get_remote_upload_id_list",function(){q.call(Y,{Bucket:Z,Region:De,Key:B,tracker:f.tracker},function(pe,Te){if(!!Y._isRunningTask(_)){if(pe)return Ae.emit("error",pe);var we=j.filter(Te.UploadList,function(xe){return xe.Key===B&&(!Q||xe.StorageClass.toUpperCase()===Q.toUpperCase())}).reverse().map(function(xe){return xe.UploadId||xe.UploadID});if(we.length)Ae.emit("seek_local_avail_upload_id",we);else{var Ue=t.getFileId(f.Body,f.ChunkSize,Z,B),Ke;Ue&&(Ke=t.getUploadIdList.call(Y,Ue))&&j.each(Ke,function(xe){t.removeUploadId.call(Y,xe)}),Ae.emit("no_available_upload_id")}}})}),Ae.emit("get_remote_upload_id_list")}function q(f,G){var _=this,Z=[],De={Bucket:f.Bucket,Region:f.Region,Prefix:f.Key,calledBySdk:f.calledBySdk||"sliceUploadFile",tracker:f.tracker},B=function Q(){_.multipartList(De,function(Y,ue){if(Y)return G(Y);Z.push.apply(Z,ue.Upload||[]),ue.IsTruncated==="true"?(De.KeyMarker=ue.NextKeyMarker,De.UploadIdMarker=ue.NextUploadIdMarker,Q()):G(null,{UploadList:Z})})};B()}function W(f,G){var _=this,Z=[],De={Bucket:f.Bucket,Region:f.Region,Key:f.Key,UploadId:f.UploadId,calledBySdk:"sliceUploadFile",tracker:f.tracker},B=function Q(){_.multipartListPart(De,function(Y,ue){if(Y)return G(Y);Z.push.apply(Z,ue.Part||[]),ue.IsTruncated==="true"?(De.PartNumberMarker=ue.NextPartNumberMarker,Q()):G(null,{PartList:Z})})};B()}function te(f,G){var _=this,Z=f.TaskId,De=f.Bucket,B=f.Region,Q=f.Key,Y=f.UploadData,ue=f.FileSize,de=f.SliceSize,me=Math.min(f.AsyncLimit||_.options.ChunkParallelLimit||1,256),ge=f.Body,Re=Math.ceil(ue/de),he=0,ye=f.ServerSideEncryption,Ce=f.Headers,Ge=j.filter(Y.PartList,function(pe){return pe.Uploaded&&(he+=pe.PartNumber>=Re&&ue%de||de),!pe.Uploaded}),Ae=f.onProgress;V.eachLimit(Ge,me,function(pe,Te){if(!!_._isRunningTask(Z)){var we=pe.PartNumber,Ue=Math.min(ue,pe.PartNumber*de)-(pe.PartNumber-1)*de,Ke=0;K.call(_,{TaskId:Z,Bucket:De,Region:B,Key:Q,SliceSize:de,FileSize:ue,PartNumber:we,ServerSideEncryption:ye,Body:ge,UploadData:Y,Headers:Ce,onProgress:function(Le){he+=Le.loaded-Ke,Ke=Le.loaded,Ae({loaded:he,total:ue})},tracker:f.tracker},function(xe,Le){!_._isRunningTask(Z)||(!xe&&!Le.ETag&&(xe='get ETag error, please add "ETag" to CORS ExposeHeader setting.( \u83B7\u53D6ETag\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0ETag\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 )'),xe?he-=Ke:(he+=Ue-Ke,pe.ETag=Le.ETag),Ae({loaded:he,total:ue}),Te(xe||null,Le))})}},function(pe){if(!!_._isRunningTask(Z)){if(pe)return G(pe);G(null,{UploadId:Y.UploadId,SliceList:Y.PartList})}})}function K(f,G){var _=this,Z=f.TaskId,De=f.Bucket,B=f.Region,Q=f.Key,Y=f.FileSize,ue=f.Body,de=f.PartNumber*1,me=f.SliceSize,ge=f.ServerSideEncryption,Re=f.UploadData,he=f.Headers||{},ye=_.options.ChunkRetryTimes+1,Ce=me*(de-1),Ge=me,Ae=Ce+me;Ae>Y&&(Ae=Y,Ge=Ae-Ce);var pe=["x-cos-traffic-limit","x-cos-mime-limit"],Te={};j.each(he,function(Ue,Ke){pe.indexOf(Ke)>-1&&(Te[Ke]=Ue)});var we=Re.PartList[de-1];V.retry(ye,function(Ue){!_._isRunningTask(Z)||j.fileSlice(ue,Ce,Ae,!0,function(Ke){_.multipartUpload({TaskId:Z,Bucket:De,Region:B,Key:Q,ContentLength:Ge,PartNumber:de,UploadId:Re.UploadId,ServerSideEncryption:ge,Body:Ke,Headers:Te,onProgress:f.onProgress,calledBySdk:"sliceUploadFile",tracker:f.tracker},function(xe,Le){if(!!_._isRunningTask(Z))return xe?Ue(xe):(we.Uploaded=!0,Ue(null,Le))})})},function(Ue,Ke){if(!!_._isRunningTask(Z))return G(Ue,Ke)})}function $(f,G){var _=f.Bucket,Z=f.Region,De=f.Key,B=f.UploadId,Q=f.SliceList,Y=this,ue=this.options.ChunkRetryTimes+1,de=f.Headers,me=Q.map(function(ge){return{PartNumber:ge.PartNumber,ETag:ge.ETag}});V.retry(ue,function(ge){Y.multipartComplete({Bucket:_,Region:Z,Key:De,UploadId:B,Parts:me,Headers:de,calledBySdk:"sliceUploadFile",tracker:f.tracker},ge)},function(ge,Re){G(ge,Re)})}function le(f,G){var _=f.Bucket,Z=f.Region,De=f.Key,B=f.UploadId,Q=f.Level||"task",Y=f.AsyncLimit,ue=this,de=new w;if(de.on("error",function(me){return G(me)}),de.on("get_abort_array",function(me){X.call(ue,{Bucket:_,Region:Z,Key:De,Headers:f.Headers,AsyncLimit:Y,AbortArray:me},G)}),Q==="bucket")q.call(ue,{Bucket:_,Region:Z,calledBySdk:"abortUploadTask"},function(me,ge){if(me)return G(me);de.emit("get_abort_array",ge.UploadList||[])});else if(Q==="file"){if(!De)return G(j.error(new Error("abort_upload_task_no_key")));q.call(ue,{Bucket:_,Region:Z,Key:De,calledBySdk:"abortUploadTask"},function(me,ge){if(me)return G(me);de.emit("get_abort_array",ge.UploadList||[])})}else if(Q==="task"){if(!B)return G(j.error(new Error("abort_upload_task_no_id")));if(!De)return G(j.error(new Error("abort_upload_task_no_key")));de.emit("get_abort_array",[{Key:De,UploadId:B}])}else return G(j.error(new Error("abort_unknown_level")))}function X(f,G){var _=f.Bucket,Z=f.Region,De=f.Key,B=f.AbortArray,Q=f.AsyncLimit||1,Y=this,ue=0,de=new Array(B.length);V.eachLimit(B,Q,function(me,ge){var Re=ue;if(De&&De!==me.Key){de[Re]={error:{KeyNotMatch:!0}},ge(null);return}var he=me.UploadId||me.UploadID;Y.multipartAbort({Bucket:_,Region:Z,Key:me.Key,Headers:f.Headers,UploadId:he},function(ye){var Ce={Bucket:_,Region:Z,Key:me.Key,UploadId:he};de[Re]={error:ye,task:Ce},ge(null)}),ue++},function(me){if(me)return G(me);for(var ge=[],Re=[],he=0,ye=de.length;he<ye;he++){var Ce=de[he];Ce.task&&(Ce.error?Re.push(Ce.task):ge.push(Ce.task))}return G(null,{successList:ge,errorList:Re})})}function Ne(f,G){var _=this,Z=f.SliceSize===void 0?_.options.SliceSize:f.SliceSize,De=[],B=f.Body,Q=B.size||B.length||0,Y={TaskId:""};if(_.options.EnableTracker){var ue=_.options.UseAccelerate||_.options.Domain&&_.options.Domain.includes("accelerate.");f.tracker=new ae({bucket:f.Bucket,region:f.Region,apiName:"uploadFile",fileKey:f.Key,fileSize:Q,accelerate:ue,deepTracker:_.options.DeepTracker,customId:_.options.CustomId,delay:_.options.TrackerDelay})}j.each(f,function(ye,Ce){l(ye)!=="object"&&typeof ye!="function"&&(Y[Ce]=ye)});var de=f.onTaskReady,me=function(Ce){Y.TaskId=Ce,de&&de(Ce)};f.onTaskReady=me;var ge=Q>Z?"sliceUploadFile":"putObject",Re=f.onFileFinish,he=function(Ce,Ge){f.tracker&&f.tracker.formatResult(Ce,Ge),Re&&Re(Ce,Ge,Y),G&&G(Ce,Ge)};De.push({api:ge,params:f,callback:he}),_._addTasks(De)}function F(f,G){var _=this,Z=f.SliceSize===void 0?_.options.SliceSize:f.SliceSize,De=0,B=0,Q=j.throttleOnProgress.call(_,B,f.onProgress),Y=f.files.length,ue=f.onFileFinish,de=Array(Y),me=function(he,ye,Ce){Q(null,!0),ue&&ue(he,ye,Ce),de[Ce.Index]={options:Ce,error:he,data:ye},--Y<=0&&G&&G(null,{files:de})},ge=[];j.each(f.files,function(Re,he){(function(){var ye=Re.Body,Ce=ye.size||ye.length||0,Ge={Index:he,TaskId:""};if(De+=Ce,_.options.EnableTracker){var Ae=_.options.UseAccelerate||_.options.Domain&&_.options.Domain.includes("accelerate.");Re.tracker=new ae({bucket:Re.Bucket,region:Re.Region,apiName:"uploadFiles",fileKey:Re.Key,fileSize:Ce,accelerate:Ae,deepTracker:_.options.DeepTracker,customId:_.options.CustomId,delay:_.options.TrackerDelay})}j.each(Re,function(Me,ne){l(Me)!=="object"&&typeof Me!="function"&&(Ge[ne]=Me)});var pe=Re.onTaskReady,Te=function(ne){Ge.TaskId=ne,pe&&pe(ne)};Re.onTaskReady=Te;var we=0,Ue=Re.onProgress,Ke=function(ne){B=B-we+ne.loaded,we=ne.loaded,Ue&&Ue(ne),Q({loaded:B,total:De})};Re.onProgress=Ke;var xe=Ce>Z?"sliceUploadFile":"putObject",Le=Re.onFileFinish,Ve=function(ne,x){Re.tracker&&Re.tracker.formatResult(ne,x),Le&&Le(ne,x),me&&me(ne,x,Ge)};ge.push({api:xe,params:Re,callback:Ve})})()}),_._addTasks(ge)}function b(f,G){var _=new w,Z=this,De=f.Bucket,B=f.Region,Q=f.Key,Y=f.CopySource,ue=j.getSourceParams.call(this,Y);if(!ue){G(j.error(new Error("CopySource format error")));return}var de=ue.Bucket,me=ue.Region,ge=decodeURIComponent(ue.Key),Re=f.CopySliceSize===void 0?Z.options.CopySliceSize:f.CopySliceSize;Re=Math.max(0,Re);var he=f.CopyChunkSize||this.options.CopyChunkSize,ye=this.options.CopyChunkParallelLimit,Ce=this.options.ChunkRetryTimes+1,Ge=0,Ae=0,pe,Te,we={},Ue={},Ke={};_.on("copy_slice_complete",function(xe){var Le={};j.each(f.Headers,function(Me,ne){ne.toLowerCase().indexOf("x-cos-meta-")===0&&(Le[ne]=Me)});var Ve=j.map(xe.PartList,function(Me){return{PartNumber:Me.PartNumber,ETag:Me.ETag}});V.retry(Ce,function(Me){Z.multipartComplete({Bucket:De,Region:B,Key:Q,UploadId:xe.UploadId,Parts:Ve,calledBySdk:"sliceCopyFile"},Me)},function(Me,ne){if(t.removeUsing(xe.UploadId),Me)return Te(null,!0),G(Me);t.removeUploadId(xe.UploadId),Te({loaded:pe,total:pe},!0),G(null,ne)})}),_.on("get_copy_data_finish",function(xe){var Le=t.getCopyFileId(Y,we,he,De,Q);Le&&t.saveUploadId(Le,xe.UploadId,Z.options.UploadIdCacheLimit),t.setUsing(xe.UploadId);var Ve=j.filter(xe.PartList,function(Me){return Me.Uploaded&&(Ae+=Me.PartNumber>=Ge&&pe%he||he),!Me.Uploaded});V.eachLimit(Ve,ye,function(Me,ne){var x=Me.PartNumber,H=Me.CopySourceRange,N=Me.end-Me.start;V.retry(Ce,function(oe){m.call(Z,{Bucket:De,Region:B,Key:Q,CopySource:Y,UploadId:xe.UploadId,PartNumber:x,CopySourceRange:H},oe)},function(oe,Se){if(oe)return ne(oe);Ae+=N,Te({loaded:Ae,total:pe}),Me.ETag=Se.ETag,ne(oe||null,Se)})},function(Me){if(Me)return t.removeUsing(xe.UploadId),Te(null,!0),G(Me);_.emit("copy_slice_complete",xe)})}),_.on("get_chunk_size_finish",function(){var xe=function(){Z.multipartInit({Bucket:De,Region:B,Key:Q,Headers:Ke},function(x,H){if(x)return G(x);f.UploadId=H.UploadId,_.emit("get_copy_data_finish",{UploadId:f.UploadId,PartList:f.PartList})})},Le=t.getCopyFileId(Y,we,he,De,Q),Ve=t.getUploadIdList(Le);if(!Le||!Ve)return xe();var Me=function ne(x){if(x>=Ve.length)return xe();var H=Ve[x];if(t.using[H])return ne(x+1);W.call(Z,{Bucket:De,Region:B,Key:Q,UploadId:H},function(N,oe){if(N)t.removeUploadId(H),ne(x+1);else{if(t.using[H])return ne(x+1);var Se={},je=0;j.each(oe.PartList,function(k){var u=parseInt(k.Size),h=je+u-1;Se[k.PartNumber+"|"+je+"|"+h]=k.ETag,je+=u}),j.each(f.PartList,function(k){var u=Se[k.PartNumber+"|"+k.start+"|"+k.end];u&&(k.ETag=u,k.Uploaded=!0)}),_.emit("get_copy_data_finish",{UploadId:H,PartList:f.PartList})}})};Me(0)}),_.on("get_file_size_finish",function(){if(function(){for(var Le=[1,2,4,8,16,32,64,128,256,512,1024,1024*2,1024*4,1024*5],Ve=1024*1024,Me=0;Me<Le.length&&(Ve=Le[Me]*1024*1024,!(pe/Ve<=Z.options.MaxPartNumber));Me++);f.ChunkSize=he=Math.max(he,Ve),Ge=Math.ceil(pe/he);for(var ne=[],x=1;x<=Ge;x++){var H=(x-1)*he,N=x*he<pe?x*he-1:pe-1,oe={PartNumber:x,start:H,end:N,CopySourceRange:"bytes="+H+"-"+N};ne.push(oe)}f.PartList=ne}(),f.Headers["x-cos-metadata-directive"]==="Replaced"?Ke=f.Headers:Ke=Ue,Ke["x-cos-storage-class"]=f.Headers["x-cos-storage-class"]||Ue["x-cos-storage-class"],Ke=j.clearKey(Ke),Ue["x-cos-storage-class"]==="ARCHIVE"||Ue["x-cos-storage-class"]==="DEEP_ARCHIVE"){var xe=Ue["x-cos-restore"];if(!xe||xe==='ongoing-request="true"'){G(j.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete Ke["x-cos-copy-source"],delete Ke["x-cos-metadata-directive"],delete Ke["x-cos-copy-source-If-Modified-Since"],delete Ke["x-cos-copy-source-If-Unmodified-Since"],delete Ke["x-cos-copy-source-If-Match"],delete Ke["x-cos-copy-source-If-None-Match"],_.emit("get_chunk_size_finish")}),Z.headObject({Bucket:de,Region:me,Key:ge},function(xe,Le){if(xe){xe.statusCode&&xe.statusCode===404?G(j.error(xe,{ErrorStatus:ge+" Not Exist"})):G(xe);return}if(pe=f.FileSize=Le.headers["content-length"],pe===void 0||!pe){G(j.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.\uFF08 \u83B7\u53D6Content-Length\u5931\u8D25\uFF0C\u8BF7\u5728CORS ExposeHeader\u8BBE\u7F6E\u4E2D\u6DFB\u52A0Content-Length\uFF0C\u8BF7\u53C2\u8003\u6587\u6863\uFF1Ahttps://cloud.tencent.com/document/product/436/13318 \uFF09')));return}if(Te=j.throttleOnProgress.call(Z,pe,f.onProgress),pe<=Re)f.Headers["x-cos-metadata-directive"]||(f.Headers["x-cos-metadata-directive"]="Copy"),Z.putObjectCopy(f,function(Me,ne){if(Me)return Te(null,!0),G(Me);Te({loaded:pe,total:pe},!0),G(Me,ne)});else{var Ve=Le.headers;we=Ve,Ue={"Cache-Control":Ve["cache-control"],"Content-Disposition":Ve["content-disposition"],"Content-Encoding":Ve["content-encoding"],"Content-Type":Ve["content-type"],Expires:Ve.expires,"x-cos-storage-class":Ve["x-cos-storage-class"]},j.each(Ve,function(Me,ne){var x="x-cos-meta-";ne.indexOf(x)===0&&ne.length>x.length&&(Ue[ne]=Me)}),_.emit("get_file_size_finish")}})}function m(f,G){var _=f.TaskId,Z=f.Bucket,De=f.Region,B=f.Key,Q=f.CopySource,Y=f.UploadId,ue=f.PartNumber*1,de=f.CopySourceRange,me=this.options.ChunkRetryTimes+1,ge=this;V.retry(me,function(Re){ge.uploadPartCopy({TaskId:_,Bucket:Z,Region:De,Key:B,CopySource:Q,UploadId:Y,PartNumber:ue,CopySourceRange:de},function(he,ye){Re(he||null,ye)})},function(Re,he){return G(Re,he)})}var D={sliceUploadFile:L,abortUploadTask:le,uploadFile:Ne,uploadFiles:F,sliceCopyFile:b};g.exports.init=function(f,G){G.transferToTaskMethod(D,"sliceUploadFile"),j.each(D,function(_,Z){f.prototype[Z]=j.apiWrapper(Z,_)})}},"./src/async.js":function(g,S){var r=function(w,j,ae,L){if(L=L||function(){},!w.length||j<=0)return L();var I=0,q=0,W=0;(function te(){if(I>=w.length)return L();for(;W<j&&q<w.length;)q+=1,W+=1,ae(w[q-1],function(K){K?(L(K),L=function(){}):(I+=1,W-=1,I>=w.length?L():te())})})()},l=function(w,j,ae){var L=function I(q){j(function(W,te){W&&q<w?I(q+1):ae(W,te)})};w<1?ae():L(1)},t={eachLimit:r,retry:l};g.exports=t},"./src/base.js":function(g,S,r){var l=r("./lib/request.js"),t=r("./src/util.js");function V(e,o){typeof e=="function"&&(o=e,e={});var n=this.options.Protocol||(t.isBrowser&&location.protocol==="http:"?"http:":"https:"),s=this.options.ServiceDomain,d=e.AppId||this.options.appId,c=e.Region;s?(s=s.replace(/\{\{AppId\}\}/ig,d||"").replace(/\{\{Region\}\}/ig,c||"").replace(/\{\{.*?\}\}/ig,""),/^[a-zA-Z]+:\/\//.test(s)||(s=n+"//"+s),s.slice(-1)==="/"&&(s=s.slice(0,-1))):c?s=n+"//cos."+c+".myqcloud.com":s=n+"//service.cos.myqcloud.com";var y="",T=c?"cos."+c+".myqcloud.com":"service.cos.myqcloud.com",E=s.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");T===E&&(y=T),C.call(this,{Action:"name/cos:GetService",url:s,method:"GET",headers:e.Headers,SignHost:y},function(R,O){if(R)return o(R);var A=O&&O.ListAllMyBucketsResult&&O.ListAllMyBucketsResult.Buckets&&O.ListAllMyBucketsResult.Buckets.Bucket||[];A=t.isArray(A)?A:[A];var z=O&&O.ListAllMyBucketsResult&&O.ListAllMyBucketsResult.Owner||{};o(null,{Buckets:A,Owner:z,statusCode:O.statusCode,headers:O.headers})})}function w(e,o){var n=this,s="";if(e.BucketAZConfig){var d={BucketAZConfig:e.BucketAZConfig};s=t.json2xml({CreateBucketConfiguration:d})}C.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:s},function(c,y){if(c)return o(c);var T=nt({protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});o(null,{Location:T,statusCode:y.statusCode,headers:y.headers})})}function j(e,o){C.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},o)}function ae(e,o){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,C.call(this,{Action:"name/cos:GetBucket",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n},function(s,d){if(s)return o(s);var c=d.ListBucketResult||{},y=c.Contents||[],T=c.CommonPrefixes||[];y=t.isArray(y)?y:[y],T=t.isArray(T)?T:[T];var E=t.clone(c);t.extend(E,{Contents:y,CommonPrefixes:T,statusCode:d.statusCode,headers:d.headers}),o(null,E)})}function L(e,o){C.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function I(e,o){var n=e.Headers,s="";if(e.AccessControlPolicy){var d=t.clone(e.AccessControlPolicy||{}),c=d.Grants||d.Grant;c=t.isArray(c)?c:[c],delete d.Grant,delete d.Grants,d.AccessControlList={Grant:c},s=t.json2xml({AccessControlPolicy:d}),n["Content-Type"]="application/xml",n["Content-MD5"]=t.binaryBase64(t.md5(s))}t.each(n,function(y,T){T.indexOf("x-cos-grant-")===0&&(n[T]=Ye(n[T]))}),C.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:s},function(y,T){if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function q(e,o){C.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},function(n,s){if(n)return o(n);var d=s.AccessControlPolicy||{},c=d.Owner||{},y=d.AccessControlList.Grant||[];y=t.isArray(y)?y:[y];var T=vt(d);s.headers&&s.headers["x-cos-acl"]&&(T.ACL=s.headers["x-cos-acl"]),T=t.extend(T,{Owner:c,Grants:y,statusCode:s.statusCode,headers:s.headers}),o(null,T)})}function W(e,o){var n=e.CORSConfiguration||{},s=n.CORSRules||e.CORSRules||[];s=t.clone(t.isArray(s)?s:[s]),t.each(s,function(T){t.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(E){var R=E+"s",O=T[R]||T[E]||[];delete T[R],T[E]=t.isArray(O)?O:[O]})});var d={CORSRule:s};e.ResponseVary&&(d.ResponseVary=e.ResponseVary);var c=t.json2xml({CORSConfiguration:d}),y=e.Headers;y["Content-Type"]="application/xml",y["Content-MD5"]=t.binaryBase64(t.md5(c)),C.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"cors",headers:y},function(T,E){if(T)return o(T);o(null,{statusCode:E.statusCode,headers:E.headers})})}function te(e,o){C.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(n,s){if(n){if(n.statusCode===404&&n.error&&n.error.Code==="NoSuchCORSConfiguration"){var d={CORSRules:[],statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}var c=s.CORSConfiguration||{},y=c.CORSRules||c.CORSRule||[];y=t.clone(t.isArray(y)?y:[y]);var T=c.ResponseVary;t.each(y,function(E){t.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(R){var O=R+"s",A=E[O]||E[R]||[];delete E[R],E[O]=t.isArray(A)?A:[A]})}),o(null,{CORSRules:y,ResponseVary:T,statusCode:s.statusCode,headers:s.headers})})}function K(e,o){C.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode||n.statusCode,headers:s.headers})})}function $(e,o){C.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},o)}function le(e,o){var n=e.Policy;try{typeof n=="string"&&(n=JSON.parse(n))}catch(c){}if(!n||typeof n=="string")return o(t.error(new Error("Policy format error")));var s=JSON.stringify(n);n.version||(n.version="2.0");var d=e.Headers;d["Content-Type"]="application/json",d["Content-MD5"]=t.binaryBase64(t.md5(s)),C.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:s,headers:d},function(c,y){if(c&&c.statusCode===204)return o(null,{statusCode:c.statusCode});if(c)return o(c);o(null,{statusCode:y.statusCode,headers:y.headers})})}function X(e,o){C.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},function(n,s){if(n)return n.statusCode&&n.statusCode===403?o(t.error(n,{ErrorStatus:"Access Denied"})):n.statusCode&&n.statusCode===405?o(t.error(n,{ErrorStatus:"Method Not Allowed"})):n.statusCode&&n.statusCode===404?o(t.error(n,{ErrorStatus:"Policy Not Found"})):o(n);var d={};try{d=JSON.parse(s.body)}catch(c){}o(null,{Policy:d,statusCode:s.statusCode,headers:s.headers})})}function Ne(e,o){C.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode||n.statusCode,headers:s.headers})})}function F(e,o){var n=e.Tagging||{},s=n.TagSet||n.Tags||e.Tags||[];s=t.clone(t.isArray(s)?s:[s]);var d=t.json2xml({Tagging:{TagSet:{Tag:s}}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:d,action:"tagging",headers:c},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function b(e,o){C.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(n,s){if(n){if(n.statusCode===404&&n.error&&(n.error==="Not Found"||n.error.Code==="NoSuchTagSet")){var d={Tags:[],statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}var c=[];try{c=s.Tagging.TagSet.Tag||[]}catch(y){}c=t.clone(t.isArray(c)?c:[c]),o(null,{Tags:c,statusCode:s.statusCode,headers:s.headers})})}function m(e,o){C.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function D(e,o){var n=e.LifecycleConfiguration||{},s=n.Rules||e.Rules||[];s=t.clone(s);var d=t.json2xml({LifecycleConfiguration:{Rule:s}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:d,action:"lifecycle",headers:c},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function f(e,o){C.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(n,s){if(n){if(n.statusCode===404&&n.error&&n.error.Code==="NoSuchLifecycleConfiguration"){var d={Rules:[],statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}var c=[];try{c=s.LifecycleConfiguration.Rule||[]}catch(y){}c=t.clone(t.isArray(c)?c:[c]),o(null,{Rules:c,statusCode:s.statusCode,headers:s.headers})})}function G(e,o){C.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function _(e,o){if(!e.VersioningConfiguration){o(t.error(new Error("missing param VersioningConfiguration")));return}var n=e.VersioningConfiguration||{},s=t.json2xml({VersioningConfiguration:n}),d=e.Headers;d["Content-Type"]="application/xml",d["Content-MD5"]=t.binaryBase64(t.md5(s)),C.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:s,action:"versioning",headers:d},function(c,y){if(c&&c.statusCode===204)return o(null,{statusCode:c.statusCode});if(c)return o(c);o(null,{statusCode:y.statusCode,headers:y.headers})})}function Z(e,o){C.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},function(n,s){n||!s.VersioningConfiguration&&(s.VersioningConfiguration={}),o(n,s)})}function De(e,o){var n=t.clone(e.ReplicationConfiguration),s=t.json2xml({ReplicationConfiguration:n});s=s.replace(/<(\/?)Rules>/ig,"<$1Rule>"),s=s.replace(/<(\/?)Tags>/ig,"<$1Tag>");var d=e.Headers;d["Content-Type"]="application/xml",d["Content-MD5"]=t.binaryBase64(t.md5(s)),C.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:s,action:"replication",headers:d},function(c,y){if(c&&c.statusCode===204)return o(null,{statusCode:c.statusCode});if(c)return o(c);o(null,{statusCode:y.statusCode,headers:y.headers})})}function B(e,o){C.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(n,s){if(n){if(n.statusCode===404&&n.error&&(n.error==="Not Found"||n.error.Code==="ReplicationConfigurationnotFoundError")){var d={ReplicationConfiguration:{Rules:[]},statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}!s.ReplicationConfiguration&&(s.ReplicationConfiguration={}),s.ReplicationConfiguration.Rule&&(s.ReplicationConfiguration.Rules=t.makeArray(s.ReplicationConfiguration.Rule),delete s.ReplicationConfiguration.Rule),o(n,s)})}function Q(e,o){C.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function Y(e,o){if(!e.WebsiteConfiguration){o(t.error(new Error("missing param WebsiteConfiguration")));return}var n=t.clone(e.WebsiteConfiguration||{}),s=n.RoutingRules||n.RoutingRule||[];s=t.isArray(s)?s:[s],delete n.RoutingRule,delete n.RoutingRules,s.length&&(n.RoutingRules={RoutingRule:s});var d=t.json2xml({WebsiteConfiguration:n}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:d,action:"website",headers:c},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function ue(e,o){C.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website"},function(n,s){if(n){if(n.statusCode===404&&n.error.Code==="NoSuchWebsiteConfiguration"){var d={WebsiteConfiguration:{},statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}var c=s.WebsiteConfiguration||{};if(c.RoutingRules){var y=t.clone(c.RoutingRules.RoutingRule||[]);y=t.makeArray(y),c.RoutingRules=y}o(null,{WebsiteConfiguration:c,statusCode:s.statusCode,headers:s.headers})})}function de(e,o){C.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function me(e,o){if(!e.RefererConfiguration){o(t.error(new Error("missing param RefererConfiguration")));return}var n=t.clone(e.RefererConfiguration||{}),s=n.DomainList||{},d=s.Domains||s.Domain||[];d=t.isArray(d)?d:[d],d.length&&(n.DomainList={Domain:d});var c=t.json2xml({RefererConfiguration:n}),y=e.Headers;y["Content-Type"]="application/xml",y["Content-MD5"]=t.binaryBase64(t.md5(c)),C.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"referer",headers:y},function(T,E){if(T&&T.statusCode===204)return o(null,{statusCode:T.statusCode});if(T)return o(T);o(null,{statusCode:E.statusCode,headers:E.headers})})}function ge(e,o){C.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer"},function(n,s){if(n){if(n.statusCode===404&&n.error.Code==="NoSuchRefererConfiguration"){var d={WebsiteConfiguration:{},statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}var c=s.RefererConfiguration||{};if(c.DomainList){var y=t.makeArray(c.DomainList.Domain||[]);c.DomainList={Domains:y}}o(null,{RefererConfiguration:c,statusCode:s.statusCode,headers:s.headers})})}function Re(e,o){var n=e.DomainConfiguration||{},s=n.DomainRule||e.DomainRule||[];s=t.clone(s);var d=t.json2xml({DomainConfiguration:{DomainRule:s}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:d,action:"domain",headers:c},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function he(e,o){C.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},function(n,s){if(n)return o(n);var d=[];try{d=s.DomainConfiguration.DomainRule||[]}catch(c){}d=t.clone(t.isArray(d)?d:[d]),o(null,{DomainRule:d,statusCode:s.statusCode,headers:s.headers})})}function ye(e,o){C.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function Ce(e,o){var n=e.OriginConfiguration||{},s=n.OriginRule||e.OriginRule||[];s=t.clone(s);var d=t.json2xml({OriginConfiguration:{OriginRule:s}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:d,action:"origin",headers:c},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function Ge(e,o){C.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},function(n,s){if(n)return o(n);var d=[];try{d=s.OriginConfiguration.OriginRule||[]}catch(c){}d=t.clone(t.isArray(d)?d:[d]),o(null,{OriginRule:d,statusCode:s.statusCode,headers:s.headers})})}function Ae(e,o){C.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function pe(e,o){var n=t.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=t.binaryBase64(t.md5(n)),C.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"logging",headers:s},function(d,c){if(d&&d.statusCode===204)return o(null,{statusCode:d.statusCode});if(d)return o(d);o(null,{statusCode:c.statusCode,headers:c.headers})})}function Te(e,o){C.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging"},function(n,s){if(n)return o(n);o(null,{BucketLoggingStatus:s.BucketLoggingStatus,statusCode:s.statusCode,headers:s.headers})})}function we(e,o){var n=t.clone(e.InventoryConfiguration);if(n.OptionalFields){var s=n.OptionalFields||[];n.OptionalFields={Field:s}}if(n.Destination&&n.Destination.COSBucketDestination&&n.Destination.COSBucketDestination.Encryption){var d=n.Destination.COSBucketDestination.Encryption;Object.keys(d).indexOf("SSECOS")>-1&&(d["SSE-COS"]=d.SSECOS,delete d.SSECOS)}var c=t.json2xml({InventoryConfiguration:n}),y=e.Headers;y["Content-Type"]="application/xml",y["Content-MD5"]=t.binaryBase64(t.md5(c)),C.call(this,{Action:"name/cos:PutBucketInventory",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:c,action:"inventory",qs:{id:e.Id},headers:y},function(T,E){if(T&&T.statusCode===204)return o(null,{statusCode:T.statusCode});if(T)return o(T);o(null,{statusCode:E.statusCode,headers:E.headers})})}function Ue(e,o){C.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},function(n,s){if(n)return o(n);var d=s.InventoryConfiguration;if(d&&d.OptionalFields&&d.OptionalFields.Field){var c=d.OptionalFields.Field;t.isArray(c)||(c=[c]),d.OptionalFields=c}if(d.Destination&&d.Destination.COSBucketDestination&&d.Destination.COSBucketDestination.Encryption){var y=d.Destination.COSBucketDestination.Encryption;Object.keys(y).indexOf("SSE-COS")>-1&&(y.SSECOS=y["SSE-COS"],delete y["SSE-COS"])}o(null,{InventoryConfiguration:d,statusCode:s.statusCode,headers:s.headers})})}function Ke(e,o){C.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken}},function(n,s){if(n)return o(n);var d=s.ListInventoryConfigurationResult,c=d.InventoryConfiguration||[];c=t.isArray(c)?c:[c],delete d.InventoryConfiguration,t.each(c,function(y){if(y&&y.OptionalFields&&y.OptionalFields.Field){var T=y.OptionalFields.Field;t.isArray(T)||(T=[T]),y.OptionalFields=T}if(y.Destination&&y.Destination.COSBucketDestination&&y.Destination.COSBucketDestination.Encryption){var E=y.Destination.COSBucketDestination.Encryption;Object.keys(E).indexOf("SSE-COS")>-1&&(E.SSECOS=E["SSE-COS"],delete E["SSE-COS"])}}),d.InventoryConfigurations=c,t.extend(d,{statusCode:s.statusCode,headers:s.headers}),o(null,d)})}function xe(e,o){C.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function Le(e,o){if(!e.AccelerateConfiguration){o(t.error(new Error("missing param AccelerateConfiguration")));return}var n={AccelerateConfiguration:e.AccelerateConfiguration||{}},s=t.json2xml(n),d={};d["Content-Type"]="application/xml",d["Content-MD5"]=t.binaryBase64(t.md5(s)),C.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:s,action:"accelerate",headers:d},function(c,y){if(c)return o(c);o(null,{statusCode:y.statusCode,headers:y.headers})})}function Ve(e,o){C.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate"},function(n,s){n||!s.AccelerateConfiguration&&(s.AccelerateConfiguration={}),o(n,s)})}function Me(e,o){var n=e.ServerSideEncryptionConfiguration||{},s=n.Rule||n.Rules||[],d=t.json2xml({ServerSideEncryptionConfiguration:{Rule:s}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:d,action:"encryption",headers:c},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function ne(e,o){C.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},function(n,s){if(n){if(n.statusCode===404&&n.code==="NoSuchEncryptionConfiguration"){var d={EncryptionConfiguration:{Rules:[]},statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}var c=t.makeArray(s.EncryptionConfiguration&&s.EncryptionConfiguration.Rule||[]);s.EncryptionConfiguration={Rules:c},o(n,s)})}function x(e,o){C.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function H(e,o){C.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(n,s){if(n){var d=n.statusCode;return e.Headers["If-Modified-Since"]&&d&&d===304?o(null,{NotModified:!0,statusCode:d}):o(n)}s.ETag=t.attr(s.headers,"etag",""),o(null,s)})}function N(e,o){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n["key-marker"]=e.KeyMarker,n["version-id-marker"]=e.VersionIdMarker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,C.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"versions"},function(s,d){if(s)return o(s);var c=d.ListVersionsResult||{},y=c.DeleteMarker||[];y=t.isArray(y)?y:[y];var T=c.Version||[];T=t.isArray(T)?T:[T];var E=t.clone(c);delete E.DeleteMarker,delete E.Version,t.extend(E,{DeleteMarkers:y,Versions:T,statusCode:d.statusCode,headers:d.headers}),o(null,E)})}function oe(e,o){var n=e.Query||{},s=e.QueryString||"",d=t.throttleOnProgress.call(this,0,e.onProgress),c=e.tracker;c&&c.setParams({signStartTime:new Date().getTime()}),n["response-content-type"]=e.ResponseContentType,n["response-content-language"]=e.ResponseContentLanguage,n["response-expires"]=e.ResponseExpires,n["response-cache-control"]=e.ResponseCacheControl,n["response-content-disposition"]=e.ResponseContentDisposition,n["response-content-encoding"]=e.ResponseContentEncoding,C.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:n,qsStr:s,rawBody:!0,onDownloadProgress:d,tracker:c},function(y,T){if(d(null,!0),y){var E=y.statusCode;return e.Headers["If-Modified-Since"]&&E&&E===304?o(null,{NotModified:!0}):o(y)}o(null,{Body:T.body,ETag:t.attr(T.headers,"etag",""),statusCode:T.statusCode,headers:T.headers})})}function Se(e,o){var n=this,s=e.ContentLength,d=t.throttleOnProgress.call(n,s,e.onProgress),c=e.Headers;!c["Cache-Control"]&&!c["cache-control"]&&(c["Cache-Control"]=""),!c["Content-Type"]&&!c["content-type"]&&(c["Content-Type"]=e.Body&&e.Body.type||"");var y=e.UploadAddMetaMd5||n.options.UploadAddMetaMd5||n.options.UploadCheckContentMd5,T=e.tracker;y&&T&&T.setParams({md5StartTime:new Date().getTime()}),t.getBodyMd5(y,e.Body,function(E){E&&(T&&T.setParams({md5EndTime:new Date().getTime()}),n.options.UploadCheckContentMd5&&(c["Content-MD5"]=t.binaryBase64(E)),(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5)&&(c["x-cos-meta-md5"]=E)),e.ContentLength!==void 0&&(c["Content-Length"]=e.ContentLength),d(null,!0),C.call(n,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:d,tracker:T},function(R,O){if(R)return d(null,!0),o(R);d({loaded:s,total:s},!0);var A=nt({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:n.options.UseAccelerate?"accelerate":e.Region,object:e.Key});A=A.substr(A.indexOf("://")+3),O.Location=A,O.ETag=t.attr(O.headers,"etag",""),o(null,O)})},e.onHashProgress)}function je(e,o){C.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":""},function(n,s){if(n){var d=n.statusCode;return d&&d===404?o(null,{BucketNotFound:!0,statusCode:d}):o(n)}o(null,{statusCode:s.statusCode,headers:s.headers})})}function k(e,o){C.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},function(n,s){if(n)return o(n);var d=s.AccessControlPolicy||{},c=d.Owner||{},y=d.AccessControlList&&d.AccessControlList.Grant||[];y=t.isArray(y)?y:[y];var T=vt(d);delete T.GrantWrite,s.headers&&s.headers["x-cos-acl"]&&(T.ACL=s.headers["x-cos-acl"]),T=t.extend(T,{Owner:c,Grants:y,statusCode:s.statusCode,headers:s.headers}),o(null,T)})}function u(e,o){var n=e.Headers,s="";if(e.AccessControlPolicy){var d=t.clone(e.AccessControlPolicy||{}),c=d.Grants||d.Grant;c=t.isArray(c)?c:[c],delete d.Grant,delete d.Grants,d.AccessControlList={Grant:c},s=t.json2xml({AccessControlPolicy:d}),n["Content-Type"]="application/xml",n["Content-MD5"]=t.binaryBase64(t.md5(s))}t.each(n,function(y,T){T.indexOf("x-cos-grant-")===0&&(n[T]=Ye(n[T]))}),C.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:s},function(y,T){if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function h(e,o){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,C.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n},function(s,d){if(s)return s.statusCode&&s.statusCode===403?o(null,{OptionsForbidden:!0,statusCode:s.statusCode}):o(s);var c=d.headers||{};o(null,{AccessControlAllowOrigin:c["access-control-allow-origin"],AccessControlAllowMethods:c["access-control-allow-methods"],AccessControlAllowHeaders:c["access-control-allow-headers"],AccessControlExposeHeaders:c["access-control-expose-headers"],AccessControlMaxAge:c["access-control-max-age"],statusCode:d.statusCode,headers:d.headers})})}function a(e,o){var n=this,s=e.Headers;!s["Cache-Control"]&&!s["cache-control"]&&(s["Cache-Control"]="");var d=e.CopySource||"",c=t.getSourceParams.call(this,d);if(!c){o(t.error(new Error("CopySource format error")));return}var y=c[1],T=c[3],E=decodeURIComponent(c[4]);C.call(this,{Scope:[{action:"name/cos:GetObject",bucket:y,region:T,prefix:E},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(R,O){if(R)return o(R);var A=t.clone(O.CopyObjectResult||{}),z=nt({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});t.extend(A,{Location:z,statusCode:O.statusCode,headers:O.headers}),o(null,A)})}function p(e,o){var n=e.CopySource||"",s=t.getSourceParams.call(this,n);if(!s){o(t.error(new Error("CopySource format error")));return}var d=s[1],c=s[3],y=decodeURIComponent(s[4]);C.call(this,{Scope:[{action:"name/cos:GetObject",bucket:d,region:c,prefix:y},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},function(T,E){if(T)return o(T);var R=t.clone(E.CopyPartResult||{});t.extend(R,{statusCode:E.statusCode,headers:E.headers}),o(null,R)})}function P(e,o){var n=e.Objects||[],s=e.Quiet;n=t.isArray(n)?n:[n];var d=t.json2xml({Delete:{Object:n,Quiet:s||!1}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d));var y=t.map(n,function(T){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:T.Key}});C.call(this,{Scope:y,method:"POST",Bucket:e.Bucket,Region:e.Region,body:d,action:"delete",headers:c},function(T,E){if(T)return o(T);var R=E.DeleteResult||{},O=R.Deleted||[],A=R.Error||[];O=t.isArray(O)?O:[O],A=t.isArray(A)?A:[A];var z=t.clone(R);t.extend(z,{Error:A,Deleted:O,statusCode:E.statusCode,headers:E.headers}),o(null,z)})}function U(e,o){var n=e.Headers;if(!e.RestoreRequest){o(t.error(new Error("missing param RestoreRequest")));return}var s=e.RestoreRequest||{},d=t.json2xml({RestoreRequest:s});n["Content-Type"]="application/xml",n["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:d,action:"restore",headers:n},o)}function re(e,o){var n=e.Tagging||{},s=n.TagSet||n.Tags||e.Tags||[];s=t.clone(t.isArray(s)?s:[s]);var d=t.json2xml({Tagging:{TagSet:{Tag:s}}}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:d,action:"tagging",headers:c,VersionId:e.VersionId},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);o(null,{statusCode:T.statusCode,headers:T.headers})})}function se(e,o){C.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId},function(n,s){if(n){if(n.statusCode===404&&n.error&&(n.error==="Not Found"||n.error.Code==="NoSuchTagSet")){var d={Tags:[],statusCode:n.statusCode};n.headers&&(d.headers=n.headers),o(null,d)}else o(n);return}var c=[];try{c=s.Tagging.TagSet.Tag||[]}catch(y){}c=t.clone(t.isArray(c)?c:[c]),o(null,{Tags:c,statusCode:s.statusCode,headers:s.headers})})}function be(e,o){C.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId},function(n,s){if(n&&n.statusCode===204)return o(null,{statusCode:n.statusCode});if(n)return o(n);o(null,{statusCode:s.statusCode,headers:s.headers})})}function ee(e,o){var n=e.SelectType;if(!n)return o(t.error(new Error("missing param SelectType")));var s=e.SelectRequest||{},d=t.json2xml({SelectRequest:s}),c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=t.binaryBase64(t.md5(d)),C.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:d,DataType:"arraybuffer",rawBody:!0},function(y,T){if(y&&y.statusCode===204)return o(null,{statusCode:y.statusCode});if(y)return o(y);var E=t.parseSelectPayload(T.body);o(null,{statusCode:T.statusCode,headers:T.headers,Body:E.body,Payload:E.payload})})}function He(e,o){var n=this,s=e.Headers,d=e.tracker;!s["Cache-Control"]&&!s["cache-control"]&&(s["Cache-Control"]=""),!s["Content-Type"]&&!s["content-type"]&&(s["Content-Type"]=e.Body&&e.Body.type||"");var c=e.Body&&(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5);c&&d&&d.setParams({md5StartTime:new Date().getTime()}),t.getBodyMd5(c,e.Body,function(y){y&&(e.Headers["x-cos-meta-md5"]=y),c&&d&&d.setParams({md5EndTime:new Date().getTime()}),C.call(n,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:d},function(T,E){if(T)return d&&d.parent&&d.parent.setParams({errorNode:"multipartInit"}),o(T);if(E=t.clone(E||{}),E&&E.InitiateMultipartUploadResult)return o(null,t.extend(E.InitiateMultipartUploadResult,{statusCode:E.statusCode,headers:E.headers}));o(null,E)})},e.onHashProgress)}function ie(e,o){var n=this;t.getFileSize("multipartUpload",e,function(){var s=e.tracker,d=n.options.UploadCheckContentMd5;d&&s&&s.setParams({md5StartTime:new Date().getTime()}),t.getBodyMd5(d,e.Body,function(c){c&&(e.Headers["Content-MD5"]=t.binaryBase64(c)),d&&s&&s.setParams({md5EndTime:new Date().getTime()}),s&&s.setParams({partNumber:e.PartNumber}),C.call(n,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:s},function(y,T){if(y)return s&&s.parent&&s.parent.setParams({errorNode:"multipartUpload"}),o(y);o(null,{ETag:t.attr(T.headers,"etag",""),statusCode:T.statusCode,headers:T.headers})})})})}function ze(e,o){for(var n=this,s=e.UploadId,d=e.Parts,c=e.tracker,y=0,T=d.length;y<T;y++)d[y].ETag&&d[y].ETag.indexOf('"')===0||(d[y].ETag='"'+d[y].ETag+'"');var E=t.json2xml({CompleteMultipartUpload:{Part:d}});E=E.replace(/\n\s*/g,"");var R=e.Headers;R["Content-Type"]="application/xml",R["Content-MD5"]=t.binaryBase64(t.md5(E)),C.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:s},body:E,headers:R,tracker:c},function(O,A){if(O)return c&&c.parent&&c.parent.setParams({errorNode:"multipartComplete"}),o(O);var z=nt({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),J=A.CompleteMultipartUploadResult||{};J.ProcessResults&&J&&J.ProcessResults&&(J.UploadResult={OriginalInfo:{Key:J.Key,Location:z,ETag:J.ETag,ImageInfo:J.ImageInfo},ProcessResults:J.ProcessResults},delete J.ImageInfo,delete J.ProcessResults);var Ie=t.extend(J,{Location:z,statusCode:A.statusCode,headers:A.headers});o(null,Ie)})}function Be(e,o){var n={};n.delimiter=e.Delimiter,n["encoding-type"]=e.EncodingType,n.prefix=e.Prefix||"",n["max-uploads"]=e.MaxUploads,n["key-marker"]=e.KeyMarker,n["upload-id-marker"]=e.UploadIdMarker,n=t.clearKey(n);var s=e.tracker;s&&s.setParams({signStartTime:new Date().getTime()}),C.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"uploads",tracker:s},function(d,c){if(d)return s&&s.parent&&s.parent.setParams({errorNode:"multipartList"}),o(d);if(c&&c.ListMultipartUploadsResult){var y=c.ListMultipartUploadsResult.Upload||[];y=t.isArray(y)?y:[y],c.ListMultipartUploadsResult.Upload=y}var T=t.clone(c.ListMultipartUploadsResult||{});t.extend(T,{statusCode:c.statusCode,headers:c.headers}),o(null,T)})}function Fe(e,o){var n={},s=e.tracker;n.uploadId=e.UploadId,n["encoding-type"]=e.EncodingType,n["max-parts"]=e.MaxParts,n["part-number-marker"]=e.PartNumberMarker,C.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},function(d,c){if(d)return s&&s.parent&&s.parent.setParams({errorNode:"multipartListPart"}),o(d);var y=c.ListPartsResult||{},T=y.Part||[];T=t.isArray(T)?T:[T],y.Part=T;var E=t.clone(y);t.extend(E,{statusCode:c.statusCode,headers:c.headers}),o(null,E)})}function Xe(e,o){var n={};n.uploadId=e.UploadId,C.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},function(s,d){if(s)return o(s);o(null,{statusCode:d.statusCode,headers:d.headers})})}function qe(e,o){C.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType},function(n,s){if(n)return o(n);s&&s.body&&(s.Body=s.body,delete s.body),o(n,s)})}function We(e,o){var n=e.Headers;!n["Cache-Control"]&&!n["cache-control"]&&(n["Cache-Control"]=""),!n["Content-Type"]&&!n["content-type"]&&(n["Content-Type"]=e.Body&&e.Body.type||""),C.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers},function(s,d){if(s)return o(s);o(null,d)})}function $e(e){var o=this;return t.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:o.options.UseRawKey,SystemClockOffset:o.options.SystemClockOffset})}function ot(e,o){var n=this,s=e.UseAccelerate===void 0?n.options.UseAccelerate:e.UseAccelerate,d=nt({ForcePathStyle:n.options.ForcePathStyle,protocol:e.Protocol||n.options.Protocol,domain:e.Domain||n.options.Domain,bucket:e.Bucket,region:s?"accelerate":e.Region,object:e.Key}),c="";e.Query&&(c+=t.obj2str(e.Query)),e.QueryString&&(c+=(c?"&":"")+e.QueryString);var y=d;if(e.Sign!==void 0&&!e.Sign)return c&&(y+="?"+c),o(null,{Url:y}),y;var T=et.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:d}),E=i.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:T,ForceSignHost:e.ForceSignHost===!1?!1:n.options.ForceSignHost},function(R,O){if(!!o){if(R){o(R);return}var A=function(Ie){var ke=Ie.match(/q-url-param-list.*?(?=&)/g)[0],ce="q-url-param-list="+encodeURIComponent(ke.replace(/q-url-param-list=/,"")).toLowerCase(),_e=new RegExp(ke,"g"),Ee=Ie.replace(_e,ce);return Ee},z=d;z+="?"+(O.Authorization.indexOf("q-signature")>-1?A(O.Authorization):"sign="+encodeURIComponent(O.Authorization)),O.SecurityToken&&(z+="&x-cos-security-token="+O.SecurityToken),O.ClientIP&&(z+="&clientIP="+O.ClientIP),O.ClientUA&&(z+="&clientUA="+O.ClientUA),O.Token&&(z+="&token="+O.Token),c&&(z+="&"+c),setTimeout(function(){o(null,{Url:z})})}});return E?(y+="?"+E.Authorization+(E.SecurityToken?"&x-cos-security-token="+E.SecurityToken:""),c&&(y+="&"+c)):c&&(y+="?"+c),y}function vt(e){var o={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},s=e&&e.AccessControlList||{},d=s.Grant;d&&(d=t.isArray(d)?d:[d]);var c={READ:0,WRITE:0,FULL_CONTROL:0};return d&&d.length&&t.each(d,function(y){y.Grantee.ID==="qcs::cam::anyone:anyone"||y.Grantee.URI==="http://cam.qcloud.com/groups/global/AllUsers"?c[y.Permission]=1:y.Grantee.ID!==e.Owner.ID&&o[n[y.Permission]].push('id="'+y.Grantee.ID+'"')}),c.FULL_CONTROL||c.WRITE&&c.READ?o.ACL="public-read-write":c.READ?o.ACL="public-read":o.ACL="private",t.each(n,function(y){o[y]=Ye(o[y].join(","))}),o}function Ye(e){var o=e.split(","),n={},s,d;for(s=0;s<o.length;)d=o[s].trim(),n[d]?o.splice(s,1):(n[d]=!0,o[s]=d,s++);return o.join(",")}function nt(e){var o=e.region||"",n=e.bucket||"",s=n.substr(0,n.lastIndexOf("-")),d=n.substr(n.lastIndexOf("-")+1),c=e.domain,y=e.object;typeof c=="function"&&(c=c({Bucket:n,Region:o}));var T=e.protocol||(t.isBrowser&&location.protocol==="http:"?"http:":"https:");c||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(o)>-1?c="{Region}.myqcloud.com":c="cos.{Region}.myqcloud.com",e.ForcePathStyle||(c="{Bucket}."+c)),c=c.replace(/\{\{AppId\}\}/ig,d).replace(/\{\{Bucket\}\}/ig,s).replace(/\{\{Region\}\}/ig,o).replace(/\{\{.*?\}\}/ig,""),c=c.replace(/\{AppId\}/ig,d).replace(/\{BucketName\}/ig,s).replace(/\{Bucket\}/ig,n).replace(/\{Region\}/ig,o).replace(/\{.*?\}/ig,""),/^[a-zA-Z]+:\/\//.test(c)||(c=T+"//"+c),c.slice(-1)==="/"&&(c=c.slice(0,-1));var E=c;return e.ForcePathStyle&&(E+="/"+n),E+="/",y&&(E+=t.camSafeUrlEncode(y).replace(/%2F/g,"/")),e.isLocation&&(E=E.replace(/^https?:\/\//,"")),E}var et=function(o){if(!o.Bucket||!o.Region)return"";var n=o.UseAccelerate===void 0?this.options.UseAccelerate:o.UseAccelerate,s=o.Url||nt({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:o.Bucket,region:n?"accelerate":o.Region}),d=s.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1"),c=new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$");return c.test(d)?d:""};function i(e,o){var n=t.clone(e.Headers),s="";t.each(n,function(Pe,Oe){(Pe===""||["content-type","cache-control","expires"].indexOf(Oe.toLowerCase())>-1)&&delete n[Oe],Oe.toLowerCase()==="host"&&(s=Pe)});var d=e.ForceSignHost!==!1;!s&&e.SignHost&&d&&(n.Host=e.SignHost);var c=!1,y=function(Oe,Ze){c||(c=!0,Ze&&Ze.XCosSecurityToken&&!Ze.SecurityToken&&(Ze=t.clone(Ze),Ze.SecurityToken=Ze.XCosSecurityToken,delete Ze.XCosSecurityToken),o&&o(Oe,Ze))},T=this,E=e.Bucket||"",R=e.Region||"",O=e.Key||"";T.options.ForcePathStyle&&E&&(O=E+"/"+O);var A="/"+O,z={},J=e.Scope;if(!J){var Ie=e.Action||"",ke=e.ResourceKey||e.Key||"";J=e.Scope||[{action:Ie,bucket:E,region:R,prefix:ke}]}var ce=t.md5(JSON.stringify(J));T._StsCache=T._StsCache||[],function(){var Pe,Oe;for(Pe=T._StsCache.length-1;Pe>=0;Pe--){Oe=T._StsCache[Pe];var Ze=Math.round(t.getSkewTime(T.options.SystemClockOffset)/1e3)+30;if(Oe.StartTime&&Ze<Oe.StartTime||Ze>=Oe.ExpiredTime){T._StsCache.splice(Pe,1);continue}if(!Oe.ScopeLimit||Oe.ScopeLimit&&Oe.ScopeKey===ce){z=Oe;break}}}();var _e=function(){var Oe="";z.StartTime&&e.Expires?Oe=z.StartTime+";"+(z.StartTime+e.Expires*1):z.StartTime&&z.ExpiredTime&&(Oe=z.StartTime+";"+z.ExpiredTime);var Ze=t.getAuth({SecretId:z.TmpSecretId,SecretKey:z.TmpSecretKey,Method:e.Method,Pathname:A,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:T.options.UseRawKey,SystemClockOffset:T.options.SystemClockOffset,KeyTime:Oe,ForceSignHost:d}),Qe={Authorization:Ze,SecurityToken:z.SecurityToken||z.XCosSecurityToken||"",Token:z.Token||"",ClientIP:z.ClientIP||"",ClientUA:z.ClientUA||""};y(null,Qe)},Ee=function(Oe){if(Oe.Authorization){var Ze=!1,Qe=Oe.Authorization;if(Qe)if(Qe.indexOf(" ")>-1)Ze=!1;else if(Qe.indexOf("q-sign-algorithm=")>-1&&Qe.indexOf("q-ak=")>-1&&Qe.indexOf("q-sign-time=")>-1&&Qe.indexOf("q-key-time=")>-1&&Qe.indexOf("q-url-param-list=")>-1)Ze=!0;else try{Qe=atob(Qe),Qe.indexOf("a=")>-1&&Qe.indexOf("k=")>-1&&Qe.indexOf("t=")>-1&&Qe.indexOf("r=")>-1&&Qe.indexOf("b=")>-1&&(Ze=!0)}catch(dt){}if(!Ze)return t.error(new Error("getAuthorization callback params format error"))}else{if(!Oe.TmpSecretId)return t.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Oe.TmpSecretKey)return t.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Oe.SecurityToken&&!Oe.XCosSecurityToken)return t.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Oe.ExpiredTime)return t.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Oe.ExpiredTime&&Oe.ExpiredTime.toString().length!==10)return t.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Oe.StartTime&&Oe.StartTime.toString().length!==10)return t.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(z.ExpiredTime&&z.ExpiredTime-t.getSkewTime(T.options.SystemClockOffset)/1e3>60)_e();else if(T.options.getAuthorization)T.options.getAuthorization.call(T,{Bucket:E,Region:R,Method:e.Method,Key:O,Pathname:A,Query:e.Query,Headers:n,Scope:J,SystemClockOffset:T.options.SystemClockOffset,ForceSignHost:d},function(Pe){typeof Pe=="string"&&(Pe={Authorization:Pe});var Oe=Ee(Pe);if(Oe)return y(Oe);Pe.Authorization?y(null,Pe):(z=Pe||{},z.Scope=J,z.ScopeKey=ce,T._StsCache.push(z),_e())});else if(T.options.getSTS)T.options.getSTS.call(T,{Bucket:E,Region:R},function(Pe){z=Pe||{},z.Scope=J,z.ScopeKey=ce,z.TmpSecretId||(z.TmpSecretId=z.SecretId),z.TmpSecretKey||(z.TmpSecretKey=z.SecretKey);var Oe=Ee(z);if(Oe)return y(Oe);T._StsCache.push(z),_e()});else return function(){var Pe=t.getAuth({SecretId:e.SecretId||T.options.SecretId,SecretKey:e.SecretKey||T.options.SecretKey,Method:e.Method,Pathname:A,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:T.options.UseRawKey,SystemClockOffset:T.options.SystemClockOffset,ForceSignHost:d}),Oe={Authorization:Pe,SecurityToken:T.options.SecurityToken||T.options.XCosSecurityToken};return y(null,Oe),Oe}();return""}function v(e){var o=!1,n=!1,s=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var d=e.error.Code,c=e.error.Message;(d==="RequestTimeTooSkewed"||d==="AccessDenied"&&c==="Request has expired")&&(n=!0)}catch(T){}if(e)if(n&&s){var y=Date.parse(s);this.options.CorrectClockSkew&&Math.abs(t.getSkewTime(this.options.SystemClockOffset)-y)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=y-Date.now(),o=!0)}else Math.floor(e.statusCode/100)===5&&(o=!0);return o}function C(e,o){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=t.clearKey(e.qs),e.headers&&(e.headers=t.clearKey(e.headers)),e.qs&&(e.qs=t.clearKey(e.qs));var s=t.clone(e.qs);e.action&&(s[e.action]="");var d=e.url||e.Url,c=e.SignHost||et.call(this,{Bucket:e.Bucket,Region:e.Region,Url:d}),y=e.tracker,T=function E(R){var O=n.options.SystemClockOffset;y&&y.setParams({signStartTime:new Date().getTime(),retryTimes:R-1}),i.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:s,Headers:e.headers,SignHost:c,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:n.options.ForceSignHost},function(A,z){if(A){o(A);return}y&&y.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=z,M.call(n,e,function(J,Ie){y&&y.setParams({httpEndTime:new Date().getTime()}),J&&R<2&&(O!==n.options.SystemClockOffset||v.call(n,J))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]),E(R+1)):o(J,Ie)})})};T(1)}function M(e,o){var n=this,s=e.TaskId;if(!(s&&!n._isRunningTask(s))){var d=e.Bucket,c=e.Region,y=e.Key,T=e.method||"GET",E=e.Url||e.url,R=e.body,O=e.rawBody;n.options.UseAccelerate&&(c="accelerate"),E=E||nt({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:d,region:c,object:y}),e.action&&(E=E+"?"+e.action),e.qsStr&&(E.indexOf("?")>-1?E=E+"&"+e.qsStr:E=E+"?"+e.qsStr);var A={method:T,url:E,headers:e.headers,qs:e.qs,body:R},z="x-cos-security-token";if(t.isCIHost(E)&&(z="x-ci-security-token"),A.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(A.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(A.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(A.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(A.headers[z]=e.AuthData.SecurityToken),A.headers&&(A.headers=t.clearKey(A.headers)),A=t.clearKey(A),e.onProgress&&typeof e.onProgress=="function"){var J=R&&(R.size||R.length)||0;A.onProgress=function(Pe){if(!(s&&!n._isRunningTask(s))){var Oe=Pe?Pe.loaded:0;e.onProgress({loaded:Oe,total:J})}}}e.onDownloadProgress&&(A.onDownloadProgress=e.onDownloadProgress),e.DataType&&(A.dataType=e.DataType),this.options.Timeout&&(A.timeout=this.options.Timeout),n.options.ForcePathStyle&&(A.pathStyle=n.options.ForcePathStyle),n.emit("before-send",A);var Ie=A.url.includes("accelerate."),ke=A.qs?Object.keys(A.qs).map(function(Pe){return"".concat(Pe,"=").concat(A.qs[Pe])}).join("&"):"",ce=ke?A.url+"?"+ke:A.url;e.tracker&&e.tracker.setParams({reqUrl:ce,accelerate:Ie?"Y":"N"}),e.tracker&&e.tracker.parent&&e.tracker.parent.setParams({reqUrl:ce,accelerate:Ie?"Y":"N"});var _e=(n.options.Request||l)(A,function(Pe){if(Pe.error!=="abort"){var Oe={options:A,error:Qe,statusCode:Ze&&Ze.statusCode||0,headers:Ze&&Ze.headers||{},body:dt};n.emit("after-receive",Oe),Qe=Oe.error,dt=Oe.body,Ze={statusCode:Oe.statusCode,headers:Oe.headers},n.emit("after-receive",Pe);var Ze={statusCode:Pe.statusCode,statusMessage:Pe.statusMessage,headers:Pe.headers},Qe=Pe.error,dt=Pe.body,Ct,at=function(ft,Ot){if(s&&n.off("inner-kill-task",Ee),!Ct){Ct=!0;var wt={};Ze&&Ze.statusCode&&(wt.statusCode=Ze.statusCode),Ze&&Ze.headers&&(wt.headers=Ze.headers),ft?(ft=t.extend(ft||{},wt),o(ft,null)):(Ot=t.extend(Ot||{},wt),o(null,Ot)),_e=null}};if(Qe)return at(t.error(Qe));var pt=Ze.statusCode,St=Math.floor(pt/100)===2;if(O&&St)return at(null,{body:dt});var yt;try{yt=dt&&dt.indexOf("<")>-1&&dt.indexOf(">")>-1&&t.xml2json(dt)||{}}catch(mt){yt={}}var Je=yt&&yt.Error;St?at(null,yt):Je?at(t.error(new Error(Je.Message),{code:Je.Code,error:Je})):pt?at(t.error(new Error(Ze.statusMessage),{code:""+pt})):pt&&at(t.error(new Error("statusCode error")))}}),Ee=function Pe(Oe){Oe.TaskId===s&&(_e&&_e.abort&&_e.abort(),n.off("inner-kill-task",Pe))};s&&n.on("inner-kill-task",Ee)}}var ve={getService:V,putBucket:w,headBucket:j,getBucket:ae,deleteBucket:L,putBucketAcl:I,getBucketAcl:q,putBucketCors:W,getBucketCors:te,deleteBucketCors:K,getBucketLocation:$,getBucketPolicy:X,putBucketPolicy:le,deleteBucketPolicy:Ne,putBucketTagging:F,getBucketTagging:b,deleteBucketTagging:m,putBucketLifecycle:D,getBucketLifecycle:f,deleteBucketLifecycle:G,putBucketVersioning:_,getBucketVersioning:Z,putBucketReplication:De,getBucketReplication:B,deleteBucketReplication:Q,putBucketWebsite:Y,getBucketWebsite:ue,deleteBucketWebsite:de,putBucketReferer:me,getBucketReferer:ge,putBucketDomain:Re,getBucketDomain:he,deleteBucketDomain:ye,putBucketOrigin:Ce,getBucketOrigin:Ge,deleteBucketOrigin:Ae,putBucketLogging:pe,getBucketLogging:Te,putBucketInventory:we,getBucketInventory:Ue,listBucketInventory:Ke,deleteBucketInventory:xe,putBucketAccelerate:Le,getBucketAccelerate:Ve,putBucketEncryption:Me,getBucketEncryption:ne,deleteBucketEncryption:x,getObject:oe,headObject:H,listObjectVersions:N,putObject:Se,deleteObject:je,getObjectAcl:k,putObjectAcl:u,optionsObject:h,putObjectCopy:a,deleteMultipleObject:P,restoreObject:U,putObjectTagging:re,getObjectTagging:se,deleteObjectTagging:be,selectObjectContent:ee,appendObject:We,uploadPartCopy:p,multipartInit:He,multipartUpload:ie,multipartComplete:ze,multipartList:Be,multipartListPart:Fe,multipartAbort:Xe,request:qe,getObjectUrl:ot,getAuth:$e};function fe(e,o,n){t.each(["Cors","Acl"],function(s){if(e.slice(-s.length)===s){var d=e.slice(0,-s.length)+s.toUpperCase(),c=t.apiWrapper(e,o),y=!1;n[d]=function(){!y&&console.warn("warning: cos."+d+" has been deprecated. Please Use cos."+e+" instead."),y=!0,c.apply(this,arguments)}}})}g.exports.init=function(e,o){o.transferToTaskMethod(ve,"putObject"),t.each(ve,function(n,s){e.prototype[s]=t.apiWrapper(s,n),fe(s,n,e.prototype)})}},"./src/cos.js":function(g,S,r){"use strict";var l=r("./src/util.js"),t=r("./src/event.js"),V=r("./src/task.js"),w=r("./src/base.js"),j=r("./src/advance.js"),ae=r("./package.json"),L={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,EnableTracker:!1,DeepTracker:!1,TrackerDelay:5e3,CustomId:""},I=function(W){this.options=l.extend(l.clone(L),W||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5"),console.error("error: SecretKey format is incorrect. Please check")),l.isNode()&&(console.warn("warning: cos-js-sdk-v5 \u4E0D\u652F\u6301 nodejs \u73AF\u5883\u4F7F\u7528\uFF0C\u8BF7\u6539\u7528 cos-nodejs-sdk-v5\uFF0C\u53C2\u8003\u6587\u6863\uFF1A https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),t.init(this),V.init(this)};w.init(I,V),j.init(I,V),I.util={md5:l.md5,xml2json:l.xml2json,json2xml:l.json2xml},I.getAuthorization=l.getAuth,I.version=ae.version,g.exports=I},"./src/event.js":function(g,S){var r=function(V){var w={},j=function(L){return!w[L]&&(w[L]=[]),w[L]};V.on=function(ae,L){ae==="task-list-update"&&console.warn('warning: Event "'+ae+'" has been deprecated. Please use "list-update" instead.'),j(ae).push(L)},V.off=function(ae,L){for(var I=j(ae),q=I.length-1;q>=0;q--)L===I[q]&&I.splice(q,1)},V.emit=function(ae,L){for(var I=j(ae).map(function(W){return W}),q=0;q<I.length;q++)I[q](L)}},l=function(){r(this)};g.exports.init=r,g.exports.EventProxy=l},"./src/session.js":function(g,S,r){var l=r("./src/util.js"),t="cos_sdk_upload_cache",V=30*24*3600,w,j,ae=function(){try{var K=JSON.parse(localStorage.getItem(t))}catch($){}K||(K=[]),w=K},L=function(){try{w.length?localStorage.setItem(t,JSON.stringify(w)):localStorage.removeItem(t)}catch(K){}},I=function(){if(!w){ae.call(this);for(var K=!1,$=Math.round(Date.now()/1e3),le=w.length-1;le>=0;le--){var X=w[le][2];(!X||X+V<$)&&(w.splice(le,1),K=!0)}K&&L()}},q=function(){j||(j=setTimeout(function(){L(),j=null},400))},W={using:{},setUsing:function(K){W.using[K]=!0},removeUsing:function(K){delete W.using[K]},getFileId:function(K,$,le,X){return K.name&&K.size&&K.lastModifiedDate&&$?l.md5([K.name,K.size,K.lastModifiedDate,$,le,X].join("::")):null},getCopyFileId:function(K,$,le,X,Ne){var F=$["content-length"],b=$.etag||"",m=$["last-modified"];return K&&le?l.md5([K,F,b,m,le,X,Ne].join("::")):null},getUploadIdList:function(K){if(!K)return null;I.call(this);for(var $=[],le=0;le<w.length;le++)w[le][0]===K&&$.push(w[le][1]);return $.length?$:null},saveUploadId:function(K,$,le){if(I.call(this),!!K){for(var X=w.length-1;X>=0;X--){var Ne=w[X];Ne[0]===K&&Ne[1]===$&&w.splice(X,1)}w.unshift([K,$,Math.round(Date.now()/1e3)]),w.length>le&&w.splice(le),q()}},removeUploadId:function(K){I.call(this),delete W.using[K];for(var $=w.length-1;$>=0;$--)w[$][1]===K&&w.splice($,1);q()}};g.exports=W},"./src/task.js":function(g,S,r){var l=r("./src/session.js"),t=r("./src/util.js"),V={},w=function(L,I){V[I]=L[I],L[I]=function(q,W){q.SkipTask?V[I].call(this,q,W):this._addTask(I,q,W)}},j=function(L){var I=[],q={},W=0,te=0,K=function(m){var D={id:m.id,Bucket:m.Bucket,Region:m.Region,Key:m.Key,FilePath:m.FilePath,state:m.state,loaded:m.loaded,size:m.size,speed:m.speed,percent:m.percent,hashPercent:m.hashPercent,error:m.error};return m.FilePath&&(D.FilePath=m.FilePath),m._custom&&(D._custom=m._custom),D},$=function(){var b,m=function(){b=0,L.emit("task-list-update",{list:t.map(I,K)}),L.emit("list-update",{list:t.map(I,K)})};return function(){b||(b=setTimeout(m))}}(),le=function(){if(!(I.length<=L.options.UploadQueueSize)){for(var m=0;m<te&&m<I.length&&I.length>L.options.UploadQueueSize;){var D=I[m].state==="waiting"||I[m].state==="checking"||I[m].state==="uploading";!I[m]||!D?(q[I[m].id]&&delete q[I[m].id],I.splice(m,1),te--):m++}$()}},X=function b(){if(!(W>=L.options.FileParallelLimit)){for(;I[te]&&I[te].state!=="waiting";)te++;if(!(te>=I.length)){var m=I[te];te++,W++,m.state="checking",m.params.onTaskStart&&m.params.onTaskStart(K(m)),!m.params.UploadData&&(m.params.UploadData={});var D=t.formatParams(m.api,m.params);V[m.api].call(L,D,function(f,G){!L._isRunningTask(m.id)||((m.state==="checking"||m.state==="uploading")&&(m.state=f?"error":"success",f&&(m.error=f),W--,$(),b(),m.callback&&m.callback(f,G),m.state==="success"&&(m.params&&(delete m.params.UploadData,delete m.params.Body,delete m.params),delete m.callback)),le())}),$(),setTimeout(b)}}},Ne=function(m,D){var f=q[m];if(!!f){var G=f&&f.state==="waiting",_=f&&(f.state==="checking"||f.state==="uploading");if(D==="canceled"&&f.state!=="canceled"||D==="paused"&&G||D==="paused"&&_){if(D==="paused"&&f.params.Body&&typeof f.params.Body.pipe=="function"){console.error("stream not support pause");return}f.state=D,L.emit("inner-kill-task",{TaskId:m,toState:D});try{var Z=f&&f.params&&f.params.UploadData.UploadId}catch(De){}D==="canceled"&&Z&&l.removeUsing(Z),$(),_&&(W--,X()),D==="canceled"&&(f.params&&(delete f.params.UploadData,delete f.params.Body,delete f.params),delete f.callback)}le()}};L._addTasks=function(b){t.each(b,function(m){L._addTask(m.api,m.params,m.callback,!0)}),$()};var F=!0;L._addTask=function(b,m,D,f){m=t.formatParams(b,m);var G=t.uuid();m.TaskId=G,m.onTaskReady&&m.onTaskReady(G),m.TaskReady&&(m.TaskReady(G),F&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),F=!1);var _={params:m,callback:D,api:b,index:I.length,id:G,Bucket:m.Bucket,Region:m.Region,Key:m.Key,FilePath:m.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:m._custom},Z=m.onHashProgress;m.onHashProgress=function(B){!L._isRunningTask(_.id)||(_.hashPercent=B.percent,Z&&Z(B),$())};var De=m.onProgress;return m.onProgress=function(B){!L._isRunningTask(_.id)||(_.state==="checking"&&(_.state="uploading"),_.loaded=B.loaded,_.speed=B.speed,_.percent=B.percent,De&&De(B),$())},t.getFileSize(b,m,function(B,Q){if(B)return D(t.error(B));q[G]=_,I.push(_),_.size=Q,!f&&$(),X(),le()}),G},L._isRunningTask=function(b){var m=q[b];return!!(m&&(m.state==="checking"||m.state==="uploading"))},L.getTaskList=function(){return t.map(I,K)},L.cancelTask=function(b){Ne(b,"canceled")},L.pauseTask=function(b){Ne(b,"paused")},L.restartTask=function(b){var m=q[b];m&&(m.state==="paused"||m.state==="error")&&(m.state="waiting",$(),te=Math.min(te,m.index),X())},L.isUploadRunning=function(){return W||te<I.length}};g.exports.transferToTaskMethod=w,g.exports.init=j},"./src/tracker.js":function(g,S,r){var l=r("./node_modules/@babel/runtime/helpers/classCallCheck.js"),t=r("./node_modules/@babel/runtime/helpers/createClass.js"),V=r("./node_modules/@babel/runtime/helpers/typeof.js"),w=r("./package.json"),j=r("./lib/beacon.min.js"),ae=null,L=function(m){return ae||(ae=new j({appkey:"0AND0VEVB24UBGDU",versionCode:w.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:m,sessionDuration:60*1e3})),ae},I={getUid:function(){var m=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return m()+m()+"-"+m()+"-"+m()+"-"+m()+"-"+m()+m()+m()},getNetType:function(){if((typeof navigator=="undefined"?"undefined":V(navigator))==="object"){var m=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(m==null?void 0:m.type)||(m==null?void 0:m.effectiveType)||"unknown"}return"unknown"},getOsType:function(){if((typeof navigator=="undefined"?"undefined":V(navigator))!=="object")return"unknown os";var m=navigator.userAgent.toLowerCase(),D=/macintosh|mac os x/i.test(navigator.userAgent);return m.indexOf("win32")>=0||m.indexOf("wow32")>=0?"win32":m.indexOf("win64")>=0||m.indexOf("wow64")>=0?"win64":D?"mac":"unknown os"},isMobile:function(){var m=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator=="undefined"?"undefined":V(navigator))==="object"&&navigator.userAgent.match(m))},isAndroid:function(){var m=/(Android|Adr|Linux)/i;return!!((typeof navigator=="undefined"?"undefined":V(navigator))==="object"&&navigator.userAgent.match(m))},isIOS:function(){var m=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator=="undefined"?"undefined":V(navigator))==="object"&&navigator.userAgent.match(m))},isOtherMobile:function(){return isMobile&&!isAndroid&&!isIOS},getDeviceName:function(){if((typeof navigator=="undefined"?"undefined":V(navigator))!=="object")return"unknown device";var m=navigator.userAgent.toLowerCase();if(m.includes("app/tencent_wemeet"))return"tencent_wemeet";if(m.indexOf("maxthon")>=0){var D=m.match(/maxthon\/([\d.]+)/),f=D&&D[1]||"";return"\u50B2\u6E38\u6D4F\u89C8\u5668 ".concat(f).trim()}if(m.indexOf("qqbrowser")>=0){var G=m.match(/qqbrowser\/([\d.]+)/),_=G&&G[1]||"";return"QQ\u6D4F\u89C8\u5668 ".concat(_).trim()}if(m.indexOf("se 2.x")>=0)return"\u641C\u72D7\u6D4F\u89C8\u5668";if(m.indexOf("wxwork")>=0)return"\u5FAE\u4FE1\u5185\u7F6E\u6D4F\u89C8\u5668";if(m.indexOf("msie")>=0){var Z=m.match(/msie ([\d.]+)/),De=Z&&Z[1]||"";return"IE ".concat(De).trim()}if(m.indexOf("firefox")>=0){var B=m.match(/firefox\/([\d.]+)/),Q=B&&B[1]||"";return"Firefox ".concat(Q).trim()}if(m.indexOf("chrome")>=0){var Y=m.match(/chrome\/([\d.]+)/),ue=Y&&Y[1]||"";return"Chrome ".concat(ue).trim()}if(m.indexOf("opera")>=0){var de=m.match(/opera.([\d.]+)/),me=de&&de[1]||"";return"Opera ".concat(me).trim()}if(m.indexOf("safari")>=0){var ge=m.match(/version\/([\d.]+)/),Re=ge&&ge[1]||"";return"Safari ".concat(Re).trim()}if(m.indexOf("edge")>=0){var he=m.match(/edge\/([\d.]+)/),ye=he&&he[1]||"";return"edge ".concat(ye).trim()}return m.substr(0,200)}},q={isMobile:I.isMobile(),isBrowser:!I.isMobile(),mobileOsType:I.isAndroid()?"android":I.isIOS?"ios":"other_mobile",pcOsType:I.getOsType()},W={deviceType:q.isMobile?"mobile":q.isBrowser?"browser":"unknown",devicePlatform:q.isMobile?q.mobileOsType:q.pcOsType,deviceName:I.getDeviceName()},te=["multipartInit","multipartUpload","multipartComplete","multipartList","multipartListPart","multipartAbort"],K=["putObject","postObject","appendObject","sliceUploadFile","uploadFile","uploadFiles"].concat(te),$=["getObject"];function le(b){return K.includes(b)?"cos_upload":$.includes(b)?"cos_download":"base_service"}function X(b){return b.replace(/([A-Z])/g,"_$1").toLowerCase()}function Ne(b){var m={},D=["tracePlatform","cossdkVersion","region","networkType","host","accelerate","requestPath","size","httpMd5","httpSign","httpFull","name","result","tookTime","errorNode","errorCode","errorMessage","errorRequestId","errorStatusCode","errorServiceName","errorType","traceId","bucket","appid","partNumber","retryTimes","reqUrl","customId","fullError","deviceType","devicePlatform","deviceName"],f=["tracePlatform","cossdkVersion","region","bucket","appid","networkType","host","accelerate","requestPath","partNumber","size","name","result","tookTime","errorRequestId","retryTimes","reqUrl","customId","deviceType","devicePlatform","deviceName"],G=b.result==="Success"?f:D;for(var _ in b)if(!!G.includes(_)){var Z=X(_);m[Z]=b[_]}return m}var F=function(){"use strict";function b(m){l(this,b);var D=m.parent,f=m.traceId,G=m.bucket,_=m.region,Z=m.apiName,De=m.fileKey,B=m.fileSize,Q=m.accelerate,Y=m.customId,ue=m.delay,de=m.deepTracker,me=G&&G.substr(G.lastIndexOf("-")+1)||"";this.parent=D,this.deepTracker=de,this.params={cossdkVersion:w.version,region:_,networkType:"",host:"",accelerate:Q?"Y":"N",requestPath:De||"",size:B||-1,httpMd5:0,httpSign:0,httpFull:0,name:Z||"",result:"",tookTime:0,errorNode:"",errorCode:"",errorMessage:"",errorRequestId:"",errorStatusCode:0,errorServiceName:"",tracePlatform:"cos-js-sdk-v5",traceId:f||I.getUid(),bucket:G,appid:me,partNumber:0,retryTimes:0,reqUrl:"",customId:Y||"",deviceType:W.deviceType,devicePlatform:W.devicePlatform,deviceName:W.deviceName,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0},this.beacon=L(ue)}return t(b,[{key:"formatResult",value:function(D,f){var G,_,Z,De,B,Q,Y=new Date().getTime(),ue=Y-this.params.startTime,de=I.getNetType(),me=D?(D==null?void 0:D.code)||(D==null||(G=D.error)===null||G===void 0?void 0:G.code)||(D==null||(_=D.error)===null||_===void 0?void 0:_.Code):"",ge=D?(D==null?void 0:D.message)||(D==null||(Z=D.error)===null||Z===void 0?void 0:Z.message)||(D==null||(De=D.error)===null||De===void 0?void 0:De.Message):"",Re=D?(D==null?void 0:D.resource)||(D==null||(B=D.error)===null||B===void 0?void 0:B.resource)||(D==null||(Q=D.error)===null||Q===void 0?void 0:Q.Resource):"",he=D?D==null?void 0:D.statusCode:f.statusCode,ye=D?(D==null?void 0:D.headers)&&(D==null?void 0:D.headers["x-cos-request-id"]):(f==null?void 0:f.headers)&&(f==null?void 0:f.headers["x-cos-request-id"]),Ce=D?ye?"Server":"Client":"";if(Object.assign(this.params,{tookTime:ue,networkType:de,httpMd5:this.params.md5EndTime-this.params.md5StartTime,httpSign:this.params.signEndTime-this.params.signStartTime,httpFull:this.params.httpEndTime-this.params.httpStartTime,result:D?"Fail":"Success",errorType:Ce,errorCode:me,errorStatusCode:he,errorMessage:ge,errorServiceName:Re,errorRequestId:ye}),D&&(!me||!ge)&&(this.params.fullError=D?JSON.stringify(D):""),this.params.name==="getObject"&&(this.params.size=f?f.headers&&f.headers["content-length"]:-1),this.params.reqUrl)try{var Ge=/^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);this.params.host=Ge[2]}catch(Ae){this.params.host=this.params.reqUrl}this.sendEvents()}},{key:"setParams",value:function(D){Object.assign(this.params,D)}},{key:"sendEvents",value:function(){if(!(te.includes(this.params.name)&&!this.deepTracker)){var D=le(this.params.name),f=Ne(this.params);this.params.delay===0?this.beacon.onDirectUserAction(D,f):this.beacon.onUserAction(D,f),this.destroy()}}},{key:"generateSubTracker",value:function(D){return Object.assign(D,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.params.delay}),new b(D)}},{key:"destroy",value:function(){this.beacon=null,this.params={}}}]),b}();g.exports=F},"./src/util.js":function(g,S,r){"use strict";(function(l){var t=r("./node_modules/@babel/runtime/helpers/typeof.js"),V=r("./lib/md5.js"),w=r("./lib/crypto.js"),j=r("./lib/xml2json.js"),ae=r("./lib/json2xml.js"),L=r("./src/tracker.js");function I(ne){return encodeURIComponent(ne).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function q(ne,x){var H=[];for(var N in ne)ne.hasOwnProperty(N)&&H.push(x?I(N).toLowerCase():N);return H.sort(function(oe,Se){return oe=oe.toLowerCase(),Se=Se.toLowerCase(),oe===Se?0:oe>Se?1:-1})}var W=function(x,H){var N,oe,Se,je=[],k=q(x);for(N=0;N<k.length;N++)oe=k[N],Se=x[oe]===void 0||x[oe]===null?"":""+x[oe],oe=H?I(oe).toLowerCase():I(oe),Se=I(Se)||"",je.push(oe+"="+Se);return je.join("&")},te=["content-disposition","content-encoding","content-length","content-md5","expect","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","response-cache-control","response-content-disposition","response-content-encoding","response-content-language","response-content-type","response-expires","transfer-encoding","versionid"],K=function(x){var H={};for(var N in x){var oe=N.toLowerCase();(oe.indexOf("x-cos-")>-1||te.indexOf(oe)>-1)&&(H[N]=x[N])}return H},$=function(x){x=x||{};var H=x.SecretId,N=x.SecretKey,oe=x.KeyTime,Se=(x.method||x.Method||"get").toLowerCase(),je=B(x.Query||x.params||{}),k=K(B(x.Headers||x.headers||{})),u=x.Key||"",h;x.UseRawKey?h=x.Pathname||x.pathname||"/"+u:(h=x.Pathname||x.pathname||u,h.indexOf("/")!==0&&(h="/"+h));var a=x.ForceSignHost!==!1;if(!k.Host&&!k.host&&x.Bucket&&x.Region&&a&&(k.Host=x.Bucket+".cos."+x.Region+".myqcloud.com"),!H)throw new Error("missing param SecretId");if(!N)throw new Error("missing param SecretKey");var p=Math.round(Ue(x.SystemClockOffset)/1e3)-1,P=p,U=x.Expires||x.expires;U===void 0?P+=900:P+=U*1||0;var re="sha1",se=H,be=oe||p+";"+P,ee=oe||p+";"+P,He=q(k,!0).join(";").toLowerCase(),ie=q(je,!0).join(";").toLowerCase(),ze=w.HmacSHA1(ee,N).toString(),Be=[Se,h,Me.obj2str(je,!0),Me.obj2str(k,!0),""].join(`
`),Fe=["sha1",be,w.SHA1(Be).toString(),""].join(`
`),Xe=w.HmacSHA1(Fe,ze).toString(),qe=["q-sign-algorithm="+re,"q-ak="+se,"q-sign-time="+be,"q-key-time="+ee,"q-header-list="+He,"q-url-param-list="+ie,"q-signature="+Xe].join("&");return qe},le=function(x,H,N){var oe=H/8,Se=x.slice(N,N+oe);return new Uint8Array(Se).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[H](Se)[0]},X=function(x,H,N,oe){var Se=x.slice(H,N),je="";return new Uint8Array(Se).forEach(function(k){je+=String.fromCharCode(k)}),oe&&(je=decodeURIComponent(escape(je))),je},Ne=function(x){for(var H={},N=X(x),oe={records:[]};x.byteLength;){var Se=le(x,32,0),je=le(x,32,4),k=Se-je-16,u=0,h;for(x=x.slice(12);u<je;){var a=le(x,8,u),p=X(x,u+1,u+1+a),P=le(x,16,u+a+2),U=X(x,u+a+4,u+a+4+P);H[p]=U,u+=a+4+P}if(H[":event-type"]==="Records")h=X(x,u,u+k,!0),oe.records.push(h);else if(H[":event-type"]==="Stats")h=X(x,u,u+k,!0),oe.stats=Me.xml2json(h).Stats;else if(H[":event-type"]==="error"){var re=H[":error-code"],se=H[":error-message"],be=new Error(se);be.message=se,be.name=be.code=re,oe.error=be}else["Progress","Continuation","End"].includes(H[":event-type"]);x=x.slice(u+k+4)}return{payload:oe.records.join(""),body:N}},F=function(x){var H=this.options.CopySourceParser;if(H)return H(x);var N=x.match(/^([^.]+-\d+)\.cos(v6|-cdc)?\.([^.]+)\.myqcloud\.com\/(.+)$/);return N?{Bucket:N[1],Region:N[3],Key:N[4]}:null},b=function(){},m=function(x){var H={};for(var N in x)x.hasOwnProperty(N)&&x[N]!==void 0&&x[N]!==null&&(H[N]=x[N]);return H},D=function(x,H){var N,oe=new FileReader;FileReader.prototype.readAsBinaryString?(N=FileReader.prototype.readAsBinaryString,oe.onload=function(){H(this.result)}):FileReader.prototype.readAsArrayBuffer?N=function(je){var k="",u=this,h=new FileReader;h.onload=function(a){for(var p=new Uint8Array(h.result),P=p.byteLength,U=0;U<P;U++)k+=String.fromCharCode(p[U]);H(k)},h.readAsArrayBuffer(je)}:console.error("FileReader not support readAsBinaryString"),N.call(oe,x)},f=function(){var ne=function(N,oe){N=N.split("."),oe=oe.split(".");for(var Se=0;Se<oe.length;Se++)if(N[Se]!==oe[Se])return parseInt(N[Se])>parseInt(oe[Se])?1:-1;return 0},x=function(N){if(!N)return!1;var oe=(N.match(/Chrome\/([.\d]+)/)||[])[1],Se=(N.match(/QBCore\/([.\d]+)/)||[])[1],je=(N.match(/QQBrowser\/([.\d]+)/)||[])[1],k=oe&&ne(oe,"53.0.2785.116")<0&&Se&&ne(Se,"3.53.991.400")<0&&je&&ne(je,"9.0.2524.400")<=0||!1;return k};return x(typeof navigator!="undefined"&&navigator.userAgent)}(),G=function(x,H,N,oe,Se){var je;if(x.slice?je=x.slice(H,N):x.mozSlice?je=x.mozSlice(H,N):x.webkitSlice&&(je=x.webkitSlice(H,N)),oe&&f){var k=new FileReader;k.onload=function(u){je=null,Se(new Blob([k.result]))},k.readAsArrayBuffer(je)}else Se(je)},_=function(x,H,N,oe){N=N||b,x?typeof H=="string"?N(Me.md5(H,!0)):Blob&&H instanceof Blob?Me.getFileMd5(H,function(Se,je){N(je)},oe):N():N()},Z=1024*1024,De=function(x,H,N){var oe=x.size,Se=0,je=V.getCtx(),k=function u(h){if(h>=oe){var a=je.digest("hex");H(null,a);return}var p=Math.min(oe,h+Z);Me.fileSlice(x,h,p,!1,function(P){D(P,function(U){P=null,je=je.update(U,!0),Se+=U.length,U=null,N&&N({loaded:Se,total:oe,percent:Math.round(Se/oe*1e4)/1e4}),u(h+Z)})})};k(0)};function B(ne){return Re(ne,function(x){return t(x)==="object"&&x!==null?B(x):x})}function Q(ne,x,H){return ne&&x in ne?ne[x]:H}function Y(ne,x){return ge(x,function(H,N){ne[N]=x[N]}),ne}function ue(ne){return ne instanceof Array}function de(ne,x){for(var H=!1,N=0;N<ne.length;N++)if(x===ne[N]){H=!0;break}return H}function me(ne){return ue(ne)?ne:[ne]}function ge(ne,x){for(var H in ne)ne.hasOwnProperty(H)&&x(ne[H],H)}function Re(ne,x){var H=ue(ne)?[]:{};for(var N in ne)ne.hasOwnProperty(N)&&(H[N]=x(ne[N],N));return H}function he(ne,x){var H=ue(ne),N=H?[]:{};for(var oe in ne)ne.hasOwnProperty(oe)&&x(ne[oe],oe)&&(H?N.push(ne[oe]):N[oe]=ne[oe]);return N}var ye=function(x){var H,N,oe,Se="";for(H=0,N=x.length/2;H<N;H++)oe=parseInt(x[H*2]+x[H*2+1],16),Se+=String.fromCharCode(oe);return btoa(Se)},Ce=function(){var x=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return x()+x()+"-"+x()+"-"+x()+"-"+x()+"-"+x()+x()+x()},Ge=function(x,H){var N=H.Bucket,oe=H.Region,Se=H.Key,je=this.options.Domain,k=!je||typeof je=="string"&&je.indexOf("{Bucket}")>-1,u=!je||typeof je=="string"&&je.indexOf("{Region}")>-1;if(x.indexOf("Bucket")>-1||x==="deleteMultipleObject"||x==="multipartList"||x==="listObjectVersions"){if(k&&!N)return"Bucket";if(u&&!oe)return"Region"}else if(x.indexOf("Object")>-1||x.indexOf("multipart")>-1||x==="sliceUploadFile"||x==="abortUploadTask"){if(k&&!N)return"Bucket";if(u&&!oe)return"Region";if(!Se)return"Key"}return!1},Ae=function(x,H){if(H=Y({},H),x!=="getAuth"&&x!=="getV4Auth"&&x!=="getObjectUrl"){var N=H.Headers||{};if(H&&t(H)==="object"){(function(){for(var Se in H)H.hasOwnProperty(Se)&&Se.indexOf("x-cos-")>-1&&(N[Se]=H[Se])})();var oe={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"};Me.each(oe,function(Se,je){H[Se]!==void 0&&(N[je]=H[Se])}),H.Headers=m(N)}}return H},pe=function(x,H){return function(N,oe){var Se=this;typeof N=="function"&&(oe=N,N={}),N=Ae(x,N);var je;if(Se.options.EnableTracker)if(N.calledBySdk==="sliceUploadFile")je=N.tracker&&N.tracker.generateSubTracker({apiName:x});else if(["uploadFile","uploadFiles"].includes(x))je=null;else{var k=-1;N.Body&&(k=typeof N.Body=="string"?N.Body.length:N.Body.size||N.Body.byteLength||-1),je=new L({bucket:N.Bucket,region:N.Region,apiName:x,fileKey:N.Key,fileSize:k,deepTracker:Se.options.DeepTracker,customId:Se.options.CustomId,delay:Se.options.TrackerDelay})}N.tracker=je;var u=function(se){return se&&se.headers&&(se.headers["x-cos-request-id"]&&(se.RequestId=se.headers["x-cos-request-id"]),se.headers["x-ci-request-id"]&&(se.RequestId=se.headers["x-ci-request-id"]),se.headers["x-cos-version-id"]&&(se.VersionId=se.headers["x-cos-version-id"]),se.headers["x-cos-delete-marker"]&&(se.DeleteMarker=se.headers["x-cos-delete-marker"])),se},h=function(se,be){je&&je.formatResult(se,be),oe&&oe(u(se),u(be))},a=function(){if(x!=="getService"&&x!=="abortUploadTask"){var se=Ge.call(Se,x,N);if(se)return"missing param "+se;if(N.Region){if(Se.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(N.Region))return"Region format error."}else{if(N.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(N.Region))return"Region format error."}!Se.options.CompatibilityMode&&N.Region.indexOf("-")===-1&&N.Region!=="yfb"&&N.Region!=="default"&&N.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(N.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(N.Bucket))if(N.AppId)N.Bucket=N.Bucket+"-"+N.AppId;else if(Se.options.AppId)N.Bucket=N.Bucket+"-"+Se.options.AppId;else return'Bucket should format as "test-1250000000".';N.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete N.AppId)}!Se.options.UseRawKey&&N.Key&&N.Key.substr(0,1)==="/"&&(N.Key=N.Key.substr(1))}},p=a(),P=x==="getAuth"||x==="getObjectUrl";if(typeof Promise=="function"&&!P&&!oe)return new Promise(function(re,se){if(oe=function(ee,He){ee?se(ee):re(He)},p)return h(Me.error(new Error(p)));H.call(Se,N,h)});if(p)return h(Me.error(new Error(p)));var U=H.call(Se,N,h);if(P)return U}},Te=function(x,H){var N=this,oe=0,Se=0,je=Date.now(),k,u;function h(){if(u=0,H&&typeof H=="function"){k=Date.now();var a=Math.max(0,Math.round((Se-oe)/((k-je)/1e3)*100)/100)||0,p;Se===0&&x===0?p=1:p=Math.floor(Se/x*100)/100||0,je=k,oe=Se;try{H({loaded:Se,total:x,speed:a,percent:p})}catch(P){}}}return function(a,p){if(a&&(Se=a.loaded,x=a.total),p)clearTimeout(u),h();else{if(u)return;u=setTimeout(h,N.options.ProgressInterval)}}},we=function(x,H,N){var oe;if(typeof H.Body=="string"?H.Body=new Blob([H.Body],{type:"text/plain"}):H.Body instanceof ArrayBuffer&&(H.Body=new Blob([H.Body])),H.Body&&(H.Body instanceof Blob||H.Body.toString()==="[object File]"||H.Body.toString()==="[object Blob]"))oe=H.Body.size;else{N(Me.error(new Error("params body format error, Only allow File|Blob|String.")));return}H.ContentLength=oe,N(null,oe)},Ue=function(x){return Date.now()+(x||0)},Ke=function(x,H){var N=x;return x.message=x.message||null,typeof H=="string"?(x.error=H,x.message=H):t(H)==="object"&&H!==null&&(Y(x,H),(H.code||H.name)&&(x.code=H.code||H.name),H.message&&(x.message=H.message),H.stack&&(x.stack=H.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(x,"name",{writable:!0,enumerable:!1}),Object.defineProperty(x,"message",{enumerable:!0})),x.name=H&&H.name||x.name||x.code||"Error",x.code||(x.code=x.name),x.error||(x.error=B(N)),x},xe=function(){return(typeof globalThis=="undefined"?"undefined":t(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},Le=function(){return(typeof window=="undefined"?"undefined":t(window))!=="object"&&(typeof l=="undefined"?"undefined":t(l))==="object"&&!0&&!xe()},Ve=function(x){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(x)},Me={noop:b,formatParams:Ae,apiWrapper:pe,xml2json:j,json2xml:ae,md5:V,clearKey:m,fileSlice:G,getBodyMd5:_,getFileMd5:De,binaryBase64:ye,extend:Y,isArray:ue,isInArray:de,makeArray:me,each:ge,map:Re,filter:he,clone:B,attr:Q,uuid:Ce,camSafeUrlEncode:I,throttleOnProgress:Te,getFileSize:we,getSkewTime:Ue,error:Ke,obj2str:W,getAuth:$,parseSelectPayload:Ne,getSourceParams:F,isBrowser:!0,isNode:Le,isCIHost:Ve};g.exports=Me}).call(this,r("./node_modules/process/browser.js"))}})})}}]);
